function checkEnter(e,t){var a=t.keyCode?t.keyCode:t.which?t.which:t.charCode;return 13!=a||("username"==e.id?registerUsername():"peer"==e.id?doCall():"datasend"==e.id&&sendData(),!1)}function registerUsername(){$("#username").attr("disabled",!0),$("#register").attr("disabled",!0).unbind("click");var e=$("#username").val();if(""===e)return bootbox.alert("Insert a username to register (e.g., pippo)"),$("#username").removeAttr("disabled"),void $("#register").removeAttr("disabled").click(registerUsername);if(/[^a-zA-Z0-9]/.test(e))return bootbox.alert("Input is not alphanumeric"),$("#username").removeAttr("disabled").val(""),void $("#register").removeAttr("disabled").click(registerUsername);var t={request:"register",username:e};videocall.send({message:t})}function doCall(){$("#peer").attr("disabled",!0),$("#call").attr("disabled",!0).unbind("click");var e=$("#peer").val();return""===e?(bootbox.alert("Insert a username to call (e.g., pluto)"),$("#peer").removeAttr("disabled"),void $("#call").removeAttr("disabled").click(doCall)):/[^a-zA-Z0-9]/.test(e)?(bootbox.alert("Input is not alphanumeric"),$("#peer").removeAttr("disabled").val(""),void $("#call").removeAttr("disabled").click(doCall)):void videocall.createOffer({media:{data:!0},simulcast:doSimulcast,success:function(e){Janus.debug("Got SDP!"),Janus.debug(e);var t={request:"call",username:$("#peer").val()};videocall.send({message:t,jsep:e})},error:function(e){Janus.error("WebRTC error...",e),bootbox.alert("WebRTC error... "+e)}})}function doHangup(){$("#call").attr("disabled",!0).unbind("click");var e={request:"hangup"};videocall.send({message:e}),videocall.hangup(),yourusername=null}function sendData(){var e=$("#datasend").val();return""===e?void bootbox.alert("Insert a message to send on the DataChannel to your peer"):void videocall.data({text:e,error:function(e){bootbox.alert(e)},success:function(){$("#datasend").val("")}})}function getQueryStringValue(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=t.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function addSimulcastButtons(e){$("#curres").parent().append('<div id="simulcast" class="btn-group-vertical btn-group-vertical-xs pull-right">\t<div class"row">\t\t<div class="btn-group btn-group-xs" style="width: 100%">\t\t\t<button id="sl-2" type="button" class="btn btn-primary" data-toggle="tooltip" title="Switch to higher quality" style="width: 33%">SL 2</button>\t\t\t<button id="sl-1" type="button" class="btn btn-primary" data-toggle="tooltip" title="Switch to normal quality" style="width: 33%">SL 1</button>\t\t\t<button id="sl-0" type="button" class="btn btn-primary" data-toggle="tooltip" title="Switch to lower quality" style="width: 34%">SL 0</button>\t\t</div>\t</div>\t<div class"row">\t\t<div class="btn-group btn-group-xs hide" style="width: 100%">\t\t\t<button id="tl-2" type="button" class="btn btn-primary" data-toggle="tooltip" title="Cap to temporal layer 2" style="width: 34%">TL 2</button>\t\t\t<button id="tl-1" type="button" class="btn btn-primary" data-toggle="tooltip" title="Cap to temporal layer 1" style="width: 33%">TL 1</button>\t\t\t<button id="tl-0" type="button" class="btn btn-primary" data-toggle="tooltip" title="Cap to temporal layer 0" style="width: 33%">TL 0</button>\t\t</div>\t</div></div>'),$("#sl-0").removeClass("btn-primary btn-success").addClass("btn-primary").unbind("click").click(function(){toastr.info("Switching simulcast substream, wait for it... (lower quality)",null,{timeOut:2e3}),$("#sl-2").hasClass("btn-success")||$("#sl-2").removeClass("btn-primary btn-info").addClass("btn-primary"),$("#sl-1").hasClass("btn-success")||$("#sl-1").removeClass("btn-primary btn-info").addClass("btn-primary"),$("#sl-0").removeClass("btn-primary btn-info btn-success").addClass("btn-info"),videocall.send({message:{request:"set",substream:0}})}),$("#sl-1").removeClass("btn-primary btn-success").addClass("btn-primary").unbind("click").click(function(){toastr.info("Switching simulcast substream, wait for it... (normal quality)",null,{timeOut:2e3}),$("#sl-2").hasClass("btn-success")||$("#sl-2").removeClass("btn-primary btn-info").addClass("btn-primary"),$("#sl-1").removeClass("btn-primary btn-info btn-success").addClass("btn-info"),$("#sl-0").hasClass("btn-success")||$("#sl-0").removeClass("btn-primary btn-info").addClass("btn-primary"),videocall.send({message:{request:"set",substream:1}})}),$("#sl-2").removeClass("btn-primary btn-success").addClass("btn-primary").unbind("click").click(function(){toastr.info("Switching simulcast substream, wait for it... (higher quality)",null,{timeOut:2e3}),$("#sl-2").removeClass("btn-primary btn-info btn-success").addClass("btn-info"),$("#sl-1").hasClass("btn-success")||$("#sl-1").removeClass("btn-primary btn-info").addClass("btn-primary"),$("#sl-0").hasClass("btn-success")||$("#sl-0").removeClass("btn-primary btn-info").addClass("btn-primary"),videocall.send({message:{request:"set",substream:2}})}),e&&($("#tl-0").parent().removeClass("hide"),$("#tl-0").removeClass("btn-primary btn-success").addClass("btn-primary").unbind("click").click(function(){toastr.info("Capping simulcast temporal layer, wait for it... (lowest FPS)",null,{timeOut:2e3}),$("#tl-2").hasClass("btn-success")||$("#tl-2").removeClass("btn-primary btn-info").addClass("btn-primary"),$("#tl-1").hasClass("btn-success")||$("#tl-1").removeClass("btn-primary btn-info").addClass("btn-primary"),$("#tl-0").removeClass("btn-primary btn-info btn-success").addClass("btn-info"),videocall.send({message:{request:"set",temporal:0}})}),$("#tl-1").removeClass("btn-primary btn-success").addClass("btn-primary").unbind("click").click(function(){toastr.info("Capping simulcast temporal layer, wait for it... (medium FPS)",null,{timeOut:2e3}),$("#tl-2").hasClass("btn-success")||$("#tl-2").removeClass("btn-primary btn-info").addClass("btn-primary"),$("#tl-1").removeClass("btn-primary btn-info").addClass("btn-info"),$("#tl-0").hasClass("btn-success")||$("#tl-0").removeClass("btn-primary btn-info").addClass("btn-primary"),videocall.send({message:{request:"set",temporal:1}})}),$("#tl-2").removeClass("btn-primary btn-success").addClass("btn-primary").unbind("click").click(function(){toastr.info("Capping simulcast temporal layer, wait for it... (highest FPS)",null,{timeOut:2e3}),$("#tl-2").removeClass("btn-primary btn-info btn-success").addClass("btn-info"),$("#tl-1").hasClass("btn-success")||$("#tl-1").removeClass("btn-primary btn-info").addClass("btn-primary"),$("#tl-0").hasClass("btn-success")||$("#tl-0").removeClass("btn-primary btn-info").addClass("btn-primary"),videocall.send({message:{request:"set",temporal:2}})}))}function updateSimulcastButtons(e,t){0===e?(toastr.success("Switched simulcast substream! (lower quality)",null,{timeOut:2e3}),$("#sl-2").removeClass("btn-primary btn-success").addClass("btn-primary"),$("#sl-1").removeClass("btn-primary btn-success").addClass("btn-primary"),$("#sl-0").removeClass("btn-primary btn-info btn-success").addClass("btn-success")):1===e?(toastr.success("Switched simulcast substream! (normal quality)",null,{timeOut:2e3}),$("#sl-2").removeClass("btn-primary btn-success").addClass("btn-primary"),$("#sl-1").removeClass("btn-primary btn-info btn-success").addClass("btn-success"),$("#sl-0").removeClass("btn-primary btn-success").addClass("btn-primary")):2===e&&(toastr.success("Switched simulcast substream! (higher quality)",null,{timeOut:2e3}),$("#sl-2").removeClass("btn-primary btn-info btn-success").addClass("btn-success"),$("#sl-1").removeClass("btn-primary btn-success").addClass("btn-primary"),$("#sl-0").removeClass("btn-primary btn-success").addClass("btn-primary")),0===t?(toastr.success("Capped simulcast temporal layer! (lowest FPS)",null,{timeOut:2e3}),$("#tl-2").removeClass("btn-primary btn-success").addClass("btn-primary"),$("#tl-1").removeClass("btn-primary btn-success").addClass("btn-primary"),$("#tl-0").removeClass("btn-primary btn-info btn-success").addClass("btn-success")):1===t?(toastr.success("Capped simulcast temporal layer! (medium FPS)",null,{timeOut:2e3}),$("#tl-2").removeClass("btn-primary btn-success").addClass("btn-primary"),$("#tl-1").removeClass("btn-primary btn-info btn-success").addClass("btn-success"),$("#tl-0").removeClass("btn-primary btn-success").addClass("btn-primary")):2===t&&(toastr.success("Capped simulcast temporal layer! (highest FPS)",null,{timeOut:2e3}),$("#tl-2").removeClass("btn-primary btn-info btn-success").addClass("btn-success"),$("#tl-1").removeClass("btn-primary btn-success").addClass("btn-primary"),$("#tl-0").removeClass("btn-primary btn-success").addClass("btn-primary"))}!function(){"use strict";angular.module("tsa",["ngAnimate","ngResource","ui.router","ngMaterial","ngCookies","gridster","pascalprecht.translate","tmh.dynamicLocale","angularFileUpload","ngFileSaver","tsa.components","tsa.pages","tsa.tsaViews","tsa.services","tsa.bootstrap"])}(),function(){"use strict";angular.module("tsa.components",["tsa.components.card","tsa.components.console","tsa.components.dataView","tsa.components.doubleDataView","tsa.components.navbar","tsa.components.settingsButton","tsa.components.sidenav"])}(),function(){"use strict";angular.module("tsa.pages",["tsa.pages.acquisition","tsa.pages.dashboard","tsa.pages.login","tsa.pages.dataAccess","tsa.pages.tracking","tsa.pages.staticGrid","tsa.pages.welcome"])}(),function(){"use strict";angular.module("tsa.services",["tsa.services.dialog"])}(),function(){"use strict";angular.module("tsa.tsaViews",["tsa.tsaViews.adcp","tsa.tsaViews.attitude","tsa.tsaViews.casino","tsa.tsaViews.casinoAddEvent","tsa.tsaViews.codeNameFields","tsa.tsaViews.debug","tsa.tsaViews.depth","tsa.tsaViews.devices","tsa.tsaViews.driverPreview","tsa.tsaViews.ephemeride","tsa.tsaViews.ferryboxFluo","tsa.tsaViews.ferryboxScience","tsa.tsaViews.ferryboxTechnic","tsa.tsaViews.flow","tsa.tsaViews.funesWinch","tsa.tsaViews.generic","tsa.tsaViews.gps","tsa.tsaViews.graphics","tsa.tsaViews.gravimeter","tsa.tsaViews.haulComposition","tsa.tsaViews.hullSoundSpeed","tsa.tsaViews.kss31","tsa.tsaViews.navigation","tsa.tsaViews.map","tsa.tsaViews.mapSidemenu","tsa.tsaViews.magnetometer","tsa.tsaViews.message","tsa.tsaViews.mobile","tsa.tsaViews.numerical","tsa.tsaViews.propulsionAt","tsa.tsaViews.landingAt","tsa.tsaViews.propulsionTl","tsa.tsaViews.propulsionPp","tsa.tsaViews.species","tsa.tsaViews.multibeam","tsa.tsaViews.thermoConfig","tsa.tsaViews.thermometer","tsa.tsaViews.thermosal","tsa.tsaViews.trawling","tsa.tsaViews.trawl","tsa.tsaViews.weather","tsa.tsaViews.video","tsa.tsaViews.videoCall","tsa.tsaViews.winch","tsa.tsaViews.EFPos","tsa.tsaViews.EFMet","tsa.tsaViews.EFTss","tsa.tsaViews.EFAum","tsa.tsaViews.winchAlarmPp","tsa.tsaViews.winchInfo","tsa.tsaViews.kleyState","tsa.tsaViews.menu","tsa.tsaViews.routeMd"])}(),function(){"use strict";angular.module("tsa.components.console",[])}(),function(){"use strict";angular.module("tsa.pages.acquisition",[])}(),function(){"use strict";angular.module("tsa.pages.dashboard",[])}(),function(){"use strict";angular.module("tsa.pages.dataAccess",["tsa.pages.dataAccess.variableSelector","tsa.pages.dataAccess.paramSelector","tsa.pages.dataAccess.periodSelector","tsa.pages.dataAccess.resultCard"])}(),function(){"use strict";angular.module("tsa.pages.login",[])}(),function(){"use strict";angular.module("tsa.pages.tracking",[])}(),function(){"use strict";angular.module("tsa.services.dialog",[])}(),function(){"use strict";angular.module("tsa").constant("ADCP",{FRAME:"watercurrentvelocity",EW_VEL:"EWVelAbs",NS_VEL:"NSVelAbs",BIN_LENGTH:"binLength",SOUNDING:"snd"}).constant("AIS",{FRAME:"ais",LATITUDE:"lat",LONGITUDE:"long",HEAD:"head",MMSI:"mmsi"}).constant("MOBILE",{FRAME:"mobile",LATITUDE:"lat",LONGITUDE:"long",IMMERSION:"imm",ALTITUDE:"alt"}).constant("ATTITUDE",{FRAME:"shipattitude",HEADING:"heading",ROLL:"roll",PITCH:"pitch",HEAVE:"heave"}).constant("FLOW",{FRAME:"flow",DATA:"flow"}).constant("FERRYBOX_SCIENCE",{QUALITY:"quality",SBE45_SEA_TEMP:"SBE45_SeaTemp",SBE45_COND:"SBE45_Cond",SBE45_SAL:"SBE45_Sal",SBE45_SOUND_VEL:"SBE45_SoundVel",OPTODE_OXYGEN:"optode_oxygen",OPTODE_SATURATION:"optode_saturation",SEA_POINT_TURB:"seapoint_turb",AOA_GREEN_ALGAE:"AOA_GreenAlgae",AOA_BLUE_ALGAE:"AOA_BlueAlgae",AOA_DIATOMS:"AOA_Diatoms",AOA_CRYPTOPHYTA:"AOA_Cryptophyta",AOA_YELLOW_SUB:"AOA_YellowSub",AOA_TOTAL_ALGAE:"AOA_TotalAlgae"}).constant("FERRYBOX_TECHNIC",{DATE:"date",TIME:"time",OPTODE_SEA_TEMP:"optode_seatemp",AOA_SEA_TEMP:"AOA_SeaTemp",FB_PH_SEA_TEMP:"FB_ph_seatemp",FB_AIR_TEMP:"FB_AirTemp",PRESSURE:"pressure",FLOW_IN:"flow_in",FLOW_MAIN:"flow_main",FLOW_PCO2:"flow_PCO2",FLOW_BYPASS_2:"flow_Bypass_2",FLOW_AOA:"flow_AOA",HALFFULL:"halffull",FULL:"full",FB_PH_VALUE:"FB_ph_value"}).constant("FUNES_WINCH",{STARBOARD_LENGTH:"starboardunwound",STARBOARD_SPEED:"starboardspinning",STARBOARD_TENSION:"starboardtension",PORT_LENGTH:"portunwound",PORT_SPEED:"portspinning",PORT_TENSION:"porttension"}).constant("GPS",{FRAME_POSITION:"position",LATITUDE:"lat",LONGITUDE:"long",GROUND_SPEED:"gndspeed",GROUND_COURSE:"gndcourse",HEADING:"heading",FRAME_SAT_INFO:"satelliteinfo",SATELLITE_NUMBER:"nbused",HDOP:"HDOP"}).constant("GYRO",{HEAD_FRAME:"shipnav",HEAD_ID:"heading"}).constant("MAGNETOMETER",{MAG:"mag",DEPTH:"depth"}).constant("HAUL",{FRAME:"blcar",HAUL_ID:"curstation",SPECIES_ID:"speciesid",SPECIES_SIGN:"mark",SPECIES_WEIGHT:"speciesweight",POCKET:"curpocket",TOTAL_POCKET_WEIGHT:"pocketweight",TOTAL_SORTED_SPECIES_WEIGHT:"sortedspeciesweight",BOX_ID:"curbox",BOX_WEIGHT:"boxweight",BOX_DESTINATION:"boxdir"}).constant("HULLSOUNDSPEED",{FRAME:"hullsoundspeed",DATA:"sndspeed"}).constant("NAVIGATION",{DEVICE_ID:"PP_SHIPNAV",FRAME_SHIPNAV:"shipnav",LATITUDE:"lat",LONGITUDE:"long",HEADING:"heading",SOUNDER:"depth",GROUND_SPEED:"gndspeed",GROUND_COURSE:"gndcourse",SURFACE_SPEED:"surfspeed",SURFACE_COURSE:"surfcourse",DRIFT_SPEED:"driftspeed",DRIFT_COURSE:"driftcourse",FRAME_ROUTING:"routing",PREV_DIST:"prevdist",PREV_COURSE:"prevcourse",CUR_DIST:"curdist",CUR_COURSE:"curcourse",ETA:"eta",LAPSE:"lapse",FRAME_WAYPOINTS:"waypoints",INDEX:"index",ID:"id"}).constant("GRAVIMETER",{ACC_X:"acX",ACC_Y:"acY",GRAVITY:"gravity",SCALE:"grav_scale",FILTER_ORDER:"filterord",FILTER_TAU:"filtertau",GPS_ON:"GPS_on",STATUS:"status"}).constant("KSS31",{ACC_X:"acX",ACC_Y:"acY",GRAVITY:"gravity",DATATION:"datation",SEASTATE:"seastate",EOETVOES:"eoetvoes",BOUGUER:"bouguer",FREEAIR:"freeair",MEASURETS:"measureTS"}).constant("WAYPOINTS_LIST",{FRAME:"waypoints",ID:"id",LATITUDE:"lat",LONGITUDE:"long"}).constant("WAYPOINTS",{FRAME:"waypoints",ID:"id",LATITUDE:"lat",LONGITUDE:"long"}).constant("THERMOMETER",{FRAME:"intake",TEMPERATURE:"intaketemp"}).constant("THERMOSAL",{FRAME:"hydrology",TANK_TEMP:"temp",TEMP:"intaketemp",SALINITY:"salinity",ANOMALY:"density",SOUND_SPEED:"sndspeed",CONDUCTIVITY:"conduct",FRAME_FLUOROMETRY:"fluo",FLUOROMETRY:"fluo",FRAME_FLOW:"flow",FLOW:"flow"}).constant("MULTIBEAM",{FRAME:"bathymetry",PN:"Pn",PF:"Pf",BEAM_NUMBER:"Nb",DEPTH:"De",ACROSS:"Ac",ALONG:"Al",FLAG:"mbSFlag"}).constant("TRAWL",{FRAME:"trawl",DEPTH:"depth",TEMP:"temp",ALTITUDE:"waterropealt",DOOR_DISTANCE:"distdoor",HORIZONTAL_SPREAD:"horspread",VERTICAL_SPREAD:"vertspread",CLEARANCE:"clearance"}).constant("TRAWLING",{FRAME:"trawling",COMMENT:"comment",LAT:"lat",LONG:"long",ALTITUDE:"waterropealt",HORIZONTAL_SPREAD:"horspread",PORTUNWOUND:"portunwound",VERTICAL_SPREAD:"vertspread",STARBOARDUNWOUND:"starboardunwound",ALTITUDE_SUM:"waterropealt_sum",HORIZONTAL_SPREAD_SUM:"horspread_sum",PORTUNWOUND_SUM:"portunwound_sum",VERTICAL_SPREAD_SUM:"vertspread_sum",STARBOARDUNWOUND_SUM:"starboardunwound_sum",ALTITUDE_NB:"waterropealt_nb",HORIZONTAL_SPREAD_NB:"horspread_nb",PORTUNWOUND_NB:"portunwound_nb",VERTICAL_SPREAD_NB:"vertspread_nb",STARBOARDUNWOUND_NB:"starboardunwound_nb",DISTANCE_STRAIGHT:"distance_straight",DISTANCE_REAL:"distance_real",RATIO:"ratio"}).constant("PROPULSION_TL",{DEVICE_ID:"TL_PROPULSION",FRAME:"tlpropulsion",FRONT_TRANS:"fronttrans",REAR_TRANS:"reartrans",MAIN:"main",RUDDER_ANGLE_FRAME:"helm",RUDDER_ANGLE:"angle"}).constant("PROPULSION_AT",{DEVICE_ID:"AT_PROPULSION",FRAME:"atpropulsion",FRONT_TRANS:"fronttrans",FRONT_TRANS_ANGLE:"frontpropangle",MAIN_LEFT:"mainleft",MAIN_RIGHT:"mainright",RUDDER_ANGLE_FRAME:"helm",RUDDER_ANGLE:"angle"}).constant("WEATHER",{FRAME:"weather",TRUE_AIR_SPEED:"trueairspeed",TRUE_AIR_HEADING:"trueairheading",REL_AIR_SPEED:"relairspeed",REL_AIR_HEADING:"relairheading",DATA_TO_DISPLAY:[{title:"views.weather.air-temp",id:"airtemp",format:"%.1f"},{title:"views.weather.water-temp",id:"watertemp",format:"%.1f"},{title:"views.weather.air-pressure",id:"airpressure",format:"%d"},{title:"views.weather.moisture",id:"moisture",format:"%d"},{title:"views.weather.heatflux",id:"heatflux",format:"%.1f"},{title:"views.weather.dew-point",id:"dewpoint",format:"%.1f"}]}).constant("WINCH",{FRAME:"winch",TENSION:"tension",LENGTH:"unwound",SPINNING:"spinning"}).constant("PP_ENGINE",{FRAME:"PpEngine",DA1_POWER:"DA1Power",DA2_POWER:"DA2Power",DA3_POWER:"DA3Power",DA4_POWER:"DA4Power",MAIN_STARBOARD:"mainstarboard",MAIN_PORT:"mainport"}).constant("PP_VDR",{FRAME:"khxdr",TRANS1_PROP:"trans1proppercent",TRANS2_PROP:"trans2proppercent",TRANS3_PROP:"trans3proppercent",TRANS4_PROP:"trans4proppercent",RUDDER_STARBOARD:"rudderstarboard",RUDDER_PORT:"rudderport"}).constant("PP_WINCH_ALARM",{FRAME:"info",TEXT:"text",LEVEL:"level",ENDDATE:"enddate",CODE:"code"}).constant("KLEY_STATE",{FRAME:"kley_state",HP:"hp",BP:"bp",TEMP:"temp",M1:"m1",M2:"m2",M3:"m3",M4:"m4",M5:"m5"}).constant("PEFPOS",{FRAME:"pefpos",LATITUDE:"lat",HEADING:"head",COG:"cog",SOG:"sog",DEPTH:"depth",LONGITUDE:"long",SPEED:"speed"}).constant("PEFMET",{FRAME:"pefmet",VELOCITY:"velocity",GUST:"gust",DIRECTION:"direction",AIRTEMP:"airtemp",HUMIDITY:"humidity",RADIATION:"radiation",PRESSURE:"pressure",WATERTEMP:"watertemp"}).constant("PEFTSS",{FRAME:"peftss",SALINITY:"salinity",WATERTEMP:"watertemp",FLUO:"fluo",CONDUCT:"conduct",SIGMAT:"sigmat"}).constant("PEFAUM",{FRAME:"pefaum",TURBIDITYL:"turbidityL",TURBIDITYH:"turbitidyH",OBSL:"obsL",OBSH:"obsH",SALINITY:"salinity",CHLOROPHYLL:"chlorophyll",BLUEALGAE:"bluealgae",CDOM:"cdom",PH:"ph",FLUORESCENCE:"fluorescence",PCO2:"pco2",PAR:"par"})}(),function(){"use strict";function e(e,t){var a;return a="http:"===window.location.protocol?e+"://"+window.location.host+t:e+"s://"+window.location.host+t,console.log("url : "+a),a}var t="[index.bootstrap.js] ";console.log(t+"start... get(/frontend/parameters)..."),$.get("/frontend/parameters",function(a){console.log(t+"Parameters received and put in constants..."),console.log(t+"View list lenght: "+a.viewList.length),angular.module("tsa.bootstrap",[]).constant("APP_PROPERTIES",a).constant("DATA_ACCESS",{NAVIGATION:a.dataAccessLists.navigation,WEATHER:a.dataAccessLists.weather,THERMOSAL:a.dataAccessLists.thermosal}).constant("SHIP_ID",a.shipId).constant("STOMP_URL",a.hasOwnProperty("brokerIP")?"ws://"+a.brokerIP:e("ws","/ws")).constant("MD_ADDONS_URL",a.hasOwnProperty("mdAddonsURL")?a.mdAddonsURL:"/md-addons").constant("JANUS_SERVER_URL",a.hasOwnProperty("janusServerUrl")?a.janusServerUrl:e("ws","/janus/ws")).constant("ENABLE_VIDEOCALL",!a.hasOwnProperty("enableVideoCall")||JSON.parse(a.enableVideoCall)).constant("GEOMOD_SERVER_ADDRESS",a.hasOwnProperty("geomodServerAddress")?a.geomodServerAddress:"/gis/geomod").constant("QGIS_URL",a.hasOwnProperty("qgisUrl")?a.qgisUrl:"/gis/qgis").constant("QGIS_MISSION_NAME",a.qgisMissionName).constant("DEFAULT_DASHBOARD",a.defaultDashboard).constant("DEFAULT_STATIC_GRID",a.defaultStaticGrid).constant("VIEW_LIST",a.viewList).constant("VIDEO_PARAMS",a.video).constant("SHOW_EXTRACTION",!a.hasOwnProperty("showExtraction")||JSON.parse(a.showExtraction)).constant("SHOW_STATICGRID",!a.hasOwnProperty("showStaticGrid")||JSON.parse(a.showStaticGrid)).constant("SHOW_TRACKING",!a.hasOwnProperty("showTracking")||JSON.parse(a.showTracking)).constant("ENABLE_CHAT",!a.hasOwnProperty("enableChat")||JSON.parse(a.enableChat)).constant("MAP_BACKGROUND",a.hasOwnProperty("mapBackground")?a.mapBackground:"GEOMOD").constant("ARCHIVES_REST_API",{DATA:a.hasOwnProperty("databaseIP")?"http://"+a.databaseIP+"/api/archives/table":"/api/archives/table",DEVICES:a.hasOwnProperty("databaseIP")?"http://"+a.databaseIP+"/api/archives/devices":"/api/archives/devices"}),angular.element(document).ready(function(){console.log(t+"Launch the application: angular.bootstrap(...)"),angular.bootstrap(document,["tsa"])})}).fail(function(e){console.error(t+"Error : frontend parameters loading failed!"),console.error(e),angular.module(["error"]).constant("ERROR",e),angular.bootstrap(document,["error"])})}(),function(){"use strict";angular.module("tsa").config(["$mdThemingProvider",function(e){e.definePalette("ifremerPalette",{50:"D50000",100:"D50000",200:"D50000",300:"2C97CB",400:"D50000",500:"1A75AE",600:"1A75AE",700:"D50000",800:"093564",900:"D50000",A100:"062240",A200:"1A75AE",A400:"1A75AE",A700:"1A75AE",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),e.theme("default").primaryPalette("ifremerPalette").accentPalette("ifremerPalette"),e.theme("day").primaryPalette("ifremerPalette").accentPalette("ifremerPalette"),e.theme("night").primaryPalette("ifremerPalette").accentPalette("ifremerPalette").dark(),e.alwaysWatchTheme(!0)}]).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"resources/locale-",suffix:".json"}),e.preferredLanguage("fr_FR"),e.fallbackLanguage("en_US")}]).config(["tmhDynamicLocaleProvider",function(e){e.localeLocationPattern("../locales/angular-locale_{{locale}}.js")}])}(),function(){"use strict";angular.module("tsa").constant("LOCALES",{locales:{en_US:{id:"en_US",name:"English",img:"resources/images/flag_en.svg"},fr_FR:{id:"fr_FR",name:"Français",img:"resources/images/flag_fr.svg"}},preferredLocale:"fr_FR"}).constant("AUTHORITIES",{ADMIN:"ROLE_ADMIN",MASTER:"ROLE_MASTER",SDIV:"ROLE_SDIV",USER:"ROLE_USER",VIDEOCALL:"ROLE_VIDEOCALL"}).constant("TOPICS",{LOG:"/topic/log.json",STATUS:"/topic/status.json",CONFIG:"/topic/configuration.json",DEVICES:"/topic/devices.json"}).constant("REST_API",{ARCHIVE_DATA:"/api/archives/table",ARCHIVE_DEVICES:"/api/archives/devices",CHANNEL:"/api/channels",CONFIGURATION:"/api/admin/configurations",DRIVER:"/api/drivers",DRIVER_PREVIEW:"/api/drivers/preview",DEVICE:"/api/devices",DESCRIPTION:"/api/descriptions",FRONT_END_PARAMETERS:"/frontend/parameters",LOGIN:"/login",LOGOUT:"/logout",MISSION:"/api/admin/mission",USER:"/api/user",USER_CONFIG:"/user/config/",CASINO:"/api/casino",QGIS:"/api/qgis/projects/project",CHAT:"/api/chatMessages"})}(),function(){"use strict";angular.module("tsa").controller("IndexController",["themeService",function(e){var t=this;t.theme=e.getTheme()}])}(),function(){"use strict";angular.module("error",[]).controller("IndexController",["ERROR",function(e){var t=this;t.isErrorModule=!0,t.error=e}])}(),function(){"use strict";function e(e,t){console.log("ROUTE PROVIDER"),e.state("acquisition",{url:"/acquisition",templateUrl:"app/pages/acquisition/acquisition.html",controller:"acquisitionController",controllerAs:"ctrl"}).state("dashboard",{url:"/dashboard",templateUrl:"app/pages/dashboard/dashboard.html",controller:"dashboardController",controllerAs:"ctrl"}).state("tracking",{url:"/tracking",templateUrl:"app/pages/tracking/tracking.html",controller:"trackingController",controllerAs:"ctrl"}).state("device",{url:"/acquisition/device?:id",templateUrl:"app/pages/acquisition/addDevice/editDevice.html",controller:"editDeviceController",controllerAs:"ctrl",params:{id:void 0}}).state("login",{url:"/login?:next&:authority",templateUrl:"app/pages/login/login.html",controller:"loginController",controllerAs:"ctrl",params:{next:void 0,authority:void 0,nextParams:void 0}}).state("dataAccess",{url:"/dataAccess",templateUrl:"app/pages/dataAccess/dataAccess.html",controller:"dataAccessController",controllerAs:"ctrl"}).state("static",{url:"/static",templateUrl:"app/pages/staticGrid/staticGrid.html",controller:"staticGridController",controllerAs:"ctrl"}).state("welcome",{url:"/welcome",templateUrl:"app/pages/welcome/welcome.html",controller:"welcomeController",controllerAs:"ctrl"}),t.otherwise("/welcome")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("tsa").config(e)}(),function(){"use strict";angular.module("tsa").run(["$log",function(e){function t(e,t){return function(){var a=[].slice.call(arguments);a.unshift("["+t+"] "),e.apply(null,a)}}e.getInstance=function(a){return{log:t(e.log,a),info:t(e.info,a),warn:t(e.warn,a),debug:t(e.debug,a),error:t(e.error,a)}}}])}(),function(){"use strict";function e(e,t){var a=this;a.setType=function(t){a.type=null,e(function(){a.type=t.view,a.config=t.config,a.titleValue=t.title,a.icon=t.icon},10)},a.showChangeViewDialog=function(){t.showSelectView().then(a.setType)}}e.$inject=["$timeout","dialogService"],angular.module("tsa.components.card",[]).component("tsaCard",{templateUrl:"app/components/card/card.html",controllerAs:"ctrl",controller:e,bindings:{type:"=",deviceId:"=",config:"=",cardId:"@",titleValue:"=",icon:"="}})}(),function(){"use strict";function e(){var e,t="[ConsoleController] ",a=this,i=[],n=[];a.consoleViews={LOGS:"logs",ALERTS:"alerts",FRAMES:"frames"},a.consoleView=a.consoleViews.LOGS,a.$onInit=function(){e=document.getElementById("acquisition-textarea"),a.container.addConsole(this)},a.addText=function(r,o){switch(console.log(t+"CONSOLE ADD TEXT:"+r),o){case a.consoleViews.LOGS:i.push(r);break;case a.consoleViews.ALERTS:i.push(r),n.push(r)}o&&a.consoleView!=o||(a.console+=r+"\n",a.console.length>5e4&&(a.console=a.console.substring(a.console.length/3)),void 0!==e&&(e.scrollTop=e.scrollHeight))},a.changeConsole=function(e){a.console="",a.consoleView=e;var t=[];switch(a.consoleView){case a.consoleViews.LOGS:t=i;break;case a.consoleViews.ALERTS:t=n}angular.forEach(t,function(e){a.addText(e)})}}angular.module("tsa.components.console").component("tsaConsole",{templateUrl:"app/components/console/console.html",controller:e,controllerAs:"ctrl",bindings:{container:"<"}})}(),function(){"use strict";function e(e,t,a,i){function n(){angular.isDefined(g.dataId)&&angular.isDefined(g.frameId)&&angular.isDefined(g.deviceId)?(g.device=e.registerForDevice(g.deviceId),s(),v=g.device.registerForData(g.frameId,g.dataId),v.promise.then({},{},function(e){m=e.timestamp,s(),o(e.value)})):s()}function r(){void 0!=g.device&&void 0!=v&&g.device.unregisterForData(v),g.device=void 0,g.title=g.subtitle="",g.subtitle="",g.value="",g.dataMissing=!1,p=void 0}function o(e){var t=d(),a=angular.isDefined(g.units)?g.units:angular.isDefined(t)?t.shortUnits:void 0,i=angular.isDefined(g.format)?g.format:angular.isDefined(t)?t.cFormat:void 0;"lat"!=g.dataId&&"long"!=g.dataId&&"time"!=g.dataId||(i=g.dataId),g.value=l(e,i,a,g.multiplier,g.abs,g.onOff),p=!(!angular.isDefined(t)||!angular.isDefined(t.missingValue))&&e==t.missingValue,!p&&g.redGreen&&(g.frontColor="",Math.abs(Math.round(e))>0&&(e>0?g.frontColor="green":g.frontColor="red")),g.alertValue&&e<g.alertValue?g.frontColor="alert":g.frontColor=""}function s(){var e=d();g.title=g.optTitle&&""!=g.optTitle?g.optTitle:angular.isDefined(e)?e.longName:g.dataId,angular.isDefined(g.deviceId)+angular.isDefined(g.frameId)?g.subtitle=g.deviceId+" - "+g.frameId:angular.isDefined(g.optSubtitle)&&(g.subtitle=g.optSubtitle)}function d(){if(!(angular.isUndefined(g.device)||angular.isUndefined(g.device.frameList)||angular.isUndefined(g.device.frameList[g.frameId])||angular.isUndefined(g.device.frameList[g.frameId][g.dataId])))return g.device.frameList[g.frameId][g.dataId]}function l(e,i,n,r,o,s){if(Array.isArray(e))return e.length+(e.length>0?" values":"value");if(angular.isDefined(r)&&(e*=r),angular.isDefined(o)&&(e=Math.abs(e)),angular.isDefined(s)&&s)e=e>0?"On":"Off";else{if(angular.isDefined(i))switch(i){case"excelDate":e=t.parseExcelDateDefaultToString(e,"UTC");break;case"excelDateNoSec":e=t.parseExcelDateNoSecToString(e,"UTC");break;case"excelDateNoSecTZ":e=t.parseExcelDateNoSecToString(e,a.getLocalTimeZoneOffset());break;case"lat":e=t.parseLatToString(e);break;case"long":e=t.parseLongToString(e);break;case"qualityFbx":e=t.parseQualityFbxToString(e);break;case"marineDistance":n=Math.abs(e)<1852?"m":"nm",e=t.parseMarineDistance(e),e=sprintf("%.1f",e);break;case"time":e=t.parseTimeToString(e);break;default:e=sprintf(i,e)}angular.isDefined(n)&&(e+=" "+n)}return e}function c(){var e=a.getServerTime().time;g.dataMissing=angular.isDefined(g.device)&&(angular.isUndefined(m)||e-m>5*g.device.periodList[g.frameId]&&void 0==g.optValue||p)}var u,m,v,p,g=this;g.title="",g.subtitle="",g.value="-",g.dataMissing=!1,g.frontColor="",g.$onInit=function(){u=i(c,500)},g.$onChanges=function(e){(e.dataId||e.frameId||e.deviceId)&&(r(),n()),e.optValue&&(angular.isDefined(e.optValue.currentValue)?o(g.optValue):g.value=""),e.optTitle&&angular.isDefined(e.optTitle.currentValue)&&(g.title=g.optTitle),e.optSubtitle&&angular.isDefined(e.optSubtitle.currentValue)&&(g.subtitle=g.optSubtitle)},g.$onDestroy=function(){r(),i.cancel(u)}}e.$inject=["acquisitionService","formatterService","statusService","$interval"],angular.module("tsa.components.dataView",[]).component("tsaDataView",{templateUrl:"app/components/dataView/dataView.html",controller:e,controllerAs:"ctrl",bindings:{dataId:"<data",frameId:"<",deviceId:"<",optTitle:"@",optSubtitle:"<",optValue:"<",onUpdateTitle:"&",titleDisabled:"<",showSubtitle:"<",abs:"<",onOff:"<",multiplier:"<",redGreen:"<",alertValue:"<",format:"@",units:"@"}})}(),function(){"use strict";function e(){}angular.module("tsa.components.doubleDataView",[]).component("tsaDoubleDataView",{templateUrl:"app/components/doubleDataView/doubleDataView.html",controller:e,controllerAs:"ctrl",bindings:{title:"@",dataId1:"<data1",frameId1:"<",deviceId1:"<",dataId2:"<data2",frameId2:"<",deviceId2:"<",format1:"@",format2:"@",optValue1:"<",optValue2:"<"}})}(),function(){"use strict";function e(e,a,i,n,r,o,s,d,l,c,u,m,v,p,g,f,h,b,w){i.$on("$translateChangeSuccess",function(e,t){y.currentLocaleImg=l.getCurrentLocale().img}),h&&g(p.getLastMessage,1e4),b&&w.init();var y=this;y._mdPanel=f,y.ENABLE_CHAT=h,y.locales=l.getLocaleList(),y.$onInit=function(){y.serverTime=c.getServerTime(),y.statusService=c,y.theme=m.getTheme(),y.currentLocaleImg=l.getCurrentLocale().img,y.currentUserProvider=u.getCurrentUserProvider(),y.connected=v.isConnected()&&c.isConnected()},y.openSidenav=function(){r("left").toggle()},y.changeDayMode=function(){y.theme.id===m.THEME.DAY.id?m.setTheme(m.THEME.NIGHT):m.setTheme(m.THEME.DAY),angular.isDefined(u.getCurrentUser())&&u.getCurrentUser().saveTheme(y.theme)},y.changeLocale=function(e){l.setCurrentLocale(e),angular.isDefined(u.getCurrentUser())&&u.getCurrentUser().saveLanguage(e.id)},y.isWelcomePage=function(){return"/welcome"===e.path()},y.goToHelpPage=function(){a.open("/online-help-"+n.use()+".html","_blank")},y.openMessagingWindow=function(){if(angular.isDefined(u.getCurrentUser())){var e=u.getCurrentUser();e.hasAuthority(s.ADMIN)===!0?d.showMessaging():d.showMessagingAccess()}else d.showMessagingAccess()},y.isSDIVUserAndStaticView=function(){return!(!angular.isDefined(u.getCurrentUser())||"/static"!==e.path())&&u.getCurrentUser().hasAuthority(s.SDIV)},y.showTimes=function(e){var a=this._mdPanel.newPanelPosition().relativeTo(".show-time-button").addPanelPosition(this._mdPanel.xPosition.ALIGN_START,this._mdPanel.yPosition.BELOW),i=[{name:"Métropole",tz:"Europe/Paris"},{name:"Noumea",tz:"Pacific/Noumea"},{name:"La Réunion",tz:"Indian/Reunion"},{name:"Tahiti",tz:"Pacific/Tahiti"},{name:"Martinique",tz:"America/Martinique"},{name:"Saint Pierre et Miquelon",tz:"America/Miquelon"},{name:"Guyanne",tz:"America/Guyana"}],n={attachTo:angular.element(document.body),controller:t,controllerAs:"ctrl",template:'<div class="navbar-time-popup tzp"      role="listbox">  <div class="" ng-if="ctrl.statusService.getLocalTimeZoneOffset()"        role="option">    {{ ctrl.serverTime.time | date: "HH:mm" : ctrl.statusService.getLocalTimeZoneOffset() }} - Local  </div>   <div class=""        role="option"        ng-repeat="time in ctrl.times">     {{ ctrl.changeTimezone(ctrl.serverTime.time, time.tz) | date: "HH:mm" }} - {{ time.name }}  </div></div>',
panelClass:"navbar-time-popup",position:a,locals:{times:i,serverTime:this.serverTime,statusService:this.statusService,changeTimezone:this.changeTimezone},openFrom:e,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!1,zIndex:2};this._mdPanel.open(n)}}function t(e,t){this._mdPanelRef=e,this.serverTime=t.getServerTime(),this.statusService=t,this.changeTimezone=function(e,t){var a=new Date;a.setTime(e);var i=new Date(a.toLocaleString("en-US",{timeZone:t})),n=e-i.getTime();return e-n}}e.$inject=["$location","$window","$rootScope","$translate","$mdSidenav","$scope","AUTHORITIES","dialogService","localeService","statusService","userService","themeService","stompService","messagingService","$interval","$mdPanel","ENABLE_CHAT","ENABLE_VIDEOCALL","videoCallService"],t.$inject=["mdPanelRef","statusService"],angular.module("tsa.components.navbar",[]).component("tsaNavbar",{templateUrl:"app/components/navbar/navbar.html",controller:e,controllerAs:"navbar"}).controller("TimePopupPanelCtrl",t),t.prototype.closeDialog=function(){var e=this._mdPanelRef;e&&e.close().then(function(){angular.element(document.querySelector(".show-time-button")).focus(),e.destroy()})}}(),function(){"use strict";function e(e,t,a,i,n){var r=this;r.showChangeViewDialog=function(){a.showSelectView().then(function(e){"Video Call"===e.view&&t.findVideoCall()?a.showToast(n("translate")("views.video-call.duplicate.message")):(console.debug("[SettingsButton] --> vm.onChangeView: type = "+e.view+" ; deviceId = "+e.deviceId),r.onChangeView({type:e}))})},r.deleteClick=function(){void 0!==r.cardId&&(void 0!==r.validCloseTitle&&""!==r.validCloseTitle?a.showValidation(r.validCloseTitle,r.validCloseMsg).then(function(){e.removeItem(r.cardId)},function(){}):e.removeItem(r.cardId))},r.isStaticPage=function(){return"/static"==i.path()}}e.$inject=["dashboardService","staticGridService","dialogService","$location","$filter"],angular.module("tsa.components.settingsButton",[]).component("tsaSettingsButton",{templateUrl:"app/components/settingsButton/settingsButton.html",controller:e,controllerAs:"ctrl",bindings:{cardId:"@",onChangeView:"&",validCloseTitle:"@",validCloseMsg:"@"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d,l){function c(){switch(angular.forEach(v.routeList,function(e){e.isSelected=!1}),t.path()){case"/static":v.routeList[v.staticgrid_index].isSelected=!0;break;case"/dashboard":v.routeList[v.dashboard_index].isSelected=!0;break;case"/tracking":v.routeList[v.tracking_index].isSelected=!0;break;case"/acquisition":v.routeList[v.acquisition_index].isSelected=!0;break;case"/dataAccess":v.routeList[v.dataaccess_index].isSelected=!0}}function u(){void 0!=o.getCurrentUser()&&(v.connectionInProgress=!1,v.isConnected=!0,v.currentUser=o.getCurrentUser())}var m="[sidenavController] ",v=this;v.connectionInProgress=!1,v.isConnected=!1,v.routeList=[];var p=0;d&&(v.routeList.push({title:"static-grid.title",sref:"static",icon:"border_all",isSelected:!0}),v.staticgrid_index=p++),v.routeList.push({title:"dashboard.title",sref:"dashboard",icon:"dashboard",isSelected:!1}),v.dashboard_index=p++,l&&(v.routeList.push({title:"tracking.title",sref:"tracking",icon:"developer_board",isSelected:!1}),v.tracking_index=p++),v.routeList.push({title:"acquisition.title",sref:"acquisition",icon:"settings_input_component",isSelected:!1}),v.acquisition_index=p++,s&&(v.routeList.push({title:"data-access.title",sref:"dataAccess",icon:"file_download",isSelected:!1}),v.dataaccess_index=p++),n.$on("$locationChangeSuccess",function(){c()}),i.$on("current-user-changed",function(){u()}),v.$onInit=function(){c(),u()},v.connection=function(){void 0!==v.login&&(v.connectionInProgress=!0,o.login(v.login,v.password).then(function(){console.debug(m+"successful connection"),v.connectionInProgress=!1,v.isConnected=!0,v.currentUser=o.getCurrentUser()},function(t){console.error(m+e("translate")("components.sidenav.connection-error")+": "+t.status+": "+t.statusText),r.showDialog(e("translate")("components.sidenav.connection-error")),v.connectionInProgress=!1}))},v.disconnection=function(){o.logout(),v.isConnected=!1,v.login="",v.password="",v.currentUser=void 0},v.closeSidenav=function(){a("left").close()},v.onKeyPressed=function(e){13===e.which&&v.connection()}}e.$inject=["$filter","$location","$mdSidenav","$rootScope","$scope","dialogService","userService","SHOW_EXTRACTION","SHOW_STATICGRID","SHOW_TRACKING"],angular.module("tsa.components.sidenav",[]).component("tsaSidenav",{templateUrl:"app/components/sidenav/sidenav.html",controller:e,controllerAs:"ctrl"})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d,l){function c(e){this.device=e,this.files=void 0,this.framesNumber={},this.frameNumber=void 0,this.lastTimeStamp=0,this.isSelected=!1,this.isReceivingJSON=!1,this.status=S.STATUS.UNDEFINED}if(l.checkAuthority(t.USER)){var u,m,v,p,g,f,h,b="[acquisitionController] ",w=void 0,y=[],I=[],S=this;S.itemList=[],S.console="",S.serverTime="",S.availableSpace="",S.consoleViews={LOGS:"logs",ALERTS:"alerts",FRAMES:"frames"},S.consoleView=S.consoleViews.LOGS,S.orderDevice="device.name",S.STATUS={OK:{text:"Ok",color:"#8BC34A",show:!0},NO_DATA:{text:"Data missing",color:"#1a75ad",show:!0},TIME_OUT:{text:"Time out",color:"#F44336",show:!0},OUT_OF_RANGE:{text:"Out of range",color:"#ff702e",show:!0},UNDEFINED:{text:"Undefined",color:"grey",show:!0}},S.displayMode="list";var C=function(e){var t=[];angular.forEach(S.itemList,function(a){var i=!1;angular.forEach(e,function(e){e.id===a.device.id&&e.isEnabled&&(i=!0)}),i||t.push(a)}),angular.forEach(t,function(e){e.device.unsubscribeToJSONData(e.JSONDataListener),S.itemList.splice(S.itemList.indexOf(e),1)}),angular.forEach(e,function(e){var t=!1;angular.forEach(S.itemList,function(a){e.id===a.device.id&&(t=!0)}),!t&&e.isEnabled&&S.itemList.push(new c(e))})},T=function(e){return e<1024?e+" o":e<1048576?(e/1024).toFixed(2)+" Ko":e<1073741824?(e/1048576).toFixed(2)+" Mo":e<1099511627776?(e/1073741824).toFixed(2)+" Go":e<0x4000000000000?(e/1099511627776).toFixed(2)+" To":void 0};S.parseStatusMessage=function(e){var t=JSON.parse(e.data.body);"undefined"!==t&&(S.availableSpace="Available space: "+T(t.usableSpace)+"/"+T(t.totalSpace),angular.forEach(t.devFileStats,function(e,t){angular.forEach(S.itemList,function(a){a.device.id===t&&(a.files=e,angular.forEach(a.files,function(e){e.filesizeFormated=T(e.filesize)}))})}))},S.parseLogMessage=function(e){var t=JSON.parse(e.data.body).message,a=t.replace(/^[^\s]+\s+(\w+)\s.*$/,"$1");"ALERT"===a?S.addConsoleMsg(t,a):S.addConsoleMsg(t,S.consoleViews.LOGS)},S.setItemStatus=function(e){return"OK"==e.toUpperCase()?S.STATUS.OK:"NO_DATA"==e.toUpperCase()?S.STATUS.NO_DATA:"TIME_OUT"==e.toUpperCase()?S.STATUS.TIME_OUT:"OUT_OF_RANGE"==e.toUpperCase()?S.STATUS.OUT_OF_RANGE:void 0},S.parseDevicesMessage=function(e){var t=JSON.parse(e.data.body);angular.forEach(S.itemList,function(e){angular.forEach(t,function(t){e.device.id===t.deviceId&&(e.frameNumber=t.sequenceNumber,e.lastTimeStamp=t.lastTimeStamp,e.status=S.setItemStatus(t.status))})})},S.addConsoleMsg=function(e,t){switch(t){case S.consoleViews.LOGS:y.push(e);break;case S.consoleViews.ALERTS:y.push(e),I.push(e)}t&&S.consoleView!=t||(S.console+=e+"\n",S.console.length>5e4&&(S.console=S.console.substring(S.console.length/3)),void 0!==w&&(w.scrollTop=w.scrollHeight))},S.init=function(){console.debug(b+" init() called"),S.serverTime=o.getServerTime(),v=s.registerForTopic(d.LOG),v.promise.then({},{},S.parseLogMessage),p=s.registerForTopic(d.STATUS),p.promise.then({},{},function(e){S.parseStatusMessage(e)}),g=s.registerForTopic(d.DEVICES),g.promise.then({},{},function(e){S.parseDevicesMessage(e)}),C(e.getDeviceList()),u=e.registerForDeviceList(),u.promise.then({},{},C),w=document.getElementById("acquisition-textarea")},r.$on("$destroy",function(){console.debug(b+"$onDestroy"),angular.forEach(S.itemList,function(e){e.device.unsubscribeToJSONData(e.JSONDataListener)}),s.unregisterForTopic(d.LOG,v),s.unregisterForTopic(d.STATUS,p),e.unregisterForDeviceList(u),s.unregisterForTopic(d.DEVICES,p),void 0!==f&&i.cancel(f),void 0!==h&&void 0!==m&&h.device.unsubscribeToJSONData(m)}),S.selectItem=function(e){return void 0!==h&&void 0!==m&&(h.device.unsubscribeToJSONData(m),h.isSelected=!1),h===e?void(h=void 0):(h=e,h.isSelected=!0,m=h.device.subscribeToJSONData(),S.consoleView===S.consoleViews.FRAMES&&(S.console=""),void m.promise.then({},{},function(e){S.addConsoleMsg(e.data.body,S.consoleViews.FRAMES)}))},S.removeItem=function(e){a.showValidation("Delete device","Are you sure you want to remove "+e.device.name+"?").then(function(){n.deleteDevice(e.device.id).then(function(){console.debug(b+" item"+e.device.id+" has been removed")})})},S.changeConsole=function(e){S.console="",S.consoleView=e;var t=[];switch(S.consoleView){case S.consoleViews.LOGS:t=y;break;case S.consoleViews.ALERTS:t=I}angular.forEach(t,function(e){S.addConsoleMsg(e)})}}}e.$inject=["acquisitionService","AUTHORITIES","dialogService","$interval","restService","$scope","statusService","stompService","TOPICS","userService"],angular.module("tsa.pages.acquisition").controller("acquisitionController",e)}(),function(){"use strict";function e(e,t,a,i,n){var r=this;r.currentDashboard=a.getCurrentDashboard(),r.dashboardService=a,r.userService=i,r.showDashboardSelection=!1,r.dashboardListPerso=a.getDashboardListPerso(),r.selectedDashboard=a.getCurrentDashboard(),r.gridsterOpts={columns:12,draggable:{enabled:!0,handle:".tsa-toolbar,.tsa-toolbar *,.tsa-debug *"},isMobile:!0,rowHeight:50},r.deleteEnabled=function(){return angular.isDefined(i.getCurrentUser())&&angular.isDefined(r.dashboardListPerso[r.currentDashboard.title])},r.showSaveDialog=function(){function t(t){var r=i.getCurrentUser();return void 0==r?void n.showDialog(e("translate")("pages.dashboard.connection-needed-title"),e("translate")("pages.dashboard.connection-needed-msg")):void r.saveDashboard(t,a.getCurrentDashboard().itemList).then(function(){n.showToast(e("translate")("pages.dashboard.dashboard-saved")+": "+t)},function(){n.showDialog(e("translate")("pages.dashboard.dashboard-saving-fail"))})}var o="pages.dashboard.new-dashboard"!=r.selectedDashboard.title?r.selectedDashboard.title:"";n.showSaveDashboard(o).then(function(a){void 0!==r.dashboardListPerso[a]?n.showValidation(e("translate")("pages.dashboard.save-dashboard-title"),a+": "+e("translate")("pages.dashboard.dashboard-exists")).then(function(){t(a)}):t(a)})},r.showDeleteDialog=function(){n.showValidation(e("translate")("pages.dashboard.remove-dashboard-title"),e("translate")("pages.dashboard.remove-dashboard-msg"),e("translate")("pages.dashboard.delete")).then(function(){i.getCurrentUser().removeDashboard(a.getCurrentDashboard().title).then(function(){n.showToast(e("translate")("pages.dashboard.dashboard-removed"))},function(t){n.showDialog(e("translate")("pages.dashboard.dashboard-removed-fail")+": "+t)})})}}e.$inject=["$filter","$rootScope","dashboardService","userService","dialogService"],angular.module("tsa.pages.dashboard").controller("dashboardController",e)}(),function(){"use strict";angular.module("tsa.pages.dashboard").factory("dashboardService",["dialogService","DEFAULT_DASHBOARD","$filter",function(e,t,a){function i(e,t,a,i){this.id=n(),this.sizeX=e,this.sizeY=t,this.row=r(),this.col=0,this.type=a,this.config=i}function n(){for(var e=0,t=!1;!t;)e++,t=!0,angular.forEach(l.itemList,function(a){a.id==e&&(t=!1)});return e}function r(){var e=1;return angular.forEach(l.itemList,function(t){t.row+t.sizeY+1>e&&(e=t.row+t.sizeY+1)}),e}function o(e,t){angular.forEach(e,function(t,a){delete e[a]}),angular.forEach(t,function(t,a){e[a]=t})}var s=angular.isDefined(t)?t:[],d={Default:s},l={title:"Default",itemList:t};return{getCurrentDashboard:function(){return l},setCurrentDashboard:function(e,t){l.title=e,l.itemList=t},getDashboardListPerso:function(){return d},setPersoDashboardList:function(e){o(d,e)},switchToNewDashboard:function(){l.title="pages.dashboard.new-dashboard",l.itemList=[]},showAddItem:function(){var t=this;e.showSelectView().then(function(n){"Video Call"===n.view&&t.findVideoCall()?e.showToast(a("translate")("views.video-call.duplicate.message")):l.itemList.push(new i(6,8,n.view,n.config))})},findVideoCall:function(){var e=l.itemList.find(function(e){return"Video Call"===e.type});return e},addVideoCallIfNeeded:function(){this.findVideoCall()||l.itemList.push(new i(6,8,"Video Call",{}))},removeItem:function(e){angular.forEach(l.itemList,function(t,a){t.id==e&&l.itemList.splice(a,1)})}}}])}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d,l){if(o.checkAuthority(s.MASTER)){var c=this;c.logger=t.getInstance("data-access-page"),c.currentMode="simple",c.sendRequest=function(t){function a(){switch(t){case"json":c.researchInProgress=!0;break;case"csv":c.csvInProgress=!0;break;case"netcdf":c.netcdfInProgress=!0}n.getData(t,s,i.start,i.end,o.maxValues,o.timeStampingStrategy,o.intervalOrRef,o.intervalStampFraction).then(function(a){switch(t){case"json":c.researchInProgress=!1,r.showToast(a.data.length+" "+e("translate")("pages.data-access.frames-received")),c.results=a.data;break;case"csv":c.csvInProgress=!1;var i=new d([a.data],{type:"text/csv"});l.saveAs(i,"table.csv");break;case"netcdf":c.netcdfInProgress=!1;var i=new d([a.data],{type:"application/octet-stream"});l.saveAs(i,"table.nc")}},function(a){switch(t){case"json":c.researchInProgress=!1;break;case"csv":c.csvInProgress=!1;break;case"netcdf":c.netcdfInProgress=!1}r.showDialog(e("translate")("pages.data-access.error"),e("translate")("pages.data-access.error-request-msg")),c.logger.error(angular.isDefined(a.data)?a.data:angular.isDefined(a.message)?a.message:"no message found")})}if(!(c.researchInProgress||c.csvInProgress||c.netcdfInProgress)){var i=c.getDateRange(),o=c.getParams(),s=c.getVariableList();if(!(s.length<1)){var u=(i.end-i.start)/(1e3*o.intervalOrRef);c.logger.debug("Number of data requested: "+u),u>o.maxValues?r.showValidation(e("translate")("pages.data-access.warning"),e("translate")("pages.data-access.warning-msg"),e("translate")("pages.data-access.continue"),e("translate")("pages.data-access.cancel")).then(a):a()}}}}}e.$inject=["$filter","$log","$http","$window","archiveService","dialogService","userService","AUTHORITIES","Blob","FileSaver"],angular.module("tsa.pages.dataAccess").controller("dataAccessController",e)}(),function(){"use strict";function e(e,t,a,i,n,r,o,s){function d(){void 0!=r.next&&n.go(r.next,r.nextParams)}var l=this;l.logger=t.getInstance("loggin-page"),l.connectionInProgress=!1,l.logger.log('Authentication, with authority type "'+r.authority+'", is required to access the '+r.next+" page."),void 0!=o.getCurrentUser()&&o.getCurrentUser().hasAuthority(r.authority)&&d();var c=a.$on("current-user-changed",function(){void 0!=o.getCurrentUser()&&d()});l.connection=function(){void 0!==l.login&&(l.connectionInProgress=!0,o.login(l.login,l.password).then(function(){l.connectionInProgress=!1,d()},function(t){l.connectionInProgress=!1,s.showDialog(e("translate")("components.sidenav.connection-error")),l.logger.error("Authentication error: "+t.status+": "+t.statusText)}))},l.onKeyPressed=function(e){13===e.which&&l.connection()},i.$on("$destroy",function(){c()})}e.$inject=["$filter","$log","$rootScope","$scope","$state","$stateParams","userService","dialogService"],angular.module("tsa.pages.login").controller("loginController",e)}(),function(){"use strict";function e(e,t,a,i,n){var r=this,o=t.getInstance("staticGridController");r.flex=100,r.cards=i.getCards(),r.userService=n,r.currentNavItemId=i.getSelectedCardId(),r.service=i,r.showRow=function(e){return!i.isSingleMode()||(r.cards[e][0].id===i.getSelectedCardId()||r.cards[e][1].id===i.getSelectedCardId()||r.cards[e][2].id===i.getSelectedCardId())},r.showCard=function(e){switch(r.currentNavItemId=i.getSelectedCardId(),i.getViewMode()){case i.MODES.SINGLE:return r.flex=100,e.id===i.getSelectedCardId();case i.MODES.MULTIPLE_4:return r.flex=50,e.id!=r.cards[0][2].id&&e.id!=r.cards[1][2].id;case i.MODES.MULTIPLE_6:return r.flex=33,!0}},r.selectCard=function(e,t){i.setSelectedCardId(r.cards[e][t].id)},a.$watch(function(){return{cards:i.getCards(),mode:i.getViewMode(),selectedCard:i.getSelectedCardId()}},function(){angular.isDefined(n.getCurrentUser())&&n.getCurrentUser().saveStaticGrid().then(function(){o.info("Static grid configuration saved")},function e(e){o.error("Error: "+e)})},!0),a.$watch(function(){return r.cards},function(){r.currentNavItemId={}},!0)}e.$inject=["$filter","$log","$scope","staticGridService","userService"],angular.module("tsa.pages.staticGrid",[]).controller("staticGridController",e)}(),function(){"use strict";angular.module("tsa.pages.staticGrid").factory("staticGridService",["DEFAULT_STATIC_GRID",function(e){var t={SINGLE:"single",MULTIPLE_4:"multiple-4",MULTIPLE_6:"multiple-6"},a=t.MULTIPLE_4,i=angular.isDefined(e)?e:[[{id:"Card1",type:"Graphics"},{id:"Card2",type:"Numerical"},{id:"Card5",type:"Devices"}],[{id:"Card3",type:"Empty"},{id:"Card4",type:"Empty"},{id:"Card6",type:"Empty"}]],n=i[0][0].id;return{MODES:t,findVideoCall:function(){var e=i[0].find(function(e){return"Video Call"===e.type});return e=e||i[1].find(function(e){return"Video Call"===e.type})},addVideoCallIfNeeded:function(){this.findVideoCall()||(i[0][0].type="Video Call")},changeViewMode:function(){switch(a){case t.SINGLE:a=t.MULTIPLE_4;break;case t.MULTIPLE_4:a=t.MULTIPLE_6;break;case t.MULTIPLE_6:a=t.SINGLE}},getViewMode:function(){return a},setViewMode:function(e){a=e},isSingleMode:function(){return a===t.SINGLE},getCards:function(){return i},setCards:function(e){i[0]=e[0],i[1]=e[1]},getSelectedCardId:function(){return n},setSelectedCardId:function(e){n=e}}}])}(),function(){"use strict";function e(e,t,a,i){var n=this;n.userService=a,n.cardId="1",n.config={type:"Map",frameId:"shipnav",deviceId:"TL_SHIPNAV",weatherId:"TL_WEATHER",ship:{length:107.6,beam:20,xOffset:10,yOffset:50,lengthVector:15}}}e.$inject=["$filter","$rootScope","userService","dialogService"],angular.module("tsa.pages.tracking").controller("trackingController",e)}(),function(){"use strict";function e(e,t){var a=this;a.ship=e,a.showExtraction=t}e.$inject=["SHIP_ID","SHOW_EXTRACTION"],angular.module("tsa.pages.welcome",[]).controller("welcomeController",e)}(),function(){"use strict";function e(e,t,a){var i=function(){return a.getQGISCapabilities().then(function(e){return e.data})},n=function(e){return a.updateQGISProject(e).then(function(e){console.log(e)})};return{getCapabilities:i,pushQGISProject:n}}e.$inject=["$q","$log","restService"],angular.module("tsa.services").factory("qgisService",e)}(),function(){"use strict";function e(e,t,a,i,n,r,o){function s(e){return void 0===u[e]&&(u[e]=new o(e),l()),u[e]}function d(e){c.debug("configuration message received"),v=(new Date).getTime();var t=JSON.parse(e.data.body);angular.isDefined(t)&&null!=t&&(angular.forEach(t,function(e){var t=s(e.deviceId);t.name=e.name,angular.forEach(e.frames,function(e){void 0==t.frameList[e.name]&&(t.frameList[e.name]={},n.getDescription(e.name).then(function(e){t.periodList[e.name]=1e3*e.period,angular.forEach(e.data,function(a){t.frameList[e.name][a.name]=a})}))}),t.isInConfigMsg=!0}),angular.forEach(u,function(e){e.setEnable(e.isInConfigMsg),!e.isInConfigMsg&&e.listenerCount<1?delete u[e.id]:delete e.isInConfigMsg}),l())}function l(){angular.forEach(m,function(e){e.notify(u)})}var c=a.getInstance("acquisitionService"),u={},m=[],v=void 0;return function(){c.debug("init..."),t(function(){angular.isDefined(v)&&(new Date).getTime()-v>6e4&&angular.forEach(u,function(e){e.setEnable(!1)})},1e3),i.start(),i.registerForTopic(r.CONFIG).promise.then({},{},d)}(),{getDeviceList:function(){return u},getEnabledDeviceList:function(){var e={};return angular.forEach(u,function(t,a){t.isEnabled&&(e[a]=t)}),e},registerForDeviceList:function(){var t=e.defer();return m.push(t),t},unregisterForDeviceList:function(e){angular.forEach(m,function(t){Object.is(t,e)&&(e.resolve(),m.splice(m.indexOf(t),1))})},registerForDevice:function(e){var t=s(e);return t.listenerCount++,t},unregisterForDevice:function(e){angular.isDefined(u[e])&&u[e].listeners--}}}e.$inject=["$q","$interval","$log","stompService","restService","TOPICS","Device"],angular.module("tsa.services").factory("acquisitionService",e)}(),function(){"use strict";angular.module("tsa.services").factory("acquisitionBufferService",["$log","$q","archiveService","statusService",function(e,t,a,i){function n(e,t){this.timestamp=e,this.value=Array.isArray(t)?t.length:parseFloat(t)}function r(e,t,a,i,n){this.scale=1e3*e,this.maxSamples=t,this.bufferPeriod=this.scale/t,this.device=a,this.frameId=i,this.dataId=n,this.frames=[],this.lastFrame=void 0}function o(e,t,a){var i=this;this.device=e,this.frameId=t,this.dataId=a,this.deferred=e.registerForData(this.frameId,this.dataId),this.listenerCount=0,this.buffers={bufferOneMinute:new r(60,d,e,t,a),bufferFiveMinutes:new r(300,d,e,t,a),bufferThirtyMinutes:new r(1800,d,e,t,a),bufferOneHour:new r(3600,d,e,t,a),bufferThreeHours:new r(10800,d,e,t,a),bufferSixHours:new r(21600,d,e,t,a),bufferTwelveHours:new r(43200,d,e,t,a),bufferOneDay:new r(86400,d,e,t,a)},this.deferred.promise.then({},{},function(e){angular.forEach(i.buffers,function(t){t.addFrame(e.timestamp,e.value,!0)})})}var s=e.getInstance("acquisitionBufferService"),d=1200,l={};return r.prototype.addFrame=function(e,t,a){var i=this,r=new n(e,t),o=i.frames[i.frames.length-1];if(void 0===o)i.frames.push(r);else if(angular.forEach(i.frames,function(e,t){r.timestamp-e.timestamp>1.5*i.scale&&i.frames.splice(t,1)},i),r.timestamp-o.timestamp>=i.bufferPeriod)for(a&&r.timestamp-i.lastFrame.timestamp>5*i.device.period&&i.frames.push(new n(e,null)),i.frames.push(r);i.frames.length>i.maxSamples;)i.frames=i.frames.slice(1);i.lastFrame=r},r.prototype.loadArchivedFrames=function(){var e=this,n=i.getServerTime().time-e.scale,r=angular.isDefined(e.frames[0])?e.frames[0].timestamp:i.getServerTime().time;if(e.loadArchivedFramesExecuted||n>=r)return t.reject("Load archived data is useless, buffer is already full or the request has already been sent!");e.loadArchivedFramesExecuted=!0;var o=e.bufferPeriod<e.device.period?e.device.period:e.bufferPeriod>1e3?e.bufferPeriod:1e3,d=a.getDataSimple(e.dataId,e.frameId,e.device.id,n,r,e.maxSamples,o/1e3);return d.then(function(t){if(void 0!=t.data&&t.data.length>0){var a=e.getStringDetails(),i=e.frames;e.frames=[],e.lastFrame=void 0,angular.forEach(t.data,function(t){e.addFrame(t.time,t[e.device.id+"!"+e.frameId+"!"+e.dataId])},e),angular.forEach(i,function(t){e.addFrame(t.timestamp,t.value)},e),s.debug("\nDATA RECEIVED: "+t.data.length+" data; first: "+new Date(t.data[0].time).toUTCString()+"; last: "+new Date(t.data[t.data.length-1].time).toUTCString()+"\nBUFFER BEFORE: "+a+"\nBUFFER AFTER: "+e.getStringDetails())}else s.error("no result found")}),d},r.prototype.getStringDetails=function(){if(this.frames.length>0)var e=new Date(this.frames[0].timestamp),t=e.getUTCHours()+":"+e.getUTCMinutes()+":"+e.getUTCSeconds(),a=new Date(this.frames[this.frames.length-1].timestamp),i=a.getUTCHours()+":"+a.getUTCMinutes()+":"+a.getUTCSeconds();return"Buffer "+this.scale/1e3+" sec: frames = "+this.frames.length+"; first = "+t+"; last = "+i},o.prototype["delete"]=function(){this.device.unregisterForData(this.deferred),delete l[this.device.id+"!"+this.frameId+"!"+this.dataId]},{recordData:function(e,t,a){var i=e.id+"!"+t+"!"+a;void 0===l[i]&&(l[i]=new o(e,t,a)),l[i].listenerCount++,s.debug("record data: "+i+" (listeners: "+l[i].listenerCount+")")},getData:function(e,t,a){return l[e+"!"+t+"!"+a]},stopRecordData:function(e,t,a,i){var n=l[e+"!"+t+"!"+a];s.debug("stop record data: "+a+" (listeners: "+n.listenerCount+")"),void 0!==n&&(n.listenerCount--,(n.listenerCount<1||i)&&(n["delete"](),s.debug("data removed: "+a)))},getDataList:function(){return l}}}])}(),function(){"use strict";function e(e,t,a,i){function n(e){l.debug("archive request sending: "+e.request.length+" variable(s), from "+new Date(e.starttime).toUTCString()+" to "+new Date(e.endtime).toUTCString()+" with strategy: "+angular.toJson(e.timestampingstrategy)+"; max values: "+e.numvalues)}function r(e,t,a,i,n,r,o,s,d){this.varid=a+"!"+t+"!"+e,this.aggregate=angular.isUndefined(i)?c.AGGREGATE:i,this.colname=void 0!==n?n:this.varid,this.units=r,this.min=o,this.max=s,this["default"]=d}function o(e,t,a,i,n,r,o){var s={tablename:"table",request:e,starttime:t,endtime:a,numvalues:angular.isDefined(i)?i:c.MAX_NUM_VALUES};return angular.isUndefined(n)&&(n=c.STRATEGY),"resampling"==n?s.timestampingstrategy={resampling:{resampleinterval:angular.isDefined(r)?r:c.RESAMPLE_INTERVAL,intervalstampfraction:angular.isDefined(o)?o:c.INTERVAL_STAMP_FRATION}}:"reference"==n&&(s.timestampingstrategy={reference:angular.isDefined(r)?r:c.REFERENCE}),s}function s(e,i,r,s,d,c,u,m){if("json"!=e&&"csv"!=e&&"netcdf"!=e)return l.error("Format '"+e+"' not recognized"),t.reject({message:"Format '"+e+"' not recognized"});var v=o(i,r,s,d,c,u,m);n(v);var p=a.getArchiveData(e,angular.toJson(v));return p.then(function(e){l.debug("--> response: "+e.data.length+" data received")},function(e){void 0!==e.data&&l.error("--> error: "+angular.toJson(e.data)),null!=e.data&&void 0!==e.data.message&&l.error("--> error: "+e.data.message)}),p}function d(e,t,a,i,n,o,d){var l=[new r(e,t,a)];return s("json",l,i,n,o,"resampling",d)}var l=e.getInstance("archiveService"),c={MAX_NUM_VALUES:500,STRATEGY:"resampling",RESAMPLE_INTERVAL:1,INTERVAL_STAMP_FRATION:1,REFERENCE:1,AGGREGATE:"RAW"};return{Variable:r,getData:s,getDataSimple:d}}e.$inject=["$log","$q","restService","statusService"],angular.module("tsa.services").factory("archiveService",e)}(),function(){"use strict";function e(e,t,a,i){function n(a){this.logger=t.getInstance("Device "+a),this.id=a,this.name=a,this.jsonDataTopic="/topic/"+a+".json",this.periodList={},this.frameList={},this.isEnabled=!1,this.listenerCount=0,this.statusDeferred=e.defer(),this.dataListenerList=[],this.frameListenerList=[],this.jsonDataMsgListener=void 0,this.hackWindSpeed=void 0!==a&&a.startsWith("PP_ANEMOMETER")}return n.prototype.setEnable=function(e){this.isEnabled!=e&&(this.isEnabled=e,this.statusDeferred.notify(this.isEnabled))},n.prototype.startJSONMessageListening=function(){if(0===this.dataListenerList.length&&0===this.frameListenerList.length){var e=this;this.jsonDataMsgListener=this.subscribeToJSONData(),this.jsonDataMsgListener.promise.then({},{},function(t){var a=JSON.parse(t.data.body),i=a.name,n=a.data,r=a.acquisitionTime,o={};angular.forEach(n,function(e){o[e.name]=e.samples}),e.hackWindSpeed&&"weather"==i&&(o.relairspeed[0]=o.relairspeed[0]/.51444),angular.forEach(e.frameListenerList,function(e){e.id===i&&e.deferred.notify({value:o,timestamp:r})}),angular.forEach(n,function(t){angular.forEach(e.dataListenerList,function(e){e.id===i+"!"+t.name&&e.deferred.notify({value:t.samples.length>1?t.samples:t.samples[0],timestamp:r})})})})}},n.prototype.stopJSONMessageListening=function(){0===this.dataListenerList.length&&0===this.frameListenerList.length&&(this.logger.debug("no more data listener -> unsubscribeToJSONData(this.jsonDataMsgListener)"),this.unsubscribeToJSONData(this.jsonDataMsgListener))},n.prototype.registerForStatus=function(){return this.statusDeferred.promise},n.prototype.registerForData=function(t,a){this.startJSONMessageListening();var i=t+"!"+a,n=e.defer();return this.dataListenerList.push({id:i,deferred:n}),this.logger.debug("register for data : "+this.id+"!"+t+"!"+a+" (data listeners for this device: "+this.dataListenerList.length+")"),n},n.prototype.unregisterForData=function(e){angular.forEach(this.dataListenerList,function(t){Object.is(t.deferred,e)&&(e.resolve(),this.dataListenerList.splice(this.dataListenerList.indexOf(t),1),this.logger.debug("data listener removed (id = "+t.id+"), remaining: "+this.dataListenerList.length))},this),this.stopJSONMessageListening()},n.prototype.registerForFrame=function(t){this.startJSONMessageListening();var a=t,i=e.defer();return this.frameListenerList.push({id:a,deferred:i}),this.logger.debug("register for frame : "+this.id+"!"+t+" (frame listeners for this device: "+this.frameListenerList.length+")"),i},n.prototype.unregisterForFrame=function(e){angular.forEach(this.frameListenerList,function(t){Object.is(t.deferred,e)&&(e.resolve(),this.frameListenerList.splice(this.frameListenerList.indexOf(t),1),this.logger.debug("frame listener removed (id = "+t.id+"), remaining: "+this.frameListenerList.length))},this),this.stopJSONMessageListening()},n.prototype.recordData=function(e,t){i.recordData(this,e,t)},n.prototype.stopRecordData=function(e,t,a){i.stopRecordData(this.id,e,t,a)},n.prototype.getData=function(e,t){return i.getData(this.id,e,t)},n.prototype.subscribeToJSONData=function(){return a.registerForTopic(this.jsonDataTopic)},n.prototype.unsubscribeToJSONData=function(e,t){a.unregisterForTopic(this.jsonDataTopic,e,t)},n}e.$inject=["$q","$log","stompService","acquisitionBufferService"],angular.module("tsa.services").factory("Device",e)}(),function(){"use strict";angular.module("tsa.services").factory("restService",["$resource","$http","$httpParamSerializerJQLike","$q","REST_API","ARCHIVES_REST_API","$cookies","QGIS_URL","QGIS_MISSION_NAME",function(e,t,a,i,n,r,o,s,d){function l(e){e.id=I++,w.unshift(e),angular.isDefined(y)||c()}function c(){y=w.shift(),angular.isDefined(y)&&y.call().then(c,c)}function u(e){angular.forEach(w,function(t,a){t.id===e&&w.splice(a,1)})}var m=e(n.CHANNEL+"/:channelId",null,{update:{method:"PUT"}}),v=e(n.CONFIGURATION),p=e(n.DRIVER),g=(e(n.DRIVER_PREVIEW),e(n.DEVICE+"/:deviceId",null,{update:{method:"PUT"}})),f=e(n.DESCRIPTION+"/:descriptionName"),h=(e(n.USER+"/:login",null,{update:{method:"PUT"}}),e(n.CHAT)),b=e(n.CHAT+"/chatMessage"),w=[],y=void 0,I=0;return{getRequestStack:function(){return w},getCurrentRequest:function(){return y},cancelRequest:u,getArchiveData:function(e,a){function n(){var i=t.post(r.DATA,a,{headers:{Accept:"application/json","Content-Type":"application/json"},params:{format:e}});return i.then(function(e){o.resolve(e)},function(e){o.reject(e)}),i}var o=i.defer(),s=JSON.parse(a).request.length>0?JSON.parse(a).request[0].varid:"empty list!",d=(JSON.parse(a).endtime-JSON.parse(a).starttime)/1e3;return n.description="variable = "+s+";   duration = "+d+" sec",l(n),o.promise},getArchiveAllData:function(e,a,n){var o=i.defer();return t.get(r.DEVICES+"/"+e+"/framesData?startDate="+a+"&endDate="+n).then(function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},getArchiveDevices:function(){var e=i.defer(),a={};return t.get(r.DEVICES).then(function(i){angular.forEach(i.data,function(i){var n={id:i,name:i,frameList:{}};t.get(r.DEVICES+"/"+i+"/frames").then(function(e){angular.forEach(e.data,function(e){n.frameList[e.name]={},angular.forEach(e.data,function(t){n.frameList[e.name][t.name]=t})})},function(t){e.reject(t)}),a[i]=n}),e.resolve(a)},function(t){e.reject(t)}),e.promise},getChannels:function(){return m.query().$promise},putChannel:function(e,t){return m.update({channelId:e},{channelId:e,url:t}).$promise},getConfiguration:function(){return v.get().$promise},getDrivers:function(){return p.query().$promise},postDriversPreview:function(e){return t.post(n.DRIVERSPREVIEW,e,{headers:{Accept:"application/json","Content-Type":"application/json"}})},getDescriptions:function(){return f.query().$promise},getDescription:function(e){return f.get({descriptionName:e}).$promise},getDevices:function(){return g.query().$promise},getDevice:function(e){return g.get({deviceId:e}).$promise},putDevice:function(e,t){return g.save(t).$promise},deleteDevice:function(e){return g["delete"]({deviceId:e}).$promise},getFrontEndParameters:function(){return t.get(n.FRONT_END_PARAMETERS)},getMission:function(){return t.get(n.MISSION,{headers:{accept:"text/plain"}})},setMission:function(e){return t.put(n.MISSION,e)},login:function(e,i){return t.post(n.LOGIN,a({username:e,password:i}),{
headers:{"Content-Type":"application/x-www-form-urlencoded"}})},logout:function(){return t.post(n.LOGOUT)},getCurrentUser:function(){return t.get(n.USER)},saveUserConfig:function(e,a){return t.put(n.USER_CONFIG+e,a,{headers:{"Content-Type":"application/json"}})},casinoConnexion:function(e,a,i){return t.post(n.CASINO+"/database",{url:e,user:a,pwd:i})},getCasinoCruises:function(){return t.get(n.CASINO+"/cruises",{headers:{database:localStorage.getItem("databaseToken")}})},getCasinoCurrentCruise:function(){return t.get(n.CASINO+"/cruises/current",{headers:{database:localStorage.getItem("databaseToken")}})},getCasinoDevices:function(){return t.get(n.CASINO+"/devices",{headers:{database:localStorage.getItem("databaseToken")}})},getCasinoActions:function(){return t.get(n.CASINO+"/actions",{headers:{database:localStorage.getItem("databaseToken")}})},getCasinoEvents:function(e,a,i){var r={headers:{database:localStorage.getItem("databaseToken")},params:{ActionCode:i}};return t.get(n.CASINO+"/cruises/"+e+"/devices/"+a+"/events",r)},getCasinoCruiseEvents:function(e,a,i){var r={headers:{database:localStorage.getItem("databaseToken")},params:{}};return null!==a&&(r.params.limit=a),null!==i&&(r.params.isDate=i),t.get(n.CASINO+"/cruises/"+e+"/events",r)},getCasinoCruiseDevices:function(e){var a={headers:{database:localStorage.getItem("databaseToken")}};return t.get(n.CASINO+"/cruises/"+e+"/devices",a)},getCasinoDeviceActions:function(e,a){var i={headers:{database:localStorage.getItem("databaseToken")}};return t.get(n.CASINO+"/cruises/"+e+"/devices/"+a+"/actions",i)},getCasinoLastOperationId:function(e,a){var i={headers:{database:localStorage.getItem("databaseToken")},params:{prefix:a}};return t.get(n.CASINO+"/cruises/"+e+"/events/OPE",i)},postCasinoCruiseEvent:function(e,a){var i={headers:{database:localStorage.getItem("databaseToken")}};return t.post(n.CASINO+"/cruises/"+e+"/events",a,i)},getQGISCapabilities:function(){var e={headers:{"Content-type":"application/xml"},params:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetCapabilities"}};return t.get(s+d,e)},updateQGISProject:function(e){return e=e.replace("data:application/x-zip-compressed;base64,","",e),t.put(n.QGIS,{zip:e})},getLastMessages:function(){return h.query().$promise},sendMessage:function(e){return h.save(e).$promise},getLastMessage:function(){return b.get().$promise}}}])}(),function(){"use strict";function e(e,t,a){var i={},n={},r=void 0,o={flag:!1};return i.time=(new Date).getTime(),n.time=(new Date).getTime(),i.timeOffset=0,e.start(),e.registerForTopic(a.STATUS).promise.then({},function(){o.flag=!1},function(e){var t=JSON.parse(e.data.body);i.timeOffset=t.time-(new Date).getTime(),r=t.localTimeZoneOffset,o.flag=!0,n.time=(new Date).getTime()}),t(function(){i.time=new Date((new Date).getTime()+i.timeOffset).getTime()},100),t(function(){(new Date).getTime()-n.time>5e3&&(o.flag=!1)},1e4),{getServerTime:function(){return i},getLocalTimeZoneOffset:function(){return r},isConnected:function(){return o}}}e.$inject=["stompService","$interval","TOPICS"],angular.module("tsa.services").factory("statusService",e)}(),function(){"use strict";angular.module("tsa.services").factory("stompService",["$q","$log","STOMP_URL","themeService","userService","dialogService",function(e,t,a,i,n,r){function o(e){this.id=e,this.subscription=void 0,this.listeners=[]}var s,d,l=t.getInstance("stompService"),c=[],u={},m={flag:!1},v=e.defer(),p=e.defer(),g=function(){var e={login:"",passcode:""};s=Stomp.client(a),s.debug=null,s.heartbeat.outgoing=1e4,s.heartbeat.incoming=1e4,s.connect(e,w,y),l.debug("connection to: "+a)},f=function(e){if(void 0!==s&&m.flag){var t=function(t){angular.forEach(e.listeners,function(a){a.notify({topic:e.id,data:t})})};e.subscription=s.subscribe(e.id,t),l.debug("subscription for the topic: "+e.id)}},h=function(e){u[e]=new o(e),f(u[e]),b()},b=function(){v.notify(u)},w=function(){m.flag=!0;for(var e in u)f(u[e]);d.resolve()},y=function(e){l.error(" ("+(new Date).toTimeString()+") failure callback: "+e),d.reject(e),p.notify(e),m.flag=!1,n.currentUser=void 0,l.error(" ("+(new Date).toTimeString()+") reconnection: "),setTimeout(g,1e4)};return{start:function(){var t=void 0!==d&&0===d.promise.$$state.status;return m.flag||t||(l.debug("start..."),d=e.defer(),g()),d.promise},stop:function(){m.flag?(s.disconnect(),s=void 0,m.flag=!1,c=[],l.debug("stop.")):l.error(TAG)},isConnected:function(){return m},registerForError:function(){return p.promise},registerForTopicList:function(){return v.promise},getTopicList:function(){return u},registerForTopic:function(t){void 0===u[t]&&h(t);var a=e.defer();return u[t].listeners.push(a),l.debug("new listener registered for topic: "+t+" (total: "+u[t].listeners.length+")"),b(),a},unregisterForTopic:function(e,t,a){if(void 0!==u[e]){var i=u[e];null!==t&&i.listeners.indexOf(t)>-1&&(t.resolve(),i.listeners.splice(i.listeners.indexOf(t),1),l.debug("unregister for topic: "+e+" (listeners: "+i.listeners.length+")")),a===!0&&(i.listeners=[]),0===i.listeners.length&&void 0!==i.subscription&&(i.subscription.unsubscribe(),delete u[e],l.debug("topic subscription closed and topic removed: "+e),b())}},sendMessage:function(e,t){void 0!==s&&m.flag&&s.send(e,{},t)}}}])}(),function(){"use strict";function e(e){var t=function(t,a,i){return localStorage.removeItem("databaseToken"),localStorage.removeItem("selectedCruises"),localStorage.removeItem("selectedDevices"),e.casinoConnexion(t,a,i).then(function(e){localStorage.setItem("databaseToken",e.headers("database"))})},a=function(){return e.getCasinoCruises().then(function(e){return e.data})},i=function(){return e.getCasinoCurrentCruise().then(function(e){return e.data})},n=function(e){localStorage.setItem("selectedCruises",JSON.stringify(e))},r=function(){return JSON.parse(localStorage.getItem("selectedCruises"))},o=function(t,a){return e.getCasinoDevices().then(function(e){return e.data}).then(function(e){return t?l().then(function(t){return e.map(function(e){return e.actions=t.filter(function(t){var i=t.DeviceId===e.DeviceId,n=!0;return a&&0!==a.length&&(n=a.indexOf(t.ActionCode)!==-1),i&&n}),e}).filter(function(e){return 0!==e.actions.length})}):e})},s=function(e){localStorage.setItem("selectedDevices",JSON.stringify(e))},d=function(){return JSON.parse(localStorage.getItem("selectedDevices"))},l=function(){return e.getCasinoActions().then(function(e){return e.data})},c=function(t,a,i){return e.getCasinoEvents(t,a,i).then(function(e){return e.data})},u=function(t,a,i){return e.getCasinoCruiseEvents(t,a,i).then(function(e){return e.data})},m=function(t){return e.getCasinoCruiseDevices(t).then(function(e){return e.data})},v=function(t,a){return e.getCasinoDeviceActions(t,a).then(function(e){return e.data})},p=function(t,a){return e.getCasinoLastOperationId(t,a).then(function(e){return e.data})},g=function(t,a){return e.postCasinoCruiseEvent(t,a).then(function(e){return e.data})};return{connect:t,getCruises:a,getCurrentCruise:i,setSelectCruises:n,getSelectCruises:r,getCasinoDevices:o,setSelectDevices:s,getSelectDevices:d,getCasinoActions:l,getEvents:c,getCruiseEvents:u,getCruiseDevices:m,getDeviceActions:v,getLastOperationId:p,postCruiseEvent:g}}e.$inject=["restService"],angular.module("tsa.services").factory("casinoService",e)}(),function(){"use strict";function e(e){function t(){this.init()}return t.prototype.init=function(){this.cruiseEventId=0,this.eventDate="",this.latitude=999,this.longitude=999,this.type="",this.observation="",this.initPhase(),this.initOperation(),this.initHalieutic()},t.prototype.initPhase=function(){this.phaseFullName="",this.phaseType=""},t.prototype.initAction=function(){this.actionFullName="",this.actionCode=""},t.prototype.initDevice=function(){this.initAction(),this.deviceFullName="",this.deviceCode=""},t.prototype.initOperation=function(){this.operationId="",this.initDevice()},t.prototype.initHalieutic=function(){this.field1="",this.field2=""},t.prototype.cleanByType=function(){switch(this.type){case"OBS":this.initPhase(),this.initOperation();break;case"PHA":this.initOperation(),this.initHalieutic();break;case"OPE":this.initPhase()}},t}e.$inject=["$log"],angular.module("tsa.services").factory("CasinoEvent",e)}(),function(){"use strict";function e(e){function t(){this.init()}return t.prototype.init=function(){this.custom="",this.number=1},t.prototype.updatePrefix=function(e,t){this.prefix=e+t},t.prototype.updateNumber=function(e,t){var a=0;if(this.number=1,e){var a=0,i=e.split("-");a=i.length>1?i[i.length-1]:e.replace(t,""),this.number=Number(a)+1}},t.prototype.getStringOperationId=function(){var e=this.prefix;return""!=this.custom&&(e+="-"+this.custom+"-"),e+=this.number},t}e.$inject=["$log"],angular.module("tsa.services").factory("CasinoOperationId",e)}(),function(){"use strict";angular.module("tsa.services.dialog").factory("dialogService",["$mdDialog","$mdToast","$filter",function(e,t,a){return{showDialog:function(t,a){e.show(e.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title(t).textContent(a).ariaLabel("Alert Dialog Demo").ok("ok"))},showToast:function(e){t.show(t.simple().textContent(e).hideDelay(3e3).position("bottom right"))},showToastChat:function(e){t.show(t.simple().textContent(e).hideDelay(0).position("bottom right").action("ok"))},showSelectView:function(){return e.show({controller:"viewSelectionController",controllerAs:"ctrl",templateUrl:"app/services/dialog/viewSelection/viewSelection.html",clickOutsideToClose:!1})},showSelectData:function(t){return e.show({controller:"dataSelectionController",controllerAs:"ctrl",templateUrl:"app/services/dialog/dataSelection/dataSelection.html",clickOutsideToClose:!0,locals:{deviceList:t}})},showMessagingAccess:function(){return e.show({controller:"messagingAccessController",controllerAs:"ctrl",templateUrl:"app/services/dialog/messagingAccess/messagingAccess.html",clickOutsideToClose:!0,locals:{}})},showMessaging:function(){return e.show({controller:"messagingController",controllerAs:"ctrl",templateUrl:"app/services/dialog/messaging/messaging.html",clickOutsideToClose:!0,locals:{}})},showSelectDateRange:function(t,a){return e.show({controller:"dateRangeSelectionController",controllerAs:"ctrl",templateUrl:"app/services/dialog/dateRangeSelection/dateRangeSelection.html",clickOutsideToClose:!0,locals:{startDate:t,endDate:a}})},showSaveDashboard:function(t){return e.show({controller:"saveDashboardController",controllerAs:"ctrl",templateUrl:"app/services/dialog/saveDashboard/saveDashboard.html",clickOutsideToClose:!0,locals:{title:t}})},showValidation:function(t,i,n,r){return angular.isUndefined(n)&&(n=a("translate")("yes")),angular.isUndefined(r)&&(r=a("translate")("cancel")),e.show({controller:"validationController",controllerAs:"ctrl",templateUrl:"app/services/dialog/validation/validation.html",clickOutsideToClose:!0,locals:{title:t,msg:i,msgOk:n,msgCancel:r}})}}}])}(),function(){"use strict";function e(e,t,a,i,n){function r(e,t,a,i){this.login=e,this.name=t,this.roles=a,this.config=i}var o=t.getInstance("userFactory");return r.prototype.hasAuthority=function(e){return this.roles.indexOf(e)!=-1},r.prototype.saveConfig=function(){var e=this,t=i.saveUserConfig(e.login,angular.toJson(e.config));return t.then(function(){o.debug(e.login+" configuration saved")},function(){o.error("configuration save error")}),t},r.prototype.saveLanguage=function(e){this.config.language=e,this.saveConfig().then(function(){o.debug("Language saved: "+e)})},r.prototype.saveTheme=function(e){this.config.theme=e,this.saveConfig().then(function(){o.debug("Theme saved: "+e)})},r.prototype.saveDashboard=function(e,t){var i=this;void 0==i.config.dashboardList&&(i.config.dashboardList={});var n=i.config.dashboardList[e];i.config.dashboardList[e]=t;var r=i.saveConfig();return r.then(function(){a.setPersoDashboardList(angular.copy(i.config.dashboardList)),a.setCurrentDashboard(e,t)},function(){void 0!=n?i.config.dashboardList[e]=n:delete i.config.dashboardList[e]}),r},r.prototype.removeDashboard=function(e){var t=this,i=t.config.dashboardList[e];delete t.config.dashboardList[e];var n=t.saveConfig();return n.then(function(){a.setPersoDashboardList(angular.copy(t.config.dashboardList)),a.switchToNewDashboard()},function(){t.config.dashboardList[e]=i}),n},r.prototype.saveStaticGrid=function(){var e=this,t=e.config.staticGrid;e.config.staticGrid={cards:n.getCards(),mode:n.getViewMode(),selectedCard:n.getSelectedCardId()};var a=e.saveConfig();return a.then({},function(){e.config.staticGrid=t}),a},r}e.$inject=["$q","$log","dashboardService","restService","staticGridService"],angular.module("tsa.services").factory("User",e)}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d,l,c,u,m,v,p,g){function f(e){if(b=e,y.currentUser=b,void 0!=b){if(angular.isDefined(e.config)&&angular.isDefined(e.config.dashboardList)?l.setPersoDashboardList(angular.copy(e.config.dashboardList)):l.setPersoDashboardList([]),null!=b.config.dashboardList){var t=Object.keys(b.config.dashboardList)[0];null!=t&&l.setCurrentDashboard(t,b.config.dashboardList[t])}null!=b.config.staticGrid&&(null!=b.config.staticGrid.cards&&v.setCards(b.config.staticGrid.cards),null!=b.config.staticGrid.mode&&v.setViewMode(b.config.staticGrid.mode),null!=b.config.staticGrid.selectedCard&&v.setSelectedCardId(b.config.staticGrid.selectedCard)),angular.isDefined(b.config.language)&&angular.isDefined(u.getLocaleList()[b.config.language])&&u.setCurrentLocale(u.getLocaleList()[b.config.language]),angular.isDefined(b.config.theme)&&p.setTheme(b.config.theme),w.debug("user config loaded: "+b.name),b.hasAuthority(d.SDIV)&&i.path("/static")}o.$emit("current-user-changed")}function h(){var e=m.getCurrentUser();return e.then(function(e){var a=e.data;if(a){var i=null!=a.config?angular.fromJson(a.config):{};f(new g(a.login,a.name,a.roles,i)),c.showToast(t("translate")("toast.successfull-connection")+b.name),w.debug("successful /api/user request, user retrieved: "+b.name)}else w.debug("current user not found (/api/user request error)")},function(){w.debug("current user not found (/api/user request error)")}),e}var b,w=n.getInstance("userService"),y={currentUser:void 0};return function(){var a=e.get("XSRF-TOKEN");void 0!=a&&h().then({},function(){c.showToast(t("translate")("toast.user-disconnected"))})}(),{currentUser:b,login:function(e,t){var a=r.defer();return m.login(e,t).then(function(e){w.debug("successful login"),h().then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){w.error("login error"),a.reject(e)}),a.promise},logout:function(){m.logout(),f(void 0),c.showToast(t("translate")("toast.user-disconnection"))},getCurrentUser:function(){return b},getCurrentUserProvider:function(){return y},checkAuthority:function(e){return!(void 0==b||!b.hasAuthority(e))||(w.log("user not authorized, redirecting to the login page!"),s.go("login",{authority:e,next:s.current.name,nextParams:s.params}),!1)}}}e.$inject=["$cookies","$filter","$http","$location","$log","$q","$rootScope","$state","AUTHORITIES","dashboardService","dialogService","localeService","restService","staticGridService","themeService","User"],angular.module("tsa.services").factory("userService",e)}(),function(){"use strict";function e(){return{createBackRudder:function(e){var a=new t,i=100,n=i/Math.sqrt(2);return a.graphics.beginStroke(e).setStrokeStyle(2,"square").moveTo(0,0).lineTo(n,0+n).arc(0,0,i,Math.PI/4,Math.PI/2-4*Math.PI/180).endStroke().beginStroke(e).setStrokeStyle(2,"square").arc(0,0,i,Math.PI/2+4*Math.PI/180,3*Math.PI/4).moveTo(-n,n).lineTo(0,0).endStroke(),a},createRudder:function(e){var a=new t,i=100,n=7,r=7,o=r/2;return a.graphics.beginStroke(e).setStrokeStyle(2,"square").moveTo(o,n).lineTo(o,i-n).lineTo(-o,i-n).lineTo(-o,n).lineTo(o,n).endStroke(),a},createBackGauge:function(e){var a=new t;return a.graphics.beginFill(e).drawRect(-50,-10,100,20).endFill(),a},createGaugge:function(e,a,i,n,r){var o=new t,s=i>0?n:r;return Math.abs(i)>0&&o.graphics.beginFill(s).drawRect(0,-10,i/2,20).endFill(),o.graphics.beginStroke(e).setStrokeStyle(.6).moveTo(-25,-10).lineTo(-25,10).endStroke(),o.graphics.beginStroke(e).setStrokeStyle(.6).moveTo(25,-10).lineTo(25,10).endStroke(),o.graphics.beginStroke(a).setStrokeStyle(.6).moveTo(0,-10).lineTo(0,10).endStroke(),o},createVessel:function(e){var a=new t,i=100,n=100;a.graphics.beginStroke(e).setStrokeStyle(1);var r=20,o=20,s=n/2,d=i/2,l=15*d/50,c=r*s/50,u=o*d/50;return a.graphics.moveTo(-s,-l).lineTo(-s,d).lineTo(s,d).lineTo(s,-l).bezierCurveTo(s,-l-u,c,-d,0,-d).bezierCurveTo(-c,-d,-s,-l-u,-s,-l),a},createArrow:function(e,a){var i=new t;i.graphics.beginStroke(e).setStrokeStyle(4);var n=10;return i.graphics.moveTo(0,0).lineTo(0,-a).moveTo(n,-a+n).lineTo(0,-a).moveTo(-n,-a+n).lineTo(0,-a),i}}}angular.module("tsa.services").factory("easelJsUtils",e);var t=createjs.Shape;createjs.Container}(),function(){"use strict";function e(e){function t(t,a,i){return e("date")(new Date(86400*(t-25569)*1e3),a,i)}return{parseLatToString:function(e){if(angular.isUndefined(e))return"";var t=e>0?"N":"S",a=sprintf("%02d",Math.abs(e)),i=sprintf("%06.3f",Math.abs(e)%1*60);return a+"°"+i+t},parseLongToString:function(e){if(angular.isUndefined(e))return"";var t=e>0?"E":"W",a=sprintf("%03d",Math.abs(e)),i=sprintf("%06.3f",Math.abs(e)%1*60);return a+"°"+i+t},parseTimeToString:function(t){return e("date")(new Date(t),"dd/MM/yy HH:mm:ss","+0")},parseExcelDateDefaultToString:function(e,a){return t(e,"dd/MM/yy HH:mm:ss",a)},parseExcelDateNoSecToString:function(e,a){return t(e,"dd/MM/yy HH:mm",a)},parseMarineDistance:function(e){return Math.abs(e)<1852?e:e/1852},parseQualityFbxToString:function(e){var t="";switch(e=parseInt(e)){case 0:t="operating";break;case 1:t="washing";break;case 2:t="waiting fresh water";break;case 3:t="service";break;case 8:t="cycle completed";break;case 9:t="error";break;default:t="undefined"}return t}}}e.$inject=["$filter"],angular.module("tsa.services").factory("formatterService",e)}(),function(){"use strict";function e(e){function t(t,a){return{animation:!1,maintainAspectRatio:!1,legend:{display:!1},tooltips:{enabled:!1},elements:{line:{borderWidth:2,fill:a,tension:0},point:{radius:0}},scales:{xAxes:[{type:"linear",gridLines:{zeroLineColor:"#9E9E9E",color:e.getTheme().gridLinesColor},afterBuildTicks:function(e){angular.forEach(e.ticks,function(a,i){0!==i&&void 0!=t&&(e.ticks[i]-=a%t)})},ticks:{maxRotation:0,fixedStepSize:t,callback:function(e,t,a){if(0===t)return"";var i=new Date(e);if(a[a.length-1]-a[0]>9e7)return[i.getUTCHours()+"h"+i.getUTCMinutes(),i.getUTCDate()+"/"+i.getUTCMonth()+"/"+i.getUTCFullYear()];var n=i.getUTCHours()+"h";return i.getUTCMinutes()<10&&(n+=0),n+=i.getUTCMinutes(),0!==i.getUTCSeconds()&&(n+=":"+i.getUTCSeconds()),n}}}]}}}return{scales:{"1 min":{scale:6e4,stepSize:15e3,bufferId:"bufferOneMinute"},"5 min":{scale:3e5,stepSize:6e4,bufferId:"bufferFiveMinutes"},"30 min":{scale:18e5,stepSize:3e5,bufferId:"bufferThirtyMinutes"},"1h":{scale:36e5,stepSize:6e5,bufferId:"bufferOneHour"},"3h":{scale:108e5,stepSize:18e5,bufferId:"bufferThreeHours"},"6h":{scale:216e5,stepSize:36e5,bufferId:"bufferSixHours"},"12h":{scale:432e5,stepSize:72e5,bufferId:"bufferTwelveHours"},"24h":{scale:864e5,stepSize:144e5,bufferId:"bufferOneDay"}},getChartOptions:t}}e.$inject=["themeService"],angular.module("tsa.services").factory("graphUtils",e)}(),function(){"use strict";function e(e,t,a,i){return a.$on("$translateChangeSuccess",function(e,t){document.documentElement.setAttribute("lang",t.language),i.set(t.language.toLowerCase().replace(/_/g,"-"))}),{getCurrentLocale:function(){return e.proposedLanguage()?t.locales[e.proposedLanguage()]:t.locales[t.preferredLocale]},getLocaleList:function(){return t.locales},setCurrentLocale:function(t){e.use(t.id)}}}e.$inject=["$translate","LOCALES","$rootScope","tmhDynamicLocale"],angular.module("tsa.services").service("localeService",e)}(),function(){"use strict";angular.module("tsa.services").factory("themeService",["$log","$rootScope",function(e,t){var a=e.getInstance("themeService"),i={DAY:{id:"day",icon:"wb_sunny",gridLinesColor:"#E0E0E0"},NIGHT:{id:"night",icon:"brightness_3",gridLinesColor:"#424242"}},n=angular.copy(i.DAY);return{THEME:i,getTheme:function(){return n},setTheme:function(e){n.id=e.id,n.icon=e.icon,n.gridLinesColor=e.gridLinesColor,a.log("theme changed to "+e.id),this.notify()},subscribe:function(e,a,i){"undefined"==typeof i&&(i=!0);var r=t.$on("changeTheme-themeService-event",a);i&&a(null,n),e.$on("$destroy",r)},notify:function(){t.$emit("changeTheme-themeService-event",n)}}}])}(),function(){"use strict";angular.module("tsa.services.filters",[]),angular.module("tsa.services.filters").filter("orderObjectBy",function(){return function(e,t,a){var i=[];return angular.forEach(e,function(e){i.push(e)}),i.sort(function(e,a){return e[t]>a[t]?1:e[t]<a[t]?-1:0}),a&&i.reverse(),i}}).filter("marineDistance",function(){return function(e){var t="";return t=e>=1852?sprintf("%.1f nm",e/1852):sprintf("%.1f m",e)}}).filter("timeInHoursMins",function(){return function(e){var t=Math.round(e/6e4),a=t%60,i=Math.round((t-a)/60);return sprintf("%02d:%02d",i,a)}})}(),function(){"use strict";angular.module("tsa.services").factory("videoCallService",["$log","$rootScope","$filter","$location","$mdDialog","$interval","dialogService","dashboardService","staticGridService","userService","AUTHORITIES","JANUS_SERVER_URL",function(e,t,a,i,n,r,o,s,d,l,c,u){function m(){x.currentUser=l.getCurrentUser(),angular.isDefined(x.currentUser)&&x.currentUser.hasAuthority(c.VIDEOCALL)?v():p()}function v(){Janus.init({debug:I,callback:function(){return Janus.isWebrtcSupported()?void(S=new Janus({server:y,success:function(){S.attach({plugin:"janus.plugin.videocall",opaqueId:E,success:function(e){C=e,Janus.log("Plugin attached! ("+C.getPlugin()+", id="+C.getId()+")"),f(x.currentUser.login),x.state=1},error:function(e){Janus.error("  -- Error attaching plugin...",e)},consentDialog:function(e){Janus.debug("Consent dialog should be "+(e?"on":"off")+" now")},mediaState:function(e,t){Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now"),x.state=3},onmessage:function(e,t){Janus.debug(" ::: Got a message :::"),Janus.debug(e);var i=e.result;if(null!==i&&void 0!==i){if(void 0!==i.list&&null!==i.list){var n=i.list;Janus.debug("Got a list of registered peers:"),Janus.debug(n),x.userList.length=0;for(var r in n){var s=n[r];Janus.debug("  >> ["+n[r]+"]"),x.currentUser&&x.currentUser.login!=s&&x.userList.push(n[r])}}else if(void 0!==i.event&&null!==i.event){var d=i.event;if("registered"===d)myusername=i.username,Janus.log("Successfully registered as "+myusername+"!");else if("calling"===d)Janus.log("Waiting for the peer to answer...");else if("incomingcall"===d){Janus.log("Incoming call from "+i.username+"!"),yourusername=i.username;var l=document.getElementById("ringtone");l.play(),o.showValidation(a("translate")("views.video-call.incomingCall.title"),a("translate")("views.video-call.incomingCall.message")+yourusername,a("translate")("views.video-call.incomingCall.accept"),a("translate")("views.video-call.incomingCall.decline")).then(function(){l.pause(),g(),C.createAnswer({jsep:t,media:{data:!1},simulcast:!1,success:function(e){Janus.debug("Got SDP!"),Janus.debug(e);var t={request:"accept"};C.send({message:t,jsep:e})},error:function(e){Janus.error("WebRTC error:",e)}})},function(){l.pause(),b()})}else if("accepted"===d){var c=i.username;null===c||void 0===c?Janus.log("Call started!"):(Janus.log(c+" accepted the call!"),yourusername=c),t&&C.handleRemoteJsep({jsep:t})}else"update"===d?t&&("answer"===t.type?C.handleRemoteJsep({jsep:t}):C.createAnswer({jsep:t,media:{data:!1},success:function(e){Janus.debug("Got SDP!"),Janus.debug(e);var t={request:"set"};C.send({message:t,jsep:e})},error:function(e){Janus.error("WebRTC error:",e)}})):"hangup"===d&&(Janus.log("Call hung up by "+i.username+" ("+i.reason+")!"),x.state=1,C.hangup())}}else{var u=e.error;w.error(u),C.hangup()}},onlocalstream:function(e){Janus.debug(" ::: Got a local stream :::"),Janus.debug(e),Janus.attachMediaStream(D,e),"completed"!==C.webrtcStuff.pc.iceConnectionState&&"connected"!==C.webrtcStuff.pc.iceConnectionState;var t=e.getVideoTracks();null===t||void 0===t||0===t.length},onremotestream:function(e){Janus.debug(" ::: Got a remote stream :::"),Janus.debug(e),Janus.attachMediaStream(A,e)},ondataopen:function(e){Janus.log("The DataChannel is available!")},ondata:function(e){Janus.debug("We got data from the DataChannel! "+e)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::"),console.log("et moi ?"),n.cancel(),x.state=1,yourusername=null}})},error:function(e){Janus.error(e)},destroyed:function(){T&&(clearInterval(T),T=void 0),x.userList.length=0,x.state=0}})):void w.error("No WebRTC support...")}})}function p(){S&&(S.destroy(),S=void 0)}function g(){"/static"==i.path()?d.addVideoCallIfNeeded():"/dashboard"==i.path()&&s.addVideoCallIfNeeded()}function f(e){var t={request:"register",username:e};C.send({message:t})}function h(e){C.createOffer({media:{data:!1},simulcast:!1,success:function(t){Janus.debug("Got SDP!"),Janus.debug(t);var a={request:"call",username:e};C.send({message:a,jsep:t})},error:function(e){Janus.error("WebRTC error...",e)}})}function b(){var e={request:"hangup"};C.send({message:e}),C.hangup(),yourusername=null}var w=e.getInstance("videoCallService"),y=u,I=["error","warn"],S=void 0,C=void 0,T=void 0,E="videocalltest-"+Janus.randomString(12),D=void 0,A=void 0,x={state:0,userList:[],currentUser:void 0};return{init:function(){t.$on("current-user-changed",function(){m()}),m(),r(function(){x.state>=1&&C.send({message:{request:"list"}})},5e3)},setVideo:function(e,t){D=e,A=t},getVideoCallState:function(){return x},videoCall:function(e){x.state=2,h(e)},hangup:function(){b(),x.state=1},enableVideo:function(e){C.send({message:{request:"set",video:e}})},enableAudio:function(e){C.send({message:{request:"set",audio:e}})}}}])}(),function(){"use strict";angular.module("tsa.services").factory("videoStreamingService",["$log","$rootScope","VIDEO_PARAMS","JANUS_SERVER_URL",function(e,t,a,i){var n=(e.getInstance("videoStreamingService"),i);return console.log("janus server "+n),{startJanus:function(e,t){Janus.init({debug:["error","warn"],callback:function(){var a="streamingtest-"+Janus.randomString(12),i=null;i=new Janus({server:n,success:function(){i.attach({plugin:"janus.plugin.streaming",opaqueId:a,success:function(t){var a=t;Janus.log("Plugin attached! ("+a.getPlugin()+", id="+a.getId()+")"),i.mystreaming=a,e(i)},error:function(e){Janus.error("  -- Error attaching plugin... ",e)},onmessage:function(e,t){Janus.debug(" ::: Got a message :::"),Janus.debug(e);var a=e.result;if(null!==a&&void 0!==a)if(void 0!==a.status&&null!==a.status){var n=a.status;"starting"===n?$("#status").removeClass("hide").text("Starting, please wait...").show():"started"===n?$("#status").removeClass("hide").text("Started").show():"stopped"===n&&stopStream()}else"event"===e.streaming;else if(void 0!==e.error&&null!==e.error)return console.log("on passe bien ici !"),console.log(e.error),stopStream(),void setTimeout(function(){console.log("start stream !!"),startStream()},5e3);if(void 0!==t&&null!==t){Janus.debug("Handling SDP as well..."),Janus.debug(t);var r=i.mystreaming;r.createAnswer({jsep:t,media:{audioSend:!1,videoSend:!1},success:function(e){Janus.debug("Got SDP!"),Janus.debug(e);var t={request:"start"};r.send({message:t,jsep:e})},error:function(e){Janus.error("WebRTC error:",e)}})}},onremotestream:function(e){Janus.debug(" ::: Got a remote stream :::"),Janus.debug(e),Janus.attachMediaStream(t,e);var a=e.getVideoTracks();null!==a&&void 0!==a&&0!==a.length||console.log("No remote video !")},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}})},error:function(e){console.log("ici"),Janus.error(e)},destroyed:function(){Janus.log("Destroyed")}})}})},stopJanus:function(e){e.destroy()},startStream:function(e,t){var a=e.mystreaming;if(Janus.log("Selected video id #"+t),void 0===t||null===t)return void console.log("No stream selected");var i={request:"watch",id:parseInt(t)};a.send({message:i})},stopStream:function(e){var t=e.mystreaming,a={request:"stop"};t.send({message:a}),t.hangup()}}}])}();var server=null;server="http:"===window.location.protocol?"http://"+window.location.hostname+":8088/janus":"https://"+window.location.hostname+":8089/janus";var janus=null,videocall=null,opaqueId="videocalltest-"+Janus.randomString(12),bitrateTimer=null,spinner=null,audioenabled=!1,videoenabled=!1,myusername=null,yourusername=null,doSimulcast="yes"===getQueryStringValue("simulcast")||"true"===getQueryStringValue("simulcast"),doSimulcast2="yes"===getQueryStringValue("simulcast2")||"true"===getQueryStringValue("simulcast2"),simulcastStarted=!1;$(document).ready(function(){Janus.init({debug:!0,callback:function(){$("#start").one("click",function(){return $(this).attr("disabled",!0).unbind("click"),Janus.isWebrtcSupported()?void(janus=new Janus({server:server,success:function(){janus.attach({plugin:"janus.plugin.videocall",opaqueId:opaqueId,success:function(e){$("#details").remove(),videocall=e,Janus.log("Plugin attached! ("+videocall.getPlugin()+", id="+videocall.getId()+")"),$("#videocall").removeClass("hide").show(),$("#login").removeClass("hide").show(),$("#registernow").removeClass("hide").show(),$("#register").click(registerUsername),$("#username").focus(),$("#start").removeAttr("disabled").html("Stop").click(function(){$(this).attr("disabled",!0),janus.destroy()})},error:function(e){Janus.error("  -- Error attaching plugin...",e),bootbox.alert("  -- Error attaching plugin... "+e)},consentDialog:function(e){Janus.debug("Consent dialog should be "+(e?"on":"off")+" now"),e?$.blockUI({message:'<div><img src="up_arrow.png"/></div>',css:{border:"none",padding:"15px",backgroundColor:"transparent",color:"#aaa",top:"10px",left:navigator.mozGetUserMedia?"-100px":"300px"}}):$.unblockUI()},mediaState:function(e,t){Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now"),$("#videoleft").parent().unblock()},onmessage:function(e,t){Janus.debug(" ::: Got a message :::"),Janus.debug(e);var a=e.result;if(null!==a&&void 0!==a){if(void 0!==a.list&&null!==a.list){var i=a.list;Janus.debug("Got a list of registered peers:"),Janus.debug(i);for(var n in i)Janus.debug("  >> ["+i[n]+"]")}else if(void 0!==a.event&&null!==a.event){var r=a.event;if("registered"===r)myusername=a.username,Janus.log("Successfully registered as "+myusername+"!"),$("#youok").removeClass("hide").show().html("Registered as '"+myusername+"'"),videocall.send({message:{request:"list"}}),$("#phone").removeClass("hide").show(),$("#call").unbind("click").click(doCall),$("#peer").focus();else if("calling"===r)Janus.log("Waiting for the peer to answer..."),bootbox.alert("Waiting for the peer to answer...");else if("incomingcall"===r)Janus.log("Incoming call from "+a.username+"!"),yourusername=a.username,bootbox.hideAll(),incoming=bootbox.dialog({message:"Incoming call from "+yourusername+"!",title:"Incoming call",closeButton:!1,buttons:{success:{label:"Answer",className:"btn-success",callback:function(){incoming=null,$("#peer").val(a.username).attr("disabled",!0),videocall.createAnswer({jsep:t,media:{data:!0},simulcast:doSimulcast,success:function(e){Janus.debug("Got SDP!"),Janus.debug(e);var t={request:"accept"};videocall.send({message:t,jsep:e}),$("#peer").attr("disabled",!0),$("#call").removeAttr("disabled").html("Hangup").removeClass("btn-success").addClass("btn-danger").unbind("click").click(doHangup)},error:function(e){Janus.error("WebRTC error:",e),bootbox.alert("WebRTC error... "+JSON.stringify(e))}})}},danger:{label:"Decline",className:"btn-danger",callback:function(){doHangup()}}}});else if("accepted"===r){bootbox.hideAll();var o=a.username;
null===o||void 0===o?Janus.log("Call started!"):(Janus.log(o+" accepted the call!"),yourusername=o),t&&videocall.handleRemoteJsep({jsep:t}),$("#call").removeAttr("disabled").html("Hangup").removeClass("btn-success").addClass("btn-danger").unbind("click").click(doHangup)}else if("update"===r)t&&("answer"===t.type?videocall.handleRemoteJsep({jsep:t}):videocall.createAnswer({jsep:t,media:{data:!0},success:function(e){Janus.debug("Got SDP!"),Janus.debug(e);var t={request:"set"};videocall.send({message:t,jsep:e})},error:function(e){Janus.error("WebRTC error:",e),bootbox.alert("WebRTC error... "+JSON.stringify(e))}}));else if("hangup"===r)Janus.log("Call hung up by "+a.username+" ("+a.reason+")!"),bootbox.hideAll(),videocall.hangup(),null!==spinner&&void 0!==spinner&&spinner.stop(),$("#waitingvideo").remove(),$("#videos").hide(),$("#peer").removeAttr("disabled").val(""),$("#call").removeAttr("disabled").html("Call").removeClass("btn-danger").addClass("btn-success").unbind("click").click(doCall),$("#toggleaudio").attr("disabled",!0),$("#togglevideo").attr("disabled",!0),$("#bitrate").attr("disabled",!0),$("#curbitrate").hide(),$("#curres").hide();else if("simulcast"===r){var s=a.substream,d=a.temporal;(null!==s&&void 0!==s||null!==d&&void 0!==d)&&(simulcastStarted||(simulcastStarted=!0,addSimulcastButtons("vp8"===a.videocodec||"h264"===a.videocodec)),updateSimulcastButtons(s,d))}}}else{var l=e.error;bootbox.alert(l),l.indexOf("already taken")>0&&($("#username").removeAttr("disabled").val(""),$("#register").removeAttr("disabled").unbind("click").click(registerUsername)),videocall.hangup(),null!==spinner&&void 0!==spinner&&spinner.stop(),$("#waitingvideo").remove(),$("#videos").hide(),$("#peer").removeAttr("disabled").val(""),$("#call").removeAttr("disabled").html("Call").removeClass("btn-danger").addClass("btn-success").unbind("click").click(doCall),$("#toggleaudio").attr("disabled",!0),$("#togglevideo").attr("disabled",!0),$("#bitrate").attr("disabled",!0),$("#curbitrate").hide(),$("#curres").hide(),null!==bitrateTimer&&null!==bitrateTimer&&clearInterval(bitrateTimer),bitrateTimer=null}},onlocalstream:function(e){if(Janus.debug(" ::: Got a local stream :::"),Janus.debug(e),$("#videos").removeClass("hide").show(),0===$("#myvideo").length&&$("#videoleft").append('<video class="rounded centered" id="myvideo" width=320 height=240 autoplay playsinline muted="muted"/>'),Janus.attachMediaStream($("#myvideo").get(0),e),$("#myvideo").get(0).muted="muted","completed"!==videocall.webrtcStuff.pc.iceConnectionState&&"connected"!==videocall.webrtcStuff.pc.iceConnectionState)if($("#videoleft").parent().block({message:"<b>Publishing...</b>",css:{border:"none",backgroundColor:"transparent",color:"white"}}),$("#videoright").append('<video class="rounded centered" id="waitingvideo" width=320 height=240 />'),null==spinner){var t=document.getElementById("videoright");spinner=new Spinner({top:100}).spin(t)}else spinner.spin();var a=e.getVideoTracks();null===a||void 0===a||0===a.length?($("#myvideo").hide(),0===$("#videoleft .no-video-container").length&&$("#videoleft").append('<div class="no-video-container"><i class="fa fa-video-camera fa-5 no-video-icon"></i><span class="no-video-text">No webcam available</span></div>')):($("#videoleft .no-video-container").remove(),$("#myvideo").removeClass("hide").show())},onremotestream:function(e){Janus.debug(" ::: Got a remote stream :::"),Janus.debug(e);var t=!1;0===$("#remotevideo").length&&(t=!0,$("#videoright").append('<video class="rounded centered hide" id="remotevideo" width=320 height=240 autoplay playsinline/>'),$("#remotevideo").bind("playing",function(){$("#waitingvideo").remove(),this.videoWidth&&$("#remotevideo").removeClass("hide").show(),null!==spinner&&void 0!==spinner&&spinner.stop(),spinner=null;var e=this.videoWidth,t=this.videoHeight;$("#curres").removeClass("hide").text(e+"x"+t).show()}),$("#callee").removeClass("hide").html(yourusername).show()),Janus.attachMediaStream($("#remotevideo").get(0),e);var a=e.getVideoTracks();null===a||void 0===a||0===a.length?($("#remotevideo").hide(),0===$("#videoright .no-video-container").length&&$("#videoright").append('<div class="no-video-container"><i class="fa fa-video-camera fa-5 no-video-icon"></i><span class="no-video-text">No remote video available</span></div>')):($("#videoright .no-video-container").remove(),$("#remotevideo").removeClass("hide").show()),t&&(audioenabled=!0,videoenabled=!0,$("#toggleaudio").html("Disable audio").removeClass("btn-success").addClass("btn-danger").unbind("click").removeAttr("disabled").click(function(){audioenabled=!audioenabled,audioenabled?$("#toggleaudio").html("Disable audio").removeClass("btn-success").addClass("btn-danger"):$("#toggleaudio").html("Enable audio").removeClass("btn-danger").addClass("btn-success"),videocall.send({message:{request:"set",audio:audioenabled}})}),$("#togglevideo").html("Disable video").removeClass("btn-success").addClass("btn-danger").unbind("click").removeAttr("disabled").click(function(){videoenabled=!videoenabled,videoenabled?$("#togglevideo").html("Disable video").removeClass("btn-success").addClass("btn-danger"):$("#togglevideo").html("Enable video").removeClass("btn-danger").addClass("btn-success"),videocall.send({message:{request:"set",video:videoenabled}})}),$("#toggleaudio").parent().removeClass("hide").show(),$("#bitrateset").html("Bandwidth"),$("#bitrate a").unbind("click").removeAttr("disabled").click(function(){var e=$(this).attr("id"),t=1e3*parseInt(e);return 0===t?Janus.log("Not limiting bandwidth via REMB"):Janus.log("Capping bandwidth to "+t+" via REMB"),$("#bitrateset").html($(this).html()).parent().removeClass("open"),videocall.send({message:{request:"set",bitrate:t}}),!1}),"chrome"!==Janus.webRTCAdapter.browserDetails.browser&&"firefox"!==Janus.webRTCAdapter.browserDetails.browser&&"safari"!==Janus.webRTCAdapter.browserDetails.browser||($("#curbitrate").removeClass("hide").show(),bitrateTimer=setInterval(function(){var e=videocall.getBitrate();$("#curbitrate").text(e);var t=$("#remotevideo").get(0).videoWidth,a=$("#remotevideo").get(0).videoHeight;t>0&&a>0&&$("#curres").removeClass("hide").text(t+"x"+a).show()},1e3)))},ondataopen:function(e){Janus.log("The DataChannel is available!"),$("#videos").removeClass("hide").show(),$("#datasend").removeAttr("disabled")},ondata:function(e){Janus.debug("We got data from the DataChannel! "+e),$("#datarecv").val(e)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::"),$("#myvideo").remove(),$("#remotevideo").remove(),$("#videoleft").parent().unblock(),$(".no-video-container").remove(),$("#callee").empty().hide(),yourusername=null,$("#curbitrate").hide(),$("#curres").hide(),$("#videos").hide(),$("#toggleaudio").attr("disabled",!0),$("#togglevideo").attr("disabled",!0),$("#bitrate").attr("disabled",!0),$("#curbitrate").hide(),$("#curres").hide(),null!==bitrateTimer&&null!==bitrateTimer&&clearInterval(bitrateTimer),bitrateTimer=null,$("#waitingvideo").remove(),$("#videos").hide(),simulcastStarted=!1,$("#simulcast").remove(),$("#peer").removeAttr("disabled").val(""),$("#call").removeAttr("disabled").html("Call").removeClass("btn-danger").addClass("btn-success").unbind("click").click(doCall)}})},error:function(e){Janus.error(e),bootbox.alert(e,function(){window.location.reload()})},destroyed:function(){window.location.reload()}})):void bootbox.alert("No WebRTC support... ")})}})}),function(){"use strict";function e(e,t,a,i,n,r){function o(e,t,a,n,r,o){var s={title:"Video",type:"Video",icon:"video",imageBackground:{"background-image":"url('"+i.baseUrl+r+"')","background-size":l+"00% 100%"},imageCSSClass:"channel"+(o+1),config:{deviceId:e,url:t,vlcUrl:a,janusStreamIndex:n},rowspan:3};return u.push(s),s}function s(){return 0==u.length?void(p=!1):(p=!0,c=(new Date).getTime(),void t(function(){angular.forEach(u,function(e,t){if(t<i.list.length){var a="url('"+i.baseUrl+i.list[t].mosaic+"?"+c+"')";e.imageBackground["background-image"]=a}}),s()},d))}var d=2e3,l=16,c=0,u=[],m=[],v={Devices:{title:"views.devices.title",icon:"views.devices.icon",category:"dialog.view-selection.tabs.miscellaneous"},Graphics:{title:"views.graphics.title",icon:"views.graphics.icon",category:"dialog.view-selection.tabs.miscellaneous"},Numerical:{title:"views.numerical.title",icon:"views.numerical.icon",category:"dialog.view-selection.tabs.miscellaneous"},Empty:{title:"views.empty.title",icon:"views.empty.icon",category:"dialog.view-selection.tabs.miscellaneous"},Ephemeride:{title:"views.ephemeride.title",icon:"views.ephemeride.icon",category:"dialog.view-selection.tabs.miscellaneous"},Generic:{title:"views.generic.title",icon:"views.generic.icon",category:"dialog.view-selection.tabs.miscellaneous"},Message:{title:"views.message.title",icon:"views.message.icon",category:"dialog.view-selection.tabs.miscellaneous"},Casino:{title:"views.casino.title",icon:"views.casino.icon",category:"dialog.view-selection.tabs.miscellaneous"},"Casino - Add event":{title:"views.casino.add-event.title",icon:"views.casino.add-event.icon",category:"dialog.view-selection.tabs.miscellaneous"},EFPos:{title:"views.pefpos.title",icon:"views.pefpos.icon",category:"dialog.view-selection.tabs.miscellaneous"},EFMet:{title:"views.pefmet.title",icon:"views.pefmet.icon",category:"dialog.view-selection.tabs.miscellaneous"},EFTss:{title:"views.peftss.title",icon:"views.peftss.icon",category:"dialog.view-selection.tabs.miscellaneous"},EFAum:{title:"views.pefaum.title",icon:"views.pefaum.icon",category:"dialog.view-selection.tabs.miscellaneous"},"Video Call":{title:"views.video-call.title",icon:"video",category:"dialog.view-selection.tabs.miscellaneous"},Menu:{title:"views.menu.title",icon:"views.menu.icon",category:"dialog.view-selection.tabs.miscellaneous"},Attitude:{title:"views.attitude.title",icon:"views.attitude.icon",category:"dialog.view-selection.tabs.navigation"},GPS:{title:"views.gps.title",icon:"views.gps.icon",category:"dialog.view-selection.tabs.navigation"},"Landing At":{title:"views.landing.title",icon:"views.landing.icon",category:"dialog.view-selection.tabs.navigation"},Navigation:{title:"views.navigation.title",icon:"views.navigation.icon",category:"dialog.view-selection.tabs.navigation"},Map:{title:"views.map.title",icon:"views.map.icon",category:"dialog.view-selection.tabs.navigation"},Mobile:{title:"views.mobile.title",icon:"views.mobile.icon",category:"dialog.view-selection.tabs.navigation"},Station:{title:"views.station.title",icon:"views.station.icon",category:"dialog.view-selection.tabs.navigation"},Route:{title:"views.route.title",icon:"views.route.icon",category:"dialog.view-selection.tabs.navigation"},ADCP:{title:"views.adcp.title",icon:"views.adcp.icon",category:"dialog.view-selection.tabs.scientific"},Anemometer:{title:"views.anemometer.title",icon:"views.anemometer.icon",category:"dialog.view-selection.tabs.scientific"},Flow:{title:"views.flow.title",icon:"views.flow.icon",category:"dialog.view-selection.tabs.scientific"},Depth:{title:"views.depth.title",icon:"views.depth.icon",category:"dialog.view-selection.tabs.scientific"},"Ferrybox science":{title:"views.ferrybox-science.title",icon:"views.ferrybox-science.icon",category:"dialog.view-selection.tabs.scientific"},"Ferrybox fluo":{title:"views.ferrybox-fluo.title",icon:"views.ferrybox-fluo.icon",category:"dialog.view-selection.tabs.scientific"},Gravimeter:{title:"views.gravimeter.title",icon:"views.gravimeter.icon",category:"dialog.view-selection.tabs.scientific"},Kss31:{title:"views.kss31.title",icon:"views.kss31.icon",category:"dialog.view-selection.tabs.scientific"},Magnetometer:{title:"views.magnetometer.title",icon:"views.magnetometer.icon",category:"dialog.view-selection.tabs.scientific"},Weather:{title:"views.weather.title",icon:"views.weather.icon",category:"dialog.view-selection.tabs.scientific"},"Hull sound speed":{title:"views.hullsoundspeed.title",icon:"views.hullsoundspeed.icon",category:"dialog.view-selection.tabs.scientific"},"Haul composition":{title:"views.haul-composition.title",icon:"views.haul-composition.icon",category:"dialog.view-selection.tabs.scientific"},Species:{title:"views.species.title",icon:"views.species.icon",category:"dialog.view-selection.tabs.scientific"},Multibeam:{title:"views.multibeam.title",icon:"views.multibeam.icon",category:"dialog.view-selection.tabs.scientific"},Thermometer:{title:"views.thermometer.title",icon:"views.thermometer.icon",category:"dialog.view-selection.tabs.scientific"},Thermosal:{title:"views.thermosal.title",icon:"views.thermosal.icon",category:"dialog.view-selection.tabs.scientific"},"Ferrybox technic":{title:"views.ferrybox-technic.title",icon:"views.ferrybox-technic.icon",category:"dialog.view-selection.tabs.technic"},Trawl:{title:"views.trawl.title",icon:"views.trawl.icon",category:"dialog.view-selection.tabs.technic"},Trawling:{title:"views.trawling.title",icon:"views.trawling.icon",category:"dialog.view-selection.tabs.technic"},"Funes winch":{title:"views.funes-winch.title",icon:"views.funes-winch.icon",category:"dialog.view-selection.tabs.technic"},Winch:{title:"views.winch.title",icon:"views.winch.icon",category:"dialog.view-selection.tabs.technic"},"Winch Info":{title:"views.winch-info.title",icon:"views.winch-info.icon",category:"dialog.view-selection.tabs.technic"},"Propulsion Tl":{title:"views.propulsion.title",icon:"views.propulsion.icon",category:"dialog.view-selection.tabs.technic"},"Propulsion At":{title:"views.propulsion.title",icon:"views.propulsion.icon",category:"dialog.view-selection.tabs.technic"},"Propulsion Pp":{title:"views.propulsion.title",icon:"views.propulsion.icon",category:"dialog.view-selection.tabs.technic"},"Winch Alarm Pp":{title:"views.winchAlarmPp.title",icon:"views.winchAlarmPp.icon",category:"dialog.view-selection.tabs.technic"},"Kley state":{title:"views.kley-state.title",icon:"views.kley-state.icon",category:"dialog.view-selection.tabs.technic"},Debug:{title:"views.debug.title",icon:"views.debug.icon",category:"dialog.view-selection.tabs.debug"}},p=!1;this.getBackupCss=function(e){return{"background-image":"url('"+i.baseUrl+m[e]+"?"+c+"')"}},this.stopRefreshMosaic=function(){u=[]},this.getViewList=function(){var t={"dialog.view-selection.tabs.miscellaneous":[],"dialog.view-selection.tabs.navigation":[],"dialog.view-selection.tabs.scientific":[],"dialog.view-selection.tabs.technic":[],"dialog.view-selection.tabs.video":[],"dialog.view-selection.tabs.debug":[]},d=a.getDeviceList(),l=n.getCurrentUser();return angular.forEach(r,function(a){var i=v[a.type];if(!(angular.isUndefined(i)||"Empty"===a.type&&"/static"!=e.path()||angular.isDefined(a.role)&&(angular.isUndefined(l)||!l.hasAuthority(a.role)))){var n={type:a.type,title:angular.isDefined(a.title)?a.title:i.title,icon:angular.isDefined(a.icon)?a.icon:i.icon,config:angular.isDefined(a.config)?a.config:{}};if("Generic"==a.type&&(n.config.title=a.title,n.config.icon=a.icon,n.config.deviceId=a.devicePattern),angular.isDefined(a.navId)&&(n.config.navId=a.navId),angular.isDefined(a.weatherId)&&(n.config.weatherId=a.weatherId),angular.isDefined(a.frameName)){var r=angular.isDefined(a.devicePattern)?a.devicePattern:"w*",o=new RegExp(r);angular.forEach(d,function(e){if(o.test(e.id)&&angular.isDefined(e.frameList[a.frameName])){var r={};angular.copy(n,r),r.config.deviceId=e.id,r.config.frameId=a.frameName,t[angular.isDefined(a.category)?a.category:i.category].push(r)}}),"TEST"===a.frameName&&(n.config.deviceId="TEST",n.config.frameId=a.frameName,t[angular.isDefined(a.category)?a.category:i.category].push(n))}else t[angular.isDefined(a.category)?a.category:i.category].push(n)}}),u=[],angular.forEach(i.list,function(e,a){t["dialog.view-selection.tabs.video"].push(o(e.title,e.url,e.vlcUrl,e.janusStreamIndex,e.mosaic,e.mosaicIndex))}),p||s(),m=[],angular.forEach(i.list,function(e,t){m.includes(e.mosaic)||m.push(e.mosaic)}),t},this.getMosaicList=function(){return m}}e.$inject=["$location","$timeout","acquisitionService","VIDEO_PARAMS","userService","VIEW_LIST"],angular.module("tsa.services").service("viewProvider",e)}(),function(){"use strict";function e(e,t,a,i,n,r,o,s){function d(){void 0!==I&&I.destroy(),void 0!==S&&S.destroy(),p=document.getElementById(m.canvasId1),void 0!=p&&(I=Chart.Scatter(p,{data:C,options:E})),g=document.getElementById(m.canvasId2),void 0!=g&&(S=Chart.Scatter(g,{data:T,options:E}))}function l(){var e=r.registerForDevice(m.deviceId);b=e.registerForFrame(w),b.promise.then({},{},function(t){m.dataMissing&&(m.dataMissing=!1,C.datasets[0].borderColor=y,T.datasets[0].borderColor=y),v=t.timestamp,m.dateContent=v,m.dateColor="rgb(26, 117, 174)";var a=t.value[n.BIN_LENGTH],i=t.value[n.SOUNDING],r=0,o=e.frameList[w][n.EW_VEL],s=o.missingValue;C.datasets[0].data=[],angular.forEach(t.value[n.EW_VEL],function(e){(i<=0||r*a<i)&&(e==s&&(e=null),C.datasets[0].data.push({x:parseFloat(e),y:-r*a})),r++}),I.update(),r=0,o=e.frameList[w][n.NS_VEL],s=o.missingValue,T.datasets[0].data=[],angular.forEach(t.value[n.NS_VEL],function(e){(i<=0||r*a<i)&&(e==s&&(e=null),T.datasets[0].data.push({x:parseFloat(e),y:-r*a})),r++}),S.update()})}function c(){f=e(function(){var e=r.registerForDevice(m.deviceId).periodList[w];angular.isUndefined(e)&&(e=1e3),angular.isDefined(v)&&o.getServerTime().time-v>5*e&&(m.dataMissing=!0,m.dateContent="no data",m.dateColor="#BDBDBD",C.datasets[0].borderColor="#BDBDBD",T.datasets[0].borderColor="#BDBDBD",I.update(),S.update())},1e3)}function u(){s.subscribe(a,function(e,t){E.scales.xAxes[0].gridLines.color=t.gridLinesColor,E.scales.yAxes[0].gridLines.color=t.gridLinesColor,d()})}var m=this;m.logger=i.getInstance("ADCP-tsa-view"),m.canvasId1="canvas-winch-1-"+m.cardId,m.canvasId2="canvas-winch-2-"+m.cardId,m.dataMissing=!0,m.dateContent="no data",m.dateColor="#BDBDBD";var v,p,g,f,h,b,w,y="rgb(26, 117, 174)",I=void 0,S=void 0,C={datasets:[{label:"Data 1",xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:y,data:[]}]},T={datasets:[{label:"Data 1",xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:y,data:[]}]},E={animation:!1,maintainAspectRatio:!1,legend:{display:!1},tooltips:{enabled:!1},elements:{line:{borderWidth:2,fill:!1,tension:0},point:{radius:2,borderWidth:2}},scales:{xAxes:[{type:"linear",gridLines:{zeroLineColor:"#9E9E9E",color:"#BDBDBD"}}],yAxes:[{id:"y-axis-1",position:"left",type:"linear",display:!0,scaleLabel:{display:!1,fontColor:"rgb(33,150,243)",labelString:"Data 1"},gridLines:{zeroLineColor:"#9E9E9E",color:"#BDBDBD"},ticks:{beginAtZero:!0,suggestedMax:0,suggestedMin:-10}}]}};m.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void m.logger.error("config and/or deviceId and/or frameId not defined!"):(m.deviceId=this.config.deviceId,w=this.config.frameId,void(h=t(function(){d(),l(),c(),u()},500)))},m.$onDestroy=function(){angular.isDefined(b)&&r.registerForDevice(m.deviceId).unregisterForFrame(b),angular.isDefined(h)&&t.cancel(h),angular.isDefined(f)&&e.cancel(f)}}e.$inject=["$interval","$timeout","$scope","$log","ADCP","acquisitionService","statusService","themeService"],function(){angular.module("tsa.tsaViews.adcp",[]).component("tsaAdcp",{templateUrl:"app/tsa-views/adcp/adcp.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}()}(),function(){"use strict";function e(e,t,a,i,n){function r(){m=document.getElementById(c.canvasId),null!=m&&(v=new createjs.Stage(m),p=new createjs.Container,g=new createjs.Container,v.addChild(p,g),a.$watch(function(){return m.offsetHeight},function(){o()}),a.$watch(function(){return m.offsetWidth},function(){o()}),o())}function o(){if(null!=m){f=m.offsetWidth,h=m.offsetHeight,m.setAttribute("width",f),m.setAttribute("height",h),angular.element(m).parent().find("tsa-data-view .value").css({"font-size":""+h/200+"em"}),angular.element(m).parent().find("tsa-data-view").css({width:""+Math.round(h/3)+"px !important","max-width":""+Math.round(h/3)+"px","background-color":"green"}),v.x=f/2,v.y=h/2;var e=h/100;v.scaleX=v.scaleY=e,s(),p.cache(-f/2,-h/2,f,h,e),d(),l(),v.update()}}function s(){p.removeAllChildren();var e=i.createVessel(c.colors.tick);e.scaleX=.6,e.scaleY=.95;var t=i.createBackRudder(c.colors.background);t.y=25,t.scaleX=t.scaleY=.18;var a=i.createBackGauge(c.colors.background);a.y=18,a.scaleX=.4,a.scaleY=.3;var n=i.createBackGauge(c.colors.background);n.y=-38,n.scaleX=.4,n.scaleY=.3;var r=i.createBackGauge(c.colors.background);r.y=-10,r.scaleX=.4,r.scaleY=.3,r.rotation=270,p.addChild(e,t,a,n,r)}function d(){g.removeAllChildren();var e=c.colors.rudder;Math.abs(Math.round(c.angle.value))>0&&(e=c.angle.value>0?c.colors.red:c.colors.green);var t=i.createRudder(e);t.y=25,t.scaleX=t.scaleY=.18,t.rotation=c.angle.value;var a=i.createGaugge(c.colors.tick,c.colors.zero,c.frontPropAngle.value,c.colors.green,c.colors.red);a.y=18,a.scaleX=.4,a.scaleY=.3;var n=i.createGaugge(c.colors.tick,c.colors.zero,c.frontTrans.value,c.colors.green,c.colors.red);n.y=-38,n.scaleX=.4,n.scaleY=.3;var r=i.createGaugge(c.colors.tick,c.colors.zero,100*c.mainLeft.value/150,c.colors.forward,c.colors.backward);r.y=-10,r.scaleX=.4,r.scaleY=.3,r.rotation=270,g.addChild(t,a,n,r)}function l(){f=m.offsetWidth,h=m.offsetHeight;var e=5*h/100;c.frontTrans.x=f/2+25*h/100,c.frontTrans.y=12*h/100-e,c.mainLeft.x=c.frontTrans.x,c.mainLeft.y=40*h/100-e,c.angle.x=c.frontTrans.x,c.angle.y=82*h/100-e}var c=this,u="[atPropulsionController] ";c.canvasId="canvas-atpropulsion-"+c.cardId;var m,v,p,g,f,h;c.readyToDraw=!1,c.colors={background:"#CCCCCC",zero:"#EE2222",tick:"#888888",rudder:"#000000",green:"#11CC11",red:"#EE2222",forward:"#1111DD",backward:"#000000",funkyBackground:"#F3BF52"},c.themeChanged=function(e,t){console.log("propulsion themechanged")},n.subscribe(a,c.themeChanged),c.$onInit=function(){return console.log(u+"$onInit: deviceId = "+(this.config?this.config.deviceId:"config undefined")),void 0==this.config||void 0==this.config.deviceId?void console.error(u+"device Id not found!"):(c.deviceId=this.config.deviceId,c.device=e.registerForDevice(c.deviceId),c.frameId="atpropulsion",c.frontTrans={id:"fronttrans"},c.frontPropAngle={id:"frontpropangle"},c.mainLeft={id:"mainleft"},c.mainRight={id:"mainright"},c.angle={id:"angle"},c.fontsize=1,c.frameListener=e.registerForDevice(c.deviceId).registerForFrame(c.frameId),c.frameListener.promise.then({},{},function(e){c.frontTrans.value=e.value[c.frontTrans.id],c.frontPropAngle.value=e.value[c.frontPropAngle.id],c.mainLeft.value=e.value[c.mainLeft.id],c.mainRight.value=e.value[c.mainRight.id],c.angle.value=e.value[c.angle.id],c.readyToDraw&&(d(),v.update())}),void t(function(){r(),c.readyToDraw=!0},500))},c.$onDestroy=function(){angular.isDefined(c.frameListener)&&e.registerForDevice(c.deviceId).unregisterForFrame(c.frameListener)}}e.$inject=["acquisitionService","$timeout","$scope","easelJsUtils","themeService"],angular.module("tsa.tsaViews.atpropulsion",[]).component("tsaAtPropulsion",{templateUrl:"app/tsa-views/atpropulsion/atpropulsion.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a){function i(e){var a=e[t.ROLL],i=e[t.PITCH];angular.isUndefined(r.list)||r.list<-90?(r.list=a,r.trim=i):(r.list=.999167*r.list+833e-6*a,r.trim=.999167*r.trim+833e-6*i)}var n,r=this;r.logger=e.getInstance("Attitude-tsa-view"),r.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void r.logger.error("config and/or deviceId and/or frameId not defined!"):(r.deviceId=this.config.deviceId,r.frameId=this.config.frameId,r.heading=t.HEADING,r.roll=t.ROLL,r.pitch=t.PITCH,r.heave=t.HEAVE,n=a.registerForDevice(r.deviceId).registerForFrame(r.frameId),void n.promise.then({},{},function(e){i(e.value)}))},r.$onDestroy=function(){angular.isDefined(n)&&a.registerForDevice(r.deviceId).unregisterForFrame(n)}}e.$inject=["$log","ATTITUDE","acquisitionService"],angular.module("tsa.tsaViews.attitude",[]).component("tsaAttitude",{templateUrl:"app/tsa-views/attitude/attitude.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n){var r,o=this;o.logger=e.getInstance("casino-tsa-view"),o.casinoLoading=!1,o.casinoErrorConnect,o.casinoErrorLoad,o.selectedCruise,o.eventsListToDisplay=[],o.period="24",o.casinoCanConnect=function(){return!o.config.connectionParams||!o.config.connectionParams.url.trim()||!o.config.connectionParams.login.trim()||!o.config.connectionParams.password.trim()||o.casinoLoading},o.casinoConnection=function(){o.casinoLoading=!0,n.connect(o.config.connectionParams.url,o.config.connectionParams.login,o.config.connectionParams.password).then(function(){o.casinoErrorConnect=!1,o.refreshCruise(!0)})},o.refreshCruise=function(e){o.selectedCruise=void 0,n.getCurrentCruise().then(function(e){o.casinoLoading=!1,e&&1===e.length?(o.casinoErrorLoad=!1,o.selectedCruise=e[0],o.updateEventsTable()):o.casinoErrorLoad=!0})["catch"](function(){o.casinoErrorConnect=!0,o.casinoLoading=!1})},o.updateEventsTable=function(){var e="false",t=o.config.limit;parseInt(o.period)>0&&(e="true",t=o.period),n.getCruiseEvents(o.selectedCruise.FullName,t,e).then(function(e){o.eventsListToDisplay=e})},o.$onInit=function(){o.casinoConnection(),r=t(function(){angular.isDefined(o.selectedCruise)&&o.updateEventsTable()},8e3)},o.$onDestroy=function(){angular.isDefined(r)&&t.cancel(r)}}e.$inject=["$log","$interval","$rootScope","$scope","casinoService"],angular.module("tsa.tsaViews.casino",[]).component("tsaCasino",{templateUrl:"app/tsa-views/casino/casino.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s){var d=this;d.logger=e.getInstance("casino-tsa-view"),d.casinoLoading=!1,d.casinoErrorConnect,d.casinoErrorLoad,d.error,d.isFollow=!1,d.validExitTitle=void 0,d.validExitMsg=void 0,d.selectedCruise,d.casinoEvent=new o,d.operationId=new s,d.deviceId,d.listCasinoDevices=void 0,d.listDeviceActions=void 0,d.eventTypeEnum={PHA:"PHA",OPE:"OPE",OBS:"OBS"},d.phaseTypeEnum={PROFIL:"PROFIL",STATION:"STATION",TRANSIT:"TRANSIT",GIRATION:"GIRATION",ESCALE:"ESCALE"},d.casinoCanConnect=function(){return!d.config.connectionParams||!d.config.connectionParams.url.trim()||!d.config.connectionParams.login.trim()||!d.config.connectionParams.password.trim()||d.casinoLoading},d.casinoConnection=function(){d.casinoLoading=!0,r.connect(d.config.connectionParams.url,d.config.connectionParams.login,d.config.connectionParams.password).then(function(){d.refreshCruise(!0)})},d.initErrors=function(){d.casinoErrorConnect=!1,d.casinoErrorLoad=!1,d.error=void 0},d.onResetClick=function(){d.isFollow?n.showValidation(d.validExitTitle,d.validExitMsg).then(function(){d.onResetForm()},function(){}):d.onResetForm()},d.onResetForm=function(){d.isFollow=!1,d.updateValidExit(),d.initErrors(),d.listDeviceActions=void 0,d.casinoEvent.init(),d.operationId.init(),d.updatePrefixOperation()},d.onSubmit=function(){if(d.initErrors(),d.selectedCruise){d.casinoEvent.operationId=d.operationId.getStringOperationId(),d.casinoEvent.cleanByType();var e=new Date;d.casinoEvent.eventDate=e.toISOString(),r.postCruiseEvent(d.selectedCruise.FullName,d.casinoEvent).then(function(e){var t=d.checkFollow();t>-1?(d.updateAction(d.listDeviceActions[t]),d.isFollow=!0,d.updateValidExit()):d.onResetForm()})["catch"](function(e){400===e.status?d.error=e.data:d.casinoErrorConnect=!0})}},d.checkFollow=function(){var e=-1;if("OPE"===d.casinoEvent.type&&d.listDeviceActions){var t=d.getActionIdx(d.casinoEvent.actionCode);t>-1&&t<d.listDeviceActions.length-1&&(e=t+1)}return e},d.getActionIdx=function(e){if(e&&d.listDeviceActions)for(var t=0;t<d.listDeviceActions.length;t++)if(d.listDeviceActions[t].code===e)return t;return-1},d.refreshCruise=function(e){d.onResetForm(),r.getCurrentCruise().then(function(e){d.casinoLoading=!1,e&&1===e.length?(d.selectedCruise=e[0],d.updateCruise()):d.casinoErrorLoad=!0})["catch"](function(){d.casinoErrorConnect=!0,d.casinoLoading=!1})},d.updateCruise=function(){d.updateListCasinoDevices(),d.updatePrefixOperation()},d.updatePrefixOperation=function(){d.operationId.prefix="",d.selectedCruise&&(d.operationId.updatePrefix(d.selectedCruise.OperationPrefix,d.casinoEvent.deviceCode),d.updateNumberOperation())},d.updateNumberOperation=function(){d.operationId.updateNumber(void 0),d.selectedCruise&&""!=d.operationId.prefix&&""!=d.casinoEvent.deviceCode&&r.getLastOperationId(d.selectedCruise.FullName,d.operationId.prefix).then(function(e){e&&1===e.length&&d.operationId.updateNumber(e[0].OperationId,d.operationId.prefix)})},d.updateListCasinoDevices=function(){d.listCasinoDevices=void 0,d.listDeviceActions=void 0,d.casinoEvent.initDevice(),d.selectedCruise&&r.getCruiseDevices(d.selectedCruise.FullName).then(function(e){d.listCasinoDevices=e})},d.updateDevice=function(e){d.casinoEvent.initDevice(),d.deviceId=void 0,e&&(d.deviceId=e.id,d.casinoEvent.deviceCode=e.code,d.casinoEvent.deviceFullName=e.name),d.updateListDeviceActions(),d.updatePrefixOperation()},d.updateListDeviceActions=function(){d.listDeviceActions=void 0,d.selectedCruise&&d.deviceId&&r.getDeviceActions(d.selectedCruise.FullName,d.deviceId).then(function(e){d.listDeviceActions=e})},d.updateAction=function(e){e&&(d.casinoEvent.initAction(),d.casinoEvent.actionCode=e.code,d.casinoEvent.actionFullName=e.name)},d.updateValidExit=function(){d.validExitTitle=void 0,d.validExitMsg=void 0,d.isFollow&&(d.validExitTitle=i("translate")("views.casino.add-event.follow-exit.title"),d.validExitMsg=i("translate")("views.casino.add-event.follow-exit.message"))},d.$onInit=function(){d.casinoConnection()},d.$onDestroy=function(){}}e.$inject=["$log","$rootScope","$scope","$filter","dialogService","casinoService","CasinoEvent","CasinoOperationId"],angular.module("tsa.tsaViews.casinoAddEvent",[]).component("tsaCasinoAddEvent",{templateUrl:"app/tsa-views/casino/casinoAddEvent.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n){var r=this;r.view="Devices",r.deviceList={},r.topicList={},r.stompConsole="",r.topiConsole="",r.topic=void 0;var o=void 0;r.currentTopic=void 0,r.bufferDeviceList={},r.configId="default",r.requestStack=void 0,r.restService=n,r.$onInit=function(){r.topicList=t.getTopicList(),r.deviceList=e.getDeviceList(),r.stompService=t,r.bufferDeviceList=a.getDataList(),r.requestStack=n.getRequestStack()},r.$onDestroy=function(){r.disconnectTopic()},r.startStompService=function(){t.start().then(function(){i.showToast("STOMP connection successful!")},function(e){i.showToast("STOMP connection error: "+e)})},r.stopStompService=function(){t.stop()},r.connectToTopic=function(){void 0!==r.topic&&(r.currentTopic="/topic/"+r.topic,o=t.registerForTopic(r.currentTopic),r.topicConsole="",o.promise.then({},{},function(e){r.topicConsole=JSON.stringify(e.data.headers)+"\n"+e.data.body+"\n"+r.topicConsole,r.topicConsole.length>5e4&&(r.topicConsole=r.topicConsole.substring(r.topicConsole.length/3))}))},r.disconnectTopic=function(){void 0!==o&&void 0!==r.currentTopic&&(t.unregisterForTopic(r.currentTopic,o),r.currentTopic=void 0,o=void 0)},r.clearTopicConsole=function(){r.topicConsole=""},r.cancelRequest=function(e){n.cancelRequest(e.id)}}e.$inject=["acquisitionService","stompService","acquisitionBufferService","dialogService","restService"],angular.module("tsa.tsaViews.debug",[]).component("tsaDebug",{templateUrl:"app/tsa-views/debug/debug.html",controllerAs:"ctrl",controller:e,bindings:{onChangeCardType:"&",cardId:"@"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d){function l(){var e=d.getChartOptions(m.scales[m.selectedScale].stepSize,!0);return e.scales.yAxes=[{id:"y-axis-1",gridLines:{color:m.theme.gridLinesColor},ticks:{beginAtZero:!0,suggestedMin:-10
}}],e}function c(){void 0!==g&&g.destroy();var e=document.getElementById(m.canvasId);e&&(g=Chart.Scatter(e,{data:f,options:l()}),u()),m.config.scale=m.selectedScale}function u(){var e=o.getServerTime().time;g.options.scales.xAxes[0].ticks.min=e-m.scales[m.selectedScale].scale,g.options.scales.xAxes[0].ticks.max=e;var t=m.scales[m.selectedScale].bufferId;f.datasets[0].data=[];var a=m.device.getData(m.frameId,m.dataId);void 0!==a&&angular.forEach(a.buffers[t].frames,function(e){f.datasets[0].data.push({x:e.timestamp,y:-e.value})}),g.update()}var m=this;m.logger=a.getInstance("depth-tsa-view"),m.canvasId="canvas-depth-"+m.cardId;var v,p;m.scales=d.scales,m.selectedScale="1 min",m.bufferLoading={};var g=void 0,f={datasets:[{label:"Data 1",xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:"rgb(26, 117, 174)",backgroundColor:"rgba(26, 117, 174, 0.3)",data:[]}]};m.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void m.logger.error("config and/or deviceId and/or frameId not defined!"):(m.deviceId=this.config.deviceId,m.frameId=this.config.frameId,m.dataId=r.SOUNDER,m.device=n.registerForDevice(m.deviceId),m.device.recordData(m.frameId,m.dataId),angular.isDefined(m.config.scale)&&(m.selectedScale=m.config.scale),p=e(h,200),void s.subscribe(i,function(e,t){m.theme=t,c()}))},m.$onDestroy=function(){m.device.stopRecordData(m.frameId,m.dataId),e.cancel(p),void 0!==v&&t.cancel(v)};var h=function(){if(void 0!==v&&t.cancel(v),angular.isDefined(m.device)&&angular.isDefined(m.device.getData(m.frameId,m.dataId))){var e=m.scales[m.selectedScale].bufferId;m.bufferLoading[m.selectedScale]=m.bufferLoading[m.selectedScale]?++m.bufferLoading[m.selectedScale]:1;var a=m.selectedScale,i=function(){m.bufferLoading[a]--,void 0!==g&&u()};m.device.getData(m.frameId,m.dataId).buffers[e].loadArchivedFrames().then(i,i)}c(),v=t(u,m.scales[m.selectedScale].scale/1e3)};m.onChangeXScale=h}e.$inject=["$timeout","$interval","$log","$scope","acquisitionService","NAVIGATION","statusService","themeService","graphUtils"],function(){angular.module("tsa.tsaViews.depth",[]).component("tsaDepth",{templateUrl:"app/tsa-views/depth/depth.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}()}(),function(){"use strict";function e(e,t,a,i){function n(e){var t=this;this.device=e,this.lastJSONMessageTime=void 0,this.isReceivingJSON=!1,this.JSONDataListener=this.device.subscribeToJSONData(),void 0!==this.JSONDataListener?this.JSONDataListener.promise.then({},{},function(e){t.lastJSONMessageTime=JSON.parse(e.data.body).acquisitionTime}):console.error(TAG+"error with the subscription to the JSON topic for the device: "+e.name)}function r(){angular.forEach(s.itemList,function(e){var t=i.getServerTime().time,a=0;angular.forEach(e.device.periodList,function(e){a=a<e?e:a}),void 0!==e.lastJSONMessageTime?e.isReceivingJSON=t-e.lastJSONMessageTime<=5*a:e.isReceivingJSON=!1})}function o(e){var t=[];angular.forEach(s.itemList,function(a){var i=!1;angular.forEach(e,function(e){e.id===a.device.id&&e.isEnabled&&(i=!0)}),i||(t.push(a),t.push(a),t.push(a),t.push(a),t.push(a))}),angular.forEach(t,function(e){e.device.unsubscribeToJSONData(e.JSONDataListener),s.itemList.splice(s.itemList.indexOf(e),1)}),angular.forEach(e,function(e){var t=!1;angular.forEach(s.itemList,function(a){e.id===a.device.id&&(t=!0)}),!t&&e.isEnabled&&s.itemList.push(new n(e))})}var s=this,d=e.getInstance("Device-tsa-view");s.itemList=[];var l,c;s.$onInit=function(){d.debug("init function"),o(a.getDeviceList()),l=a.registerForDeviceList(),l.promise.then({},{},o),c=t(r,1e3)},s.$onDestroy=function(){d.debug("destroy function"),angular.forEach(s.itemList,function(e){e.device.unsubscribeToJSONData(e.JSONDataListener)}),a.unregisterForDeviceList(l),void 0!==c&&t.cancel(c)}}e.$inject=["$log","$interval","acquisitionService","statusService"],angular.module("tsa.tsaViews.devices",[]).component("tsaDevices",{templateUrl:"app/tsa-views/devices/devices.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){function a(e,t){this.name=e,this.number=t}var i=this,n=e.getInstance("driverPreview-tsa-view");i.text="This is a driverPreview...",i.title="Driver Preview",i.driverList=[],t.getConverters().then(function(e){i.driverList=e}),i.driver={configuration:{id:"",header:"",driverClassName:"",fields:{},parameters:{regex:"",separator:","}},message:""},i.fieldList=[],i.addField=function(){i.fieldList.push(new a)},i.result=function(){angular.forEach(i.fieldList,function(e){i.driver.configuration.fields[e.name]=e.number}),t.postConvertersPreview(i.driver).then(function(e){angular.forEach(e.data,function(e,t){angular.forEach(i.fieldList,function(a){a.name===t&&(a.result=e)})})})},i.removeField=function(e){var t=i.fieldList.indexOf(e);t!=-1&&i.fieldList.splice(t,1)},i.$onInit=function(){n.debug("init function")},i.$onDestroy=function(){n.debug("destroy function")}}e.$inject=["$log","restService"],angular.module("tsa.tsaViews.driverPreview",[]).component("tsaDriverPreview",{templateUrl:"app/tsa-views/driverPreview/driverPreview.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){var a=this;a.logger=e.getInstance("tsa-ef-aum"),a.$onInit=function(){return angular.isUndefined(a.config)||angular.isUndefined(a.config.deviceId)||angular.isUndefined(a.config.frameId)?void a.logger.error("deviceId or/and frameId not defined!"):(a.deviceId=a.config.deviceId,a.frameId=a.config.frameId,void(a.PEFAUM=t))}}e.$inject=["$log","PEFAUM"],angular.module("tsa.tsaViews.EFAum",[]).component("tsaEfAum",{templateUrl:"app/tsa-views/ef-aum/ef-aum.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){var a=this;a.logger=e.getInstance("tsa-ef-met"),a.$onInit=function(){return angular.isUndefined(a.config)||angular.isUndefined(a.config.deviceId)||angular.isUndefined(a.config.frameId)?void a.logger.error("deviceId or/and frameId not defined!"):(a.deviceId=a.config.deviceId,a.frameId=a.config.frameId,void(a.PEFMET=t))}}e.$inject=["$log","PEFMET"],angular.module("tsa.tsaViews.EFMet",[]).component("tsaEfMet",{templateUrl:"app/tsa-views/ef-met/ef-met.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){var a=this;a.logger=e.getInstance("tsa-ef-pos"),a.$onInit=function(){return angular.isUndefined(a.config)||angular.isUndefined(a.config.deviceId)||angular.isUndefined(a.config.frameId)?void a.logger.error("deviceId or/and frameId!"):(a.deviceId=a.config.deviceId,a.frameId=a.config.frameId,void(a.PEFPOS=t))}}e.$inject=["$log","PEFPOS"],angular.module("tsa.tsaViews.EFPos",[]).component("tsaEfPos",{templateUrl:"app/tsa-views/ef-pos/ef-pos.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){var a=this;a.logger=e.getInstance("tsa-ef-tss"),a.$onInit=function(){return angular.isUndefined(a.config)||angular.isUndefined(a.config.deviceId)||angular.isUndefined(a.config.frameId)?void a.logger.error("deviceId or/and frameId not defined!"):(a.deviceId=a.config.deviceId,a.frameId=a.config.frameId,void(a.PEFTSS=t))}}e.$inject=["$log","PEFTSS"],angular.module("tsa.tsaViews.EFTss",[]).component("tsaEfTss",{templateUrl:"app/tsa-views/ef-tss/ef-tss.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o){var s=this;s.logger=e.getInstance("tsa-ephemeride"),s.luminosity="day",s.offset=0,s.times;var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];r.subscribe(t,function(e,t){r.getTheme().id===r.THEME.NIGHT.id?s.luminosity="night":s.luminosity="day"},!0),s.$onInit=function(){function e(e){s.latitude=e.value[n.LATITUDE].map(parseFloat),s.longitude=e.value[n.LONGITUDE].map(parseFloat),t(s.offset)}function t(e){var t=new Date;t.setTime(o.getServerTime().time),s.timeOffset=o.getLocalTimeZoneOffset()?o.getLocalTimeZoneOffset():"UTC",s.timeLabel=o.getLocalTimeZoneOffset()?"":"(UTC)",s.date=t,s.date.setDate(s.date.getDate()+e),s.day="date.day."+d[s.date.getDay()],s.nbDate=s.date.getDate(),s.month="date.month."+l[s.date.getMonth()],s.year=s.date.getFullYear();t.getTimezoneOffset()/60;s.saint=a.getSaint(s.date.getDate(),s.date.getMonth()+1),s.times=SunCalc.getTimes(s.date,s.latitude,s.longitude),s.moon=SunCalc.getMoonIllumination(s.date),s.moonImage="new-moon-"+s.luminosity+".png",s.moon.phase<1/16?s.moonImage="new-moon-"+s.luminosity+".png":s.moon.phase<3/16?s.moonImage="waxing-crescent-"+s.luminosity+".png":s.moon.phase<5/16?s.moonImage="first-quarter-"+s.luminosity+".png":s.moon.phase<7/16?s.moonImage="waxing-gibbous-"+s.luminosity+".png":s.moon.phase<9/16?s.moonImage="full-moon-"+s.luminosity+".png":s.moon.phase<.6875?s.moonImage="waning-gibbous-"+s.luminosity+".png":s.moon.phase<.8125?s.moonImage="last-quarter-"+s.luminosity+".png":s.moon.phase<.9375&&(s.moonImage="waning-crescent-"+s.luminosity+".png")}if(angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId))return void s.logger.error("config and/or deviceId and/or frameId not defined!");s.deviceId=this.config.deviceId,s.frameId=this.config.frameId,s.timeOffset=o.getLocalTimeZoneOffset()?o.getLocalTimeZoneOffset():"UTC",s.timeLabel=o.getLocalTimeZoneOffset()?"":"(UTC)";var r=i.registerForDevice(s.deviceId).registerForFrame(n.FRAME_SHIPNAV);r.promise.then({},{},e),s.nextDay=function(){s.offset++,t(s.offset)},s.prevDay=function(){s.offset--,t(s.offset)}}}e.$inject=["$log","$scope","ephemerideService","acquisitionService","NAVIGATION","themeService","statusService"],angular.module("tsa.tsaViews.ephemeride",[]).component("tsaEphemeride",{templateUrl:"app/tsa-views/ephemeride/ephemeride.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e){var t=(e.getInstance("EphemerideService"),this),a=31;t.ephemeride=new Array;for(var i=1;i<=a;i++)t.ephemeride[i]=new Array;return t.ephemeride[1][1]="Jour de l'an",t.ephemeride[1][2]="Ste Ella",t.ephemeride[1][3]="St Aubin",t.ephemeride[1][4]="St Hugues",t.ephemeride[1][5]="St Jeremie",t.ephemeride[1][6]="St Justin",t.ephemeride[1][7]="St Thierry",t.ephemeride[1][8]="St Alphonse",t.ephemeride[1][9]="St Gilles",t.ephemeride[1][10]="Ste Thérèse",t.ephemeride[1][11]="Toussaint",t.ephemeride[1][12]="Ste Florence",t.ephemeride[2][1]="St Basile",t.ephemeride[2][2]="St Théophane",t.ephemeride[2][3]="St Jaouen",t.ephemeride[2][4]="Ste Sandrine",t.ephemeride[2][5]="St Boris",t.ephemeride[2][6]="Ste Blandine",t.ephemeride[2][7]="St Martinien",t.ephemeride[2][8]="St Julien",t.ephemeride[2][9]="Ste Ingrid",t.ephemeride[2][10]="St Léger",t.ephemeride[2][11]="Défunts",t.ephemeride[2][12]="Ste Viviane",t.ephemeride[3][1]="Ste Geneviève",t.ephemeride[3][2]="St Blaise",t.ephemeride[3][3]="St Gwénola",t.ephemeride[3][4]="St Richard",t.ephemeride[3][5]="St Philippe",t.ephemeride[3][6]="St Kevin",t.ephemeride[3][7]="St Thomas",t.ephemeride[3][8]="Ste Lydie",t.ephemeride[3][9]="St Grégoire",t.ephemeride[3][10]="St Gérard",t.ephemeride[3][11]="St Hubert",t.ephemeride[3][12]="St Xavier",t.ephemeride[4][1]="St Odilon",t.ephemeride[4][2]="Ste Véronique",t.ephemeride[4][3]="St Casimir",t.ephemeride[4][4]="St Isidore",t.ephemeride[4][5]="St Sylvain",t.ephemeride[4][6]="Ste Clotilde",t.ephemeride[4][7]="St Florent",t.ephemeride[4][8]="St Jean-Marie",t.ephemeride[4][9]="Ste Rosalie",t.ephemeride[4][10]="St François",t.ephemeride[4][11]="St Charles",t.ephemeride[4][12]="Ste Barbara",t.ephemeride[5][1]="St Edouard",t.ephemeride[5][2]="Ste Agathe",t.ephemeride[5][3]="St Olive",t.ephemeride[5][4]="Ste Irène",t.ephemeride[5][5]="Ste Judith",t.ephemeride[5][6]="St Igor",t.ephemeride[5][7]="St Antoine",t.ephemeride[5][8]="St Abel",t.ephemeride[5][9]="Ste Raïssa",t.ephemeride[5][10]="Ste Fleur",t.ephemeride[5][11]="Ste Sylvie",t.ephemeride[5][12]="St Gérald",t.ephemeride[6][1]="Ste Mélaine",t.ephemeride[6][2]="St Gaston",t.ephemeride[6][3]="Ste Colette",t.ephemeride[6][4]="St Marcellin",t.ephemeride[6][5]="Ste Prudence",t.ephemeride[6][6]="St Norbert",t.ephemeride[6][7]="Ste Mariette",t.ephemeride[6][8]="St Octavien",t.ephemeride[6][9]="St Bertrand",t.ephemeride[6][10]="St Bruno",t.ephemeride[6][11]="Ste Bertille",t.ephemeride[6][12]="St Nicolas",t.ephemeride[7][1]="St Raymond",t.ephemeride[7][2]="Ste Eugénie",t.ephemeride[7][3]="Ste Félicité",t.ephemeride[7][4]="St Jean-Baptiste",t.ephemeride[7][5]="Ste Gisèle",t.ephemeride[7][6]="St Gilbert",t.ephemeride[7][7]="St Eliane",t.ephemeride[7][8]="St Gaétan",t.ephemeride[7][9]="Ste Reine",t.ephemeride[7][10]="St Serge",t.ephemeride[7][11]="Ste Carine",t.ephemeride[7][12]="St Ambroise",t.ephemeride[8][1]="St Lucien",t.ephemeride[8][2]="Ste Jacqueline",t.ephemeride[8][3]="St Jean de Dieu",t.ephemeride[8][4]="Ste Julie",t.ephemeride[8][5]="St Désiré",t.ephemeride[8][6]="St Médard",t.ephemeride[8][7]="St Thibaud",t.ephemeride[8][8]="St Dominique",t.ephemeride[8][9]="St Adrien",t.ephemeride[8][10]="Ste Pélagie",t.ephemeride[8][11]="St Geoffroy",t.ephemeride[8][12]="Ste Frida",t.ephemeride[9][1]="Ste Alix",t.ephemeride[9][2]="Ste Apolline",t.ephemeride[9][3]="Ste Françoise",t.ephemeride[9][4]="St Gautier",t.ephemeride[9][5]="Ste Pacôme",t.ephemeride[9][6]="Ste Diane",t.ephemeride[9][7]="Ste Amandine",t.ephemeride[9][8]="St Amour",t.ephemeride[9][9]="St Alain",t.ephemeride[9][10]="St Denis",t.ephemeride[9][11]="St Théodore",t.ephemeride[9][12]="St Pierre Fourier",t.ephemeride[10][1]="St Guillaume",t.ephemeride[10][2]="St Arnaud",t.ephemeride[10][3]="St Vivien",t.ephemeride[10][4]="St Fulbert",t.ephemeride[10][5]="Ste Solange",t.ephemeride[10][6]="Ste Trinité",t.ephemeride[10][7]="St Ulric",t.ephemeride[10][8]="St Laurent",t.ephemeride[10][9]="Ste Inès",t.ephemeride[10][10]="St Ghislain",t.ephemeride[10][11]="St Léon",t.ephemeride[10][12]="St Romaric",t.ephemeride[11][1]="St Paulin",t.ephemeride[11][2]="ND de Lourdes",t.ephemeride[11][3]="Ste Rosine",t.ephemeride[11][4]="St Stanislas",t.ephemeride[11][5]="Ste Estelle",t.ephemeride[11][6]="St Barnabé",t.ephemeride[11][7]="St Benoît",t.ephemeride[11][8]="Ste Claire",t.ephemeride[11][9]="St Adelphe",t.ephemeride[11][10]="St Firmin",t.ephemeride[11][11]="St Martin",t.ephemeride[11][12]="St Daniel",t.ephemeride[12][1]="Ste Tatiana",t.ephemeride[12][2]="St Félix",t.ephemeride[12][3]="Ste Justine",t.ephemeride[12][4]="St Jules",t.ephemeride[12][5]="St Achille",t.ephemeride[12][6]="St Guy",t.ephemeride[12][7]="St Olivier",t.ephemeride[12][8]="Ste Clarisse",t.ephemeride[12][9]="St Apollinaire",t.ephemeride[12][10]="St Wilfrid",t.ephemeride[12][11]="St Christian",t.ephemeride[12][12]="Ste Chantal",t.ephemeride[13][1]="Ste Yvette",t.ephemeride[13][2]="Ste Béatrice",t.ephemeride[13][3]="St Rodrigue",t.ephemeride[13][4]="Ste Ida",t.ephemeride[13][5]="Ste Rolande",t.ephemeride[13][6]="St Antoine",t.ephemeride[13][7]="St Henri][St Joël",t.ephemeride[13][8]="St Hippolyte",t.ephemeride[13][9]="St Aimé",t.ephemeride[13][10]="St Géraud",t.ephemeride[13][11]="St Brice",t.ephemeride[13][12]="St Lucie",t.ephemeride[14][1]="Ste Nina",t.ephemeride[14][2]="St Valentin",t.ephemeride[14][3]="Ste Mathilde",t.ephemeride[14][4]="St Maxime",t.ephemeride[14][5]="St Matthias",t.ephemeride[14][6]="St Elisée",t.ephemeride[14][7]="St Camille][Fête Nationale",t.ephemeride[14][8]="St Evrard",t.ephemeride[14][9]="St Materne",t.ephemeride[14][10]="St Juste",t.ephemeride[14][11]="St Sidoine",t.ephemeride[14][12]="Ste Odile",t.ephemeride[15][1]="St Rémi",t.ephemeride[15][2]="St Claude",t.ephemeride[15][3]="Ste Louise",t.ephemeride[15][4]="St Paterne",t.ephemeride[15][5]="Ste Denise",t.ephemeride[15][6]="Ste Germaine",t.ephemeride[15][7]="St Donald",t.ephemeride[15][8]="Ste Marie][Assomption",t.ephemeride[15][9]="St Roland",t.ephemeride[15][10]="Ste Thérèse",t.ephemeride[15][11]="St Albert",t.ephemeride[15][12]="Ste Ninon",t.ephemeride[16][1]="St Marcel",t.ephemeride[16][2]="Ste Julienne",t.ephemeride[16][3]="Ste Bénédicte",t.ephemeride[16][4]="St Benoît-Joseph",t.ephemeride[16][5]="St Honoré",t.ephemeride[16][6]="St Régis",t.ephemeride[16][7]="Ste Carmen",t.ephemeride[16][8]="St Armel",t.ephemeride[16][9]="Ste Edith",t.ephemeride[16][10]="Ste Edwige",t.ephemeride[16][11]="Ste Marguerite",t.ephemeride[16][12]="Ste Alice",t.ephemeride[17][1]="Ste Roseline",t.ephemeride[17][2]="St Alexis",t.ephemeride[17][3]="St Patrick",t.ephemeride[17][4]="St Anicet",t.ephemeride[17][5]="St Pascal",t.ephemeride[17][6]="St Hervé",t.ephemeride[17][7]="Ste Charlotte",t.ephemeride[17][8]="St Hyacinthe",t.ephemeride[17][9]="St Renaud",t.ephemeride[17][10]="St Baudouin",t.ephemeride[17][11]="Ste Elisabeth",t.ephemeride[17][12]="St Gaël",t.ephemeride[18][1]="Ste Prisca",t.ephemeride[18][2]="Ste Bernadette",t.ephemeride[18][3]="St Cyrille",t.ephemeride[18][4]="St Parfait",t.ephemeride[18][5]="St Eric",t.ephemeride[18][6]="St Léonce",t.ephemeride[18][7]="St Frédéric",t.ephemeride[18][8]="Ste Hélène",t.ephemeride[18][9]="Ste Nadège",t.ephemeride[18][10]="St Luc",t.ephemeride[18][11]="Ste Aude",t.ephemeride[18][12]="St Gatien",t.ephemeride[19][1]="St Marius",t.ephemeride[19][2]="St Gabin",t.ephemeride[19][3]="St Joseph",t.ephemeride[19][4]="Ste Emma",t.ephemeride[19][5]="St Yves",t.ephemeride[19][6]="St Romuald",t.ephemeride[19][7]="St Arsène",t.ephemeride[19][8]="St Jean-Eudes",t.ephemeride[19][9]="Ste Emilie",t.ephemeride[19][10]="St René Goupil",t.ephemeride[19][11]="St Tanguy",t.ephemeride[19][12]="St Urbain",t.ephemeride[20][1]="St Sébastien",t.ephemeride[20][2]="Ste Aimée",t.ephemeride[20][3]="St Herbert",t.ephemeride[20][4]="Ste Odette",t.ephemeride[20][5]="St Bernardin",t.ephemeride[20][6]="St Silvère",t.ephemeride[20][7]="Ste Marina",t.ephemeride[20][8]="St Bernard",t.ephemeride[20][9]="St Davy",t.ephemeride[20][10]="Ste Adeline",t.ephemeride[20][11]="St Edmond",t.ephemeride[20][12]="St Théophile",t.ephemeride[21][1]="Ste Agnès",t.ephemeride[21][2]="St Damien",t.ephemeride[21][3]="Ste Clémence",t.ephemeride[21][4]="St Anselme",t.ephemeride[21][5]="St Constantin",t.ephemeride[21][6]="St Rodolphe",t.ephemeride[21][7]="St Victor",t.ephemeride[21][8]="St Christophe",t.ephemeride[21][9]="St Matthieu",t.ephemeride[21][10]="Ste Céline",t.ephemeride[21][11]="Présentation de Marie",t.ephemeride[21][12]="St Pierre Canisius",t.ephemeride[22][1]="St Vincent",t.ephemeride[22][2]="Ste Isabelle",t.ephemeride[22][3]="Ste Léa",t.ephemeride[22][4]="St Alexandre",t.ephemeride[22][5]="St Emile",t.ephemeride[22][6]="St Alban",t.ephemeride[22][7]="Ste Marie-Madeleine",t.ephemeride[22][8]="St Fabrice",t.ephemeride[22][9]="St Maurice",t.ephemeride[22][10]="Ste Elodie",t.ephemeride[22][11]="Ste Cécile",t.ephemeride[22][12]="Ste Françoise-Xavière",t.ephemeride[23][1]="St Barnard",t.ephemeride[23][2]="St Lazare",t.ephemeride[23][3]="St Victorien",t.ephemeride[23][4]="St Georges",t.ephemeride[23][5]="St Didier",t.ephemeride[23][6]="Ste Audrey",t.ephemeride[23][7]="Ste Brigitte",t.ephemeride[23][8]="Ste Rose",t.ephemeride[23][9]="St Constant",t.ephemeride[23][10]="St Jean de Capistran",t.ephemeride[23][11]="St Clément",t.ephemeride[23][12]="St Armand",t.ephemeride[24][1]="St François de Sales",t.ephemeride[24][2]="St Modeste",t.ephemeride[24][3]="Ste Karine",t.ephemeride[24][4]="St Fidèle",t.ephemeride[24][5]="St Donatien",t.ephemeride[24][6]="St Yann",t.ephemeride[24][7]="Ste Christine",t.ephemeride[24][8]="St Barthélémy",t.ephemeride[24][9]="Ste Thècle",t.ephemeride[24][10]="St Florentin",t.ephemeride[24][11]="Ste Flora",t.ephemeride[24][12]="Ste Adèle",t.ephemeride[25][1]="St Apollos",t.ephemeride[25][2]="St Roméo",t.ephemeride[25][3]="Annonciation",t.ephemeride[25][4]="St Marc",t.ephemeride[25][5]="Ste Sophie",t.ephemeride[25][6]="St Prosper",t.ephemeride[25][7]="St Jacques",t.ephemeride[25][8]="St Louis",t.ephemeride[25][9]="St Hermann",t.ephemeride[25][10]="St Crépin",t.ephemeride[25][11]="Ste Catherine",t.ephemeride[25][12]="Noël",t.ephemeride[26][1]="Ste Paule",t.ephemeride[26][2]="St Nestor",t.ephemeride[26][3]="Ste Lara",t.ephemeride[26][4]="Ste Alida",t.ephemeride[26][5]="St Bérenger",t.ephemeride[26][6]="St Anthelme",t.ephemeride[26][7]="Ste Anne",t.ephemeride[26][8]="Ste Natacha",t.ephemeride[26][9]="St Côme][St Damien",t.ephemeride[26][10]="St Dimitri",t.ephemeride[26][11]="Ste Delphine",t.ephemeride[26][12]="St Etienne",t.ephemeride[27][1]="Ste Angèle",t.ephemeride[27][2]="Ste Honorine",t.ephemeride[27][3]="St Habib",t.ephemeride[27][4]="Ste Zita",t.ephemeride[27][5]="St Augustin",t.ephemeride[27][6]="St Fernand",t.ephemeride[27][7]="Ste Nathalie",t.ephemeride[27][8]="Ste Monique",t.ephemeride[27][9]="St Vincent de Paul",t.ephemeride[27][10]="Ste Emeline",t.ephemeride[27][11]="St Séverin",t.ephemeride[27][12]="St Jean",t.ephemeride[28][1]="St Thomas d'Aquin",t.ephemeride[28][2]="St Romain",t.ephemeride[28][3]="St Gontran",t.ephemeride[28][4]="Ste Valérie",t.ephemeride[28][5]="St Germain",t.ephemeride[28][6]="St Irénée",t.ephemeride[28][7]="St Samson",t.ephemeride[28][8]="St Augustin",t.ephemeride[28][9]="St Venceslas",t.ephemeride[28][10]="St Simon",t.ephemeride[28][11]="St Jacques de la Marche",t.ephemeride[28][12]="St Gaspard",t.ephemeride[29][1]="St Gildas",t.ephemeride[29][2]="St Auguste",t.ephemeride[29][3]="Ste Gwladys",t.ephemeride[29][4]="Ste Catherine",t.ephemeride[29][5]="St Aymard",t.ephemeride[29][6]="St Pierre][St Paul",t.ephemeride[29][7]="Ste Marthe",t.ephemeride[29][8]="Ste Sabine",t.ephemeride[29][9]="Sts Michel",t.ephemeride[29][10]="St Narcisse",t.ephemeride[29][11]="St Saturnin",t.ephemeride[29][12]="St David",t.ephemeride[30][1]="Ste Martine",t.ephemeride[30][3]="St Amédée",t.ephemeride[30][4]="St Robert",t.ephemeride[30][5]="St Ferdinand",t.ephemeride[30][6]="St Martial",t.ephemeride[30][7]="Ste Juliette",t.ephemeride[30][8]="St Fiacre",t.ephemeride[30][9]="St Jérôme",t.ephemeride[30][10]="Ste Bienvenue",t.ephemeride[30][11]="St André",t.ephemeride[30][12]="St Roger",t.ephemeride[31][1]="Ste Marcelle",t.ephemeride[31][3]="St Benjamin",t.ephemeride[31][5]="Ste Perrette",t.ephemeride[31][7]="St Ignace",t.ephemeride[31][8]="St Aristide",t.ephemeride[31][10]="St Quentin",t.ephemeride[31][12]="St Sylvestre",{getSaint:function(e,a){return t.ephemeride[e][a]}}}e.$inject=["$log"],angular.module("tsa.tsaViews.ephemeride").factory("ephemerideService",e)}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d){function l(){var e=r.getChartOptions(m.scales[m.selectedScale].stepSize);return e.scales.yAxes=[{id:"y-axis-1",gridLines:{color:m.theme.gridLinesColor}}],e}function c(){void 0!==g&&g.destroy();var e=document.getElementById(m.canvasId);e&&(g=Chart.Scatter(e,{data:f,options:l()}),u()),m.config.scale=m.selectedScale}function u(){var e=o.getServerTime().time;g.options.scales.xAxes[0].ticks.min=e-m.scales[m.selectedScale].scale,g.options.scales.xAxes[0].ticks.max=e;var t=m.scales[m.selectedScale].bufferId,a=0;angular.forEach(m.dataList,function(e){if(f.datasets[a].data=[],e.showInChart){var i=m.device.getData(m.frameId,e.id);void 0!==i&&angular.forEach(i.buffers[t].frames,function(e){f.datasets[a].data.push({x:e.timestamp,y:e.value})})}a++}),g.update()}var m=this;m.logger=a.getInstance("ferryboxFluo-tsa-view"),m.canvasId="canvas-ferryboxFluo-"+m.cardId;var v,p;m.bufferLoading={},m.FERRYBOX_SCIENCE=d,m.dataList=[{id:d.AOA_GREEN_ALGAE,cssClass:"green-algae",color:"rgb(139, 195, 74)",showInChart:!0},{id:d.AOA_BLUE_ALGAE,cssClass:"blue-algae",color:"rgb(26, 117, 174)",showInChart:!0},{id:d.AOA_DIATOMS,cssClass:"diatoms",color:"rgb(255, 171, 0)",showInChart:!0},{id:d.AOA_CRYPTOPHYTA,cssClass:"cryptophyta",color:"rgb(213, 0, 0)",showInChart:!0},{id:d.AOA_YELLOW_SUB,cssClass:"yellow-sub",color:"rgb(27, 94, 32)",showInChart:!0},{id:d.AOA_TOTAL_ALGAE,cssClass:"total-algae",color:"rgb(117, 117, 117)",showInChart:!0}],m.scales=r.scales,m.selectedScale="1 min";var g=void 0,f={datasets:[]};m.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void m.logger.error("config and/or deviceId and/or frameId not defined!"):(m.deviceId=this.config.deviceId,m.frameId=this.config.frameId,m.device=n.registerForDevice(m.deviceId),angular.forEach(m.dataList,function(e){m.device.recordData(m.frameId,e.id),f.datasets.push({xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:e.color,backgroundColor:"rgba(26, 117, 174, 0.3)",data:[]})}),p=e(h,200),s.subscribe(i,function(e,t){m.theme=t,c()}),void(angular.isDefined(m.config.scale)&&(m.selectedScale=m.config.scale)))},m.$onDestroy=function(){angular.forEach(m.dataList,function(e){m.device.stopRecordData(m.frameId,e.id)}),e.cancel(p),void 0!==v&&t.cancel(v)};var h=function(){void 0!==v&&t.cancel(v),angular.forEach(m.dataList,function(e){if(angular.isDefined(m.device.getData(m.frameId,e.id))){var t=m.scales[m.selectedScale].bufferId;m.bufferLoading[m.selectedScale]=m.bufferLoading[m.selectedScale]?++m.bufferLoading[m.selectedScale]:1;var a=m.selectedScale,i=function(){m.bufferLoading[a]--,void 0!==g&&u()};m.device.getData(m.frameId,e.id).buffers[t].loadArchivedFrames().then(i,i)}}),c(),v=t(u,m.scales[m.selectedScale].scale/1e3)};m.onChangeXScale=h,m.showInChart=function(e){e.showInChart=!e.showInChart,u()}}e.$inject=["$timeout","$interval","$log","$scope","acquisitionService","graphUtils","statusService","themeService","FERRYBOX_SCIENCE"],function(){angular.module("tsa.tsaViews.ferryboxFluo",[]).component("tsaFerryboxFluo",{templateUrl:"app/tsa-views/ferryboxFluo/ferryboxFluo.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}()}(),function(){"use strict";function e(e,t,a){var i=this;i.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void i.logger.error("config and/or deviceId and/or frameId not defined!"):(i.deviceId=this.config.deviceId,i.frameId=this.config.frameId,void(i.FERRYBOX_SCIENCE=t))}}e.$inject=["$log","FERRYBOX_SCIENCE","acquisitionService"],angular.module("tsa.tsaViews.ferryboxScience",[]).component("tsaFerryboxScience",{templateUrl:"app/tsa-views/ferryboxScience/ferryboxScience.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i){var n=this;n.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void n.logger.error("config and/or deviceId and/or frameId not defined!"):(n.deviceId=this.config.deviceId,n.frameId=this.config.frameId,n.FERRYBOX_TECHNIC=a,void(n.FERRYBOX_SCIENCE=t))}}e.$inject=["$log","FERRYBOX_SCIENCE","FERRYBOX_TECHNIC","acquisitionService"],angular.module("tsa.tsaViews.ferryboxTechnic",[]).component("tsaFerryboxTechnic",{templateUrl:"app/tsa-views/ferryboxTechnic/ferryboxTechnic.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){var a=this;a.logger=e.getInstance("tsa-flow"),a.$onInit=function(){return angular.isUndefined(a.config)||angular.isUndefined(a.config.deviceId)||angular.isUndefined(a.config.frameId)?void a.logger.error("deviceId or/and frameId or/and flowDeviceId not defined!"):(a.deviceId=a.config.deviceId,a.frameId=a.config.frameId,void(a.FLOW=t))}}e.$inject=["$log","FLOW"],angular.module("tsa.tsaViews.flow",[]).component("tsaFlow",{templateUrl:"app/tsa-views/flow/flow.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d){function l(){var e=o.getChartOptions(m.scales[m.selectedScale].stepSize);return e.scales.yAxes=[{id:"y-axis-1",gridLines:{color:m.theme.gridLinesColor},ticks:{beginAtZero:!0,min:0,suggestedMax:10}}],e}function c(){void 0!==g&&g.destroy(),void 0!==h&&h.destroy();var e=document.getElementById(m.canvasId1),t=document.getElementById(m.canvasId2);e&&(g=Chart.Scatter(e,{data:f,options:l()}),h=Chart.Scatter(t,{data:b,options:l()}),u()),m.config.scale=m.selectedScale}function u(){var e=s.getServerTime().time;g.options.scales.xAxes[0].ticks.min=e-m.scales[m.selectedScale].scale,g.options.scales.xAxes[0].ticks.max=e,h.options.scales.xAxes[0].ticks.min=e-m.scales[m.selectedScale].scale,h.options.scales.xAxes[0].ticks.max=e;var t=m.scales[m.selectedScale].bufferId;f.datasets[0].data=[];var a=m.device.getData(m.frameId,m.starboardTension);void 0!==a&&angular.forEach(a.buffers[t].frames,function(e){f.datasets[0].data.push({x:e.timestamp,y:e.value})}),g.update(),b.datasets[0].data=[];var i=m.device.getData(m.frameId,m.portTension);void 0!==i&&angular.forEach(i.buffers[t].frames,function(e){b.datasets[0].data.push({x:e.timestamp,y:e.value})}),h.update()}var m=this;m.logger=a.getInstance("funes-winch-tsa-view"),m.canvasId1="canvas-winch-1-"+m.cardId,m.canvasId2="canvas-winch-2-"+m.cardId;var v,p;m.scales=o.scales,m.selectedScale="1 min",m.bufferLoading={};var g=void 0,f={datasets:[{label:"Data 1",xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:"#4CAF50",data:[]}]},h=void 0,b={datasets:[{label:"Data 1",xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:"#F44336",data:[]}]};m.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void m.logger.error("config and/or deviceId and/or frameId not defined!"):(m.deviceId=this.config.deviceId,m.frameId=this.config.frameId,m.starboardLength=r.STARBOARD_LENGTH,m.starboardSpeed=r.STARBOARD_SPEED,m.starboardTension=r.STARBOARD_TENSION,m.portLength=r.PORT_LENGTH,m.portSpeed=r.PORT_SPEED,m.portTension=r.PORT_TENSION,m.device=n.registerForDevice(m.deviceId),m.device.recordData(m.frameId,m.starboardTension),m.device.recordData(m.frameId,m.portTension),p=e(w,200),d.subscribe(i,function(e,t){m.theme=t,c()}),void(angular.isDefined(m.config.scale)&&(m.selectedScale=m.config.scale)))},m.$onDestroy=function(){m.device.stopRecordData(m.frameId,m.starboardTension),m.device.stopRecordData(m.frameId,m.portTension),e.cancel(p),void 0!==v&&t.cancel(v)};var w=function(){if(void 0!==v&&t.cancel(v),angular.isDefined(m.device)&&angular.isDefined(m.device.getData(m.frameId,m.starboardTension))&&angular.isDefined(m.device.getData(m.frameId,m.portTension))){var e=m.scales[m.selectedScale].bufferId;m.bufferLoading[m.selectedScale]=m.bufferLoading[m.selectedScale]?m.bufferLoading[m.selectedScale]+=2:2;var a=m.selectedScale,i=function(){m.bufferLoading[a]--,void 0!==g&&void 0!==h&&u()};m.device.getData(m.frameId,m.starboardTension).buffers[e].loadArchivedFrames().then(i,i),m.device.getData(m.frameId,m.portTension).buffers[e].loadArchivedFrames().then(i,i)}c(),v=t(u,m.scales[m.selectedScale].scale/1e3)};m.onChangeXScale=w}e.$inject=["$timeout","$interval","$log","$scope","acquisitionService","FUNES_WINCH","graphUtils","statusService","themeService"],function(){angular.module("tsa.tsaViews.funesWinch",[]).component("tsaFunesWinch",{templateUrl:"app/tsa-views/funesWinch/funesWinch.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}()}(),function(){"use strict";function e(){var e=this;e.$onInit=function(){console.debug("[genericController] $onInit: deviceId = "+this.config.title),e.config=this.config}}angular.module("tsa.tsaViews.generic",[]).component("tsaGeneric",{templateUrl:"app/tsa-views/generic/generic.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"
}})}(),function(){"use strict";function e(e,t){var a=this;a.logger=e.getInstance("GPS-tsa-view"),a.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void a.logger.error("config and/or deviceId and/or frameId not defined!"):(a.deviceId=this.config.deviceId,a.framePosition=this.config.frameId,a.latitude=t.LATITUDE,a.longitude=t.LONGITUDE,a.groundSpeed=t.GROUND_SPEED,a.groundCourse=t.GROUND_COURSE,a.frameSatInfo=t.FRAME_SAT_INFO,a.satNumber=t.SATELLITE_NUMBER,void(a.hdop=t.HDOP))}}e.$inject=["$log","GPS"],angular.module("tsa.tsaViews.gps",[]).component("tsaGps",{templateUrl:"app/tsa-views/gps/gps.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o){function s(){this.datasets=[{label:"Data 1",xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:h.dataColor1,backgroundColor:h.dataColor1bis,data:[]},{label:"Data 2",xAxisID:"x-axis-1",yAxisID:void 0!==h.frameDataId1&&void 0!==h.frameDataId2&&h.doubleYAxes?"y-axis-2":"y-axis-1",borderColor:h.dataColor2,backgroundColor:h.dataColor2bis,pointRadius:0,data:[]}]}function d(){var e=void 0!==h.frameDataId1&&void 0!==h.frameDataId2&&h.doubleYAxes,a=void 0!==h.frameList1&&void 0!==h.frameList1[h.frameId1]?h.frameList1[h.frameId1][h.dataId1]:void 0,i=void 0!==h.frameList2&&void 0!==h.frameList2[h.frameId2]?h.frameList2[h.frameId2][h.dataId2]:void 0;angular.isDefined(a)&&(C=a.longName+(a.units?" ("+a.units+")":"")),angular.isDefined(i)&&(E=i.longName+(i.units?" ("+i.units+")":""));var n=t.getChartOptions(h.scales[h.selectedScale].stepSize,h.fill);return n.scales.yAxes=[{id:"y-axis-1",position:"left",scaleLabel:{display:e,fontColor:h.dataColor1,labelString:C?C:"data 1"},gridLines:{color:h.theme.gridLinesColor},ticks:{beginAtZero:h.zeroOption,min:h.selectedYScaleMode==h.YScaleModes.MANUAL?b:void 0,max:h.selectedYScaleMode==h.YScaleModes.MANUAL?y:void 0}},{id:"y-axis-2",position:"right",display:e,reverse:!0,scaleLabel:{display:!0,fontColor:h.dataColor2,labelString:E?E:"data 2"},gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:h.zeroOption,min:h.selectedYScaleMode==h.YScaleModes.MANUAL?w:void 0,max:h.selectedYScaleMode==h.YScaleModes.MANUAL?I:void 0}}],n}function l(){void 0!==D&&D.destroy();var e=document.getElementById(h.canvasId);e&&(A=new s,D=Chart.Scatter(e,{data:A,options:d()}),m(),v())}function c(){function e(){h.dataLoaders--,void 0!==D&&m()}var t=h.scales[h.selectedScale].bufferId;if(void 0!==S&&void 0!==h.frameId1&&void 0!==h.dataId1){var a=S.getData(h.frameId1,h.dataId1);void 0!==a&&(h.dataLoaders++,a.buffers[t].loadArchivedFrames().then(e,e))}if(void 0!==T&&void 0!==h.frameId2&&void 0!==h.dataId2){var i=T.getData(h.frameId2,h.dataId2);void 0!==i&&(h.dataLoaders++,i.buffers[t].loadArchivedFrames().then(e,e))}}function u(){void 0!==x&&n.cancel(x),c(),l(),x=n(m,h.scales[h.selectedScale].scale/1e3)}function m(){var e=a.getServerTime().time;D.options.scales.xAxes[0].ticks.min=e-h.scales[h.selectedScale].scale,D.options.scales.xAxes[0].ticks.max=e;var t=h.scales[h.selectedScale].bufferId;if(A.datasets[0].data=[],A.datasets[1].data=[],void 0!==S&&void 0!==h.frameId1&&void 0!==h.dataId1){var i=S.getData(h.frameId1,h.dataId1);void 0!==i&&angular.forEach(i.buffers[t].frames,function(e){A.datasets[0].data.push({x:e.timestamp,y:e.value})})}if(void 0!==T&&void 0!==h.frameId2&&void 0!==h.dataId2){var n=T.getData(h.frameId2,h.dataId2);void 0!==n&&angular.forEach(n.buffers[t].frames,function(e){A.datasets[1].data.push({x:e.timestamp,y:e.value})})}D.update()}function v(){h.config={type:"Graphics",scale:h.selectedScale,deviceId1:h.deviceId1,frameDataId1:h.frameDataId1,title1:h.chartTitle1,dataLegend1:C,deviceId2:h.deviceId2,frameDataId2:h.frameDataId2,title2:h.chartTitle2,dataLegend2:E,doubleYAxes:h.doubleYAxes,fill:h.fill,zeroOption:h.zeroOption,selectedYScaleMode:h.selectedYScaleMode,yAxes1Min:b,yAxes1Max:y,yAxes2Min:w,yAxes2Max:I}}function p(){h.config&&"Graphics"===h.config.type&&(h.selectedScale=h.config.scale,h.doubleYAxes=h.config.doubleYAxes,h.fill=h.config.fill,h.zeroOption=h.config.zeroOption,h.selectedYScaleMode=h.config.selectedYScaleMode,b=h.config.yAxes1Min,y=h.config.yAxes1Max,w=h.config.yAxes2Min,I=h.config.yAxes2Max,h.chartTitle1=h.config.title1,C=h.config.dataLegend1,h.deviceId1=h.config.deviceId1,h.updateDataList1(),h.frameDataId1=h.config.frameDataId1,h.onChangeData1(),h.chartTitle2=h.config.title2,E=h.config.dataLegend2,h.deviceId2=h.config.deviceId2,h.updateDataList2(),h.frameDataId2=h.config.frameDataId2,h.onChangeData2())}function g(e){var t=[];return angular.forEach(e,function(e){null!=e.y&&t.push(e.y)}),Math.max.apply(null,t)}function f(e){var t=[];return angular.forEach(e,function(e){null!=e.y&&t.push(e.y)}),Math.min.apply(null,t)}var h=this;h.theme=e.getTheme();var b=-1,w=-1,y=1,I=1;h.canvasId="canvas-"+h.cardId,h.dataColor1="rgb(26, 117, 174)",h.dataColor1bis="rgba(26, 117, 174, 0.3)",h.dataColor2="rgb(255, 136, 56)",h.dataColor2bis="rgba(255, 136, 56,0.3)",h.scales=t.scales,h.selectedScale="1 min",h.YScaleModes={AUTO:"views.graphics.auto",MANUAL:"views.graphics.manual"},h.selectedYScaleMode=h.YScaleModes.AUTO,h.zeroOption=!1,h.deviceList={},h.doubleYAxes=!0,h.fill=!1,h.showSettings=!1,h.dataLoaders=0;var S=void 0;h.deviceId1=void 0,h.frameList1={},h.frameDataId1=void 0,h.frameId1=void 0,h.dataId1=void 0,h.chartTitle1="";var C,T=void 0;h.deviceId2=void 0,h.frameList2={},h.frameDataId2=void 0,h.frameId2=void 0,h.dataId2=void 0,h.chartTitle2="";var E,D=void 0,A=new s,x=void 0,L=void 0;h.$onInit=function(){h.deviceList=i.getDeviceList(),L=o(u,500),e.subscribe(r,function(e,t){h.theme=t,l()}),p()},h.$onDestroy=function(){void 0!==S&&void 0!==h.frameId1&&void 0!==h.dataId1&&S.stopRecordData(h.frameId1,h.dataId1),void 0!==T&&void 0!==h.frameId2&&void 0!==h.dataId2&&T.stopRecordData(h.frameId2,h.dataId2),o.cancel(L),void 0!==x&&n.cancel(x)},h.updateChartOptions=l,h.onChangeXScale=u,h.updateDataList1=function(){h.frameDataId1=void 0,h.onChangeData1(),h.frameList1={},void 0!==h.deviceId1&&(S=i.registerForDevice(h.deviceId1),h.frameList1=S.frameList)},h.updateDataList2=function(){h.frameDataId2=void 0,h.onChangeData2(),h.frameList2={},void 0!==h.deviceId2&&(T=i.registerForDevice(h.deviceId2),h.frameList2=T.frameList)},h.onChangeData1=function(){void 0!==S&&(void 0!==h.frameId1&&void 0!==h.dataId1&&S.stopRecordData(h.frameId1,h.dataId1),h.frameId1=h.dataId1=void 0,void 0!==h.frameDataId1&&(h.frameId1=h.frameDataId1.split("!")[0],h.dataId1=h.frameDataId1.split("!")[1],S.recordData(h.frameId1,h.dataId1)),l(),c())},h.onChangeData2=function(){void 0!==T&&(void 0!==h.frameId2&&void 0!==h.dataId2&&T.stopRecordData(h.frameId2,h.dataId2),h.frameId2=h.dataId2=void 0,void 0!==h.frameDataId2&&(h.frameId2=h.frameDataId2.split("!")[0],h.dataId2=h.frameDataId2.split("!")[1],T.recordData(h.frameId2,h.dataId2)),l(),c())},h.onClearData1=function(){h.frameDataId1=void 0,h.onChangeData1(),h.deviceId1=void 0,S=void 0,h.frameList1={}},h.onClearData2=function(){h.frameDataId2=void 0,h.onChangeData2(),h.deviceId2=void 0,T=void 0,h.frameList2={}},h.updateYAxesMode=function(){h.selectedYScaleMode===h.YScaleModes.MANUAL&&(y=A.datasets[0].data.length>0?g(A.datasets[0].data):1,b=A.datasets[0].data.length>0?f(A.datasets[0].data):-1,I=A.datasets[1].data.length>0?g(A.datasets[1].data):1,w=A.datasets[1].data.length>0?f(A.datasets[1].data):-1),l()},h.onZoomY=function(e){if(void 0!==y&&void 0!==b){var t=.1*(y-b);y+=e?t:-t,b+=e?-t:t}if(void 0!==I&&void 0!==w){var t=.1*(I-w);I+=e?t:-t,w+=e?-t:t}l()},h.onCenterYAxes=function(){if(h.selectedYScaleMode===h.YScaleModes.MANUAL){if(void 0===h.frameDataId1||void 0===h.frameDataId2||D.options.scales.yAxes[1].display){if(A.datasets[1].data.length>0){var e=(g(A.datasets[1].data)+f(A.datasets[1].data))/2,t=I-w;w=e-t/2,I=e+t/2}if(A.datasets[0].data.length>0){var e=(g(A.datasets[0].data)+f(A.datasets[0].data))/2,t=y-b;b=e-t/2,y=e+t/2}else b=w,y=I}else{var a=Math.min(f(A.datasets[0].data),f(A.datasets[1].data)),i=Math.max(g(A.datasets[0].data),g(A.datasets[1].data)),e=(i+a)/2,t=y-b;b=e-t/2,y=e+t/2}l()}}}e.$inject=["themeService","graphUtils","statusService","acquisitionService","$interval","$scope","$timeout"],angular.module("tsa.tsaViews.graphics",["tsa.services.filters"]).component("tsaGraphics",{templateUrl:"app/tsa-views/graphics/graphics.html",controller:e,controllerAs:"ctrl",bindings:{cardId:"@",config:"=",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a){var i=this;i.logger=e.getInstance("tsa-gravimeter"),i.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void i.logger.error("config and/or deviceId and/or frameId not defined!"):(i.deviceId=this.config.deviceId,i.frameId=this.config.frameId,void(this.GRAVIMETER=t))}}e.$inject=["$log","GRAVIMETER","acquisitionService"],angular.module("tsa.tsaViews.gravimeter",[]).component("tsaGravimeter",{templateUrl:"app/tsa-views/gravimeter/gravimeter.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d){function l(){var e=n.getChartOptions(m.scales[m.selectedScale].stepSize);return e.scales.yAxes=[{id:"y-axis-1",gridLines:{color:m.theme.gridLinesColor},ticks:{suggestedMax:10}}],e}function c(){void 0!==g&&g.destroy();var e=document.getElementById(m.canvasId);e&&(g=Chart.Scatter(e,{data:f,options:l()}),u()),m.config.scale=m.selectedScale}function u(){var e=o.getServerTime().time;g.options.scales.xAxes[0].ticks.min=e-m.scales[m.selectedScale].scale,g.options.scales.xAxes[0].ticks.max=e;var t=m.scales[m.selectedScale].bufferId;f.datasets[0].data=[];var a=m.device.getData(m.frameId,m.HULLSOUNDSPEED.DATA);void 0!==a&&angular.forEach(a.buffers[t].frames,function(e){f.datasets[0].data.push({x:e.timestamp,y:e.value})}),g.update()}var m=this;m.logger=r.getInstance("tsa-hullsoundspeed"),m.canvasId="canvas-hss-"+m.cardId;var v,p;m.bufferLoading={},m.scales=n.scales,m.selectedScale="1 min";var g=void 0,f={datasets:[{label:"Data 1",xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:"rgb(26, 117, 174)",backgroundColor:"rgba(26, 117, 174, 0.3)",data:[]}]};m.$onInit=function(){return angular.isUndefined(m.config)||angular.isUndefined(m.config.deviceId)||angular.isUndefined(m.config.frameId)?void m.logger.error("deviceId or/and frameId or/and hullsoundspeedDeviceId not defined!"):(m.deviceId=m.config.deviceId,m.frameId=m.config.frameId,m.HULLSOUNDSPEED=d,m.device=i.registerForDevice(m.deviceId),m.device.recordData(m.frameId,m.HULLSOUNDSPEED.DATA),p=e(h,200),s.subscribe(a,function(e,t){m.theme=t,c()}),void(angular.isDefined(m.config.scale)&&(m.selectedScale=m.config.scale)))},m.$onDestroy=function(){m.device.stopRecordData(m.frameId,m.HULLSOUNDSPEED.DATA),e.cancel(p),void 0!==v&&t.cancel(v)};var h=function(){if(void 0!==v&&t.cancel(v),angular.isDefined(m.device.getData(m.frameId,m.HULLSOUNDSPEED.DATA))){var e=m.scales[m.selectedScale].bufferId;m.bufferLoading[m.selectedScale]=m.bufferLoading[m.selectedScale]?++m.bufferLoading[m.selectedScale]:1;var a=m.selectedScale,i=function(){m.bufferLoading[a]--,void 0!==g&&u()};m.device.getData(m.frameId,m.HULLSOUNDSPEED.DATA).buffers[e].loadArchivedFrames().then(i,i)}c(),v=t(u,m.scales[m.selectedScale].scale/1e3)};m.onChangeXScale=h}e.$inject=["$timeout","$interval","$scope","acquisitionService","graphUtils","$log","statusService","themeService","HULLSOUNDSPEED"],angular.module("tsa.tsaViews.hullSoundSpeed",[]).component("tsaHullSoundSpeed",{templateUrl:"app/tsa-views/hullSoundSpeed/hullSoundSpeed.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n){var r=this;r.logger=e.getInstance("kley-state-tsa-view"),r.deviceId="PP_KleyWinch",r.KLEY_STATE={frameId:n.FRAME,datasRight:[{id:n.HP,name:"Hp",unit:"bar",cFormat:"%.0f"},{id:n.BP,name:"Bp",unit:"bar",cFormat:"%.0f"},{id:n.TEMP,name:"Temp.",unit:"°",cFormat:"%.0f"}],datasLeft:[{id:n.M1,name:"M1",unit:"",cFormat:""},{id:n.M2,name:"M2",unit:"",cFormat:""},{id:n.M3,name:"M3",unit:"",cFormat:""},{id:n.M4,name:"M4",unit:"",cFormat:""},{id:n.M5,name:"M5",unit:"",cFormat:""}]},r.$onInit=function(){(angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId))&&r.logger.error("config and/or deviceId and/or frameId not defined!")},r.$onDestroy=function(){}}e.$inject=["$log","acquisitionService","$scope","$timeout","KLEY_STATE"],angular.module("tsa.tsaViews.kleyState",[]).component("tsaKleyState",{templateUrl:"app/tsa-views/kley-state/kley-state.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o){function s(e){var t=e[o.HAUL_ID][0],a=e[o.POCKET][0],i=e[o.TOTAL_SORTED_SPECIES_WEIGHT][0],n=e[o.TOTAL_POCKET_WEIGHT][0],r={id:e[o.SPECIES_ID][0],sign:e[o.SPECIES_SIGN][0],weight:e[o.SPECIES_WEIGHT][0],estimation:sprintf("%.2f",e[o.SPECIES_WEIGHT][0]/i)};l.sortedPercentage=sprintf("%.2f",i/n*100)+" %",u==t&&m==a||(p=[],m=a,u=t);var s=!1;angular.forEach(p,function(e){e.id==r.id&&(s=!0,e.sign=r.sign,e.weight=r.weight,e.estimation=r.estimation)}),s||p.push(r),p.sort(function(e,t){return t.weight-e.weight})}function d(){var e=document.getElementById("array").offsetHeight,a="/static"==t.path()&&r.isSingleMode()?64:42,i=Math.floor(e/a);if(0!=i){l.pageArray=[];for(var n=0;n<Math.ceil(p.length/i);n++)l.pageArray.push(n+1);l.speciesListToDisplay=p.slice((l.selectedPage-1)*i,l.selectedPage*i)}}var l=this;l.logger=a.getInstance("HaulComposition-tsa-view");var c,u,m,v,p=[];l.speciesListToDisplay=[],l.sortedPercentage,l.pageArray=[],l.selectedPage=1,l.playEnabled=!0,l.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void l.logger.error("config and/or deviceId and/or frameId not defined!"):(l.deviceId=this.config.deviceId,l.frameId=this.config.frameId,l.haul=o.HAUL_ID,l.pocket=o.POCKET,l.totalPocket=o.TOTAL_POCKET_WEIGHT,l.totalSortedSpecies=o.TOTAL_SORTED_SPECIES_WEIGHT,c=n.registerForDevice(l.deviceId).registerForFrame(l.frameId),c.promise.then({},{},function(e){l.logger.debug("blcar frame received: "+angular.toJson(e.value)),s(e.value)}),i.$watch(function(){return document.getElementById("array").offsetHeight},function(){d()}),void(v=e(function(){l.playEnabled&&(l.selectedPage=l.selectedPage>=l.pageArray.length?1:++l.selectedPage,d())},8e3)))},l.$onDestroy=function(){void 0!==v&&e.cancel(v),angular.isUndefined(l.deviceId)&&n.registerForDevice(l.deviceId).unregisterForFrame(c)},l.selectPage=function(e){l.selectedPage=e,d()}}e.$inject=["$interval","$location","$log","$scope","acquisitionService","staticGridService","HAUL"],angular.module("tsa.tsaViews.haulComposition",[]).component("tsaHaulComposition",{templateUrl:"app/tsa-views/haulComposition/haulComposition.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a){var i=this;i.logger=e.getInstance("tsa-kss31"),i.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void i.logger.error("config and/or deviceId and/or frameId not defined!"):(i.deviceId=this.config.deviceId,i.frameId=this.config.frameId,void(this.KSS31=t))}}e.$inject=["$log","KSS31","acquisitionService"],angular.module("tsa.tsaViews.kss31",[]).component("tsaKss31",{templateUrl:"app/tsa-views/kss31/kss31.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o){function s(){I=document.getElementById(w.propulsionCanvasId),null!=I&&(S=new createjs.Stage(I),C=new createjs.Container,T=new createjs.Container,S.addChild(C,T),a.$watch(function(){return I.offsetHeight},function(){d()}),a.$watch(function(){return I.offsetWidth},function(){d()}),d())}function d(){if(null!=I){E=I.offsetWidth,D=I.offsetHeight,I.setAttribute("width",E),I.setAttribute("height",D),angular.element(I).parent().find("tsa-data-view .value").css({"font-size":""+D/220+"em"}),angular.element(I).parent().find("tsa-data-view").css({width:""+Math.round(D/3.5)+"px !important","max-width":""+Math.round(D/3.5)+"px","background-color":"green"}),S.x=E/2,S.y=D/2;var e=D/100;S.scaleX=S.scaleY=e,l(),C.cache(-E/2,-D/2,E,D,e),c(),u(),S.update()}}function l(){C.removeAllChildren();var e=i.createVessel(w.colors.tick);e.scaleX=.3,e.scaleY=.65,e.y=-12;var t=i.createBackRudder(w.colors.background);t.y=22,t.x=-10,t.scaleX=t.scaleY=.12;var a=i.createBackRudder(w.colors.background);a.y=22,a.x=10,a.scaleX=a.scaleY=.12;var n=i.createBackGauge(w.colors.background);n.y=2,n.x=-10,n.scaleX=.23,n.scaleY=.3,n.rotation=270;var r=i.createBackGauge(w.colors.background);r.y=2,r.x=10,r.scaleX=.23,r.scaleY=.3,r.rotation=270,C.addChild(e,t,a,n,r)}function c(){T.removeAllChildren();var e=w.colors.rudder;Math.abs(Math.round(w.angle.value))>0&&(e=w.angle.value>0?w.colors.red:w.colors.green);var t=i.createRudder(e);t.y=22,t.x=-10,t.scaleX=t.scaleY=.12,t.rotation=w.angle.value;var a=i.createRudder(e);a.y=22,a.x=10,a.scaleX=a.scaleY=.12,a.rotation=w.angle.value;var n=i.createGaugge(w.colors.tick,w.colors.zero,100*w.mainLeft.value/150,w.colors.forward,w.colors.backward);n.y=2,n.x=-10,n.scaleX=.23,n.scaleY=.3,n.rotation=270;var r=i.createGaugge(w.colors.tick,w.colors.zero,100*w.mainRight.value/150,w.colors.forward,w.colors.backward);r.y=2,r.x=10,r.scaleX=.23,r.scaleY=.3,r.rotation=270;var o=w.colors.rudder;o=w.frontPropAngle.value<=180&&w.frontPropAngle.value>=0?w.colors.green:w.colors.red;var s=i.createArrow(o,w.frontTrans.value/2);s.y=-31.5,s.x=0,s.scaleX=s.scaleY=.1,s.rotation=w.frontPropAngle.value,T.addChild(t,a,n,r,s)}function u(){E=I.offsetWidth,D=I.offsetHeight;var e=I.offsetLeft,t=I.offsetTop;w.frontTrans.x=e+.1*E/2,w.frontTrans.y=t+12*D/100,w.frontPropAngle.x=w.frontTrans.x,w.frontPropAngle.y=t+25*D/100,w.mainLeft.x=w.frontTrans.x,w.mainLeft.y=t+50*D/100,w.mainRight.x=e+1.4*E/2,w.mainRight.y=w.mainLeft.y,w.angle.x=e+1*E/2,w.angle.y=t+87*D/100}function m(){A=document.getElementById(w.windCanvasId),null!=A&&(P=new createjs.Stage(A),p(),a.$watch(function(){return A.offsetHeight},function(){v()}),a.$watch(function(){return A.offsetWidth},function(){v()}),v())}function v(){null!=A&&(x=A.offsetWidth<A.offsetHeight?A.offsetWidth:A.offsetHeight,L=A.offsetWidth,R=A.offsetHeight,A.setAttribute("width",L),A.setAttribute("height",R),P.removeAllChildren(),h(),p(),null!=N&&(N=g(N.speed,U,N.rotation+90)),null!=F&&(F=g(F.speed,k,F.rotation+90)),P.update())}function p(){O=new createjs.Shape,O.x=L/2,O.y=R/2,O.rotation=angular.isDefined(w.heading.value)?w.heading.value-90:-90,O.graphics.beginStroke("#757575").setStrokeStyle(1,"round"),P.addChild(O),M=new createjs.Shape,M.x=L/2,M.y=R/2,M.rotation=O.rotation,M.graphics.beginStroke("#757575").setStrokeStyle(1).setStrokeDash([10,5]),P.addChild(M);var e=.5*x,t=e/4;M.graphics.moveTo(.75*-e,0),M.graphics.lineTo(3*e/4,0),O.graphics.moveTo(e/5,t/2).lineTo(-e/2,t/2).lineTo(-e/2,-t/2).lineTo(e/5,-t/2).bezierCurveTo(e/1.5,-t/4,e/1.5,t/4,e/5,t/2)}function g(e,t,a){var i=new createjs.Shape;i.x=L/2,i.y=R/2,i.rotation=a-90,i.speed=e,P.addChild(i),i.graphics.beginStroke(t).setStrokeStyle(2);var n=x/3;return 0===e?i.graphics.drawCircle(0,0,20):e>200?w.logger.error("Error true wind speed too high"):(i.graphics.moveTo(0,0),i.graphics.lineTo(n,0),i.graphics.beginFill(t),f(i,e,n)),i}function f(e,t,a){for(var i=a,n=Math.floor(t/50),r=Math.floor(t%50/10),o=Math.floor(t%10/5),s=0;s<n;s++)e.graphics.moveTo(i,0).lineTo(i-12,20).lineTo(i-20,0),i-=20;for(0!==n&&(i-=10),s=0;s<r;s++)e.graphics.moveTo(i,0).lineTo(i+8,20),i-=10;for(s=0;s<o;s++)e.graphics.moveTo(i,0).lineTo(i+4,10),i-=10}function h(){var e=new createjs.Shape;e.x=L/2,e.y=R/2,P.addChild(e),e.graphics.beginStroke("#757575").setStrokeStyle(3);for(var t=x/2-20,a=0;a<24;a++){var i=a*Math.PI/12,n=a%3===0?7:2;if(a%2===0&&a%6!==0){var r=(t+n+20)*Math.cos(i)-6,o=(t+n+20)*Math.sin(i),s=(a+6)%24*360/24;r-=10,b(s,r,o)}e.graphics.moveTo((t-n)*Math.cos(i),(t-n)*Math.sin(i)),e.graphics.lineTo((t+n)*Math.cos(i),(t+n)*Math.sin(i))}}function b(e,t,a){var i=new createjs.Text(e,"10px Arial","#757575");return i.x=L/2+t,i.y=R/2+a,i.textBaseline="middle",P.addChild(i)}var w=this,y="[landingControllerAt] ";w.propulsionCanvasId="canvas-propulsion-landing-at-"+w.cardId;var I,S,C,T,E,D;w.windCanvasId="canvas-wind-landing-at-"+w.cardId;var A,x,L,R,P,O,M,N,F,_,U="#E53935",k="#1a75ae";w.readyToDraw=!1,w.colors={background:"#CCCCCC",zero:"#EE2222",tick:"#888888",rudder:"#000000",green:"#11CC11",red:"#EE2222",forward:"#1111DD",backward:"#000000",funkyBackground:"#F3BF52"},w.themeChanged=function(e,t){console.log("landing at themechanged")},n.subscribe(a,w.themeChanged),w.$onInit=function(){return console.log(y+"$onInit: deviceId = "+(this.config?this.config.deviceId:"config undefined")),void 0==this.config||void 0==this.config.deviceId?void console.error(y+"device Id not found!"):(w.deviceId=this.config.deviceId,w.navId=this.config.navId,w.device=e.registerForDevice(w.deviceId),w.frameId="atpropulsion",w.navFrameId="shipnav",w.weatherFrame="weather",w.weatherDeviceId=this.config.weatherId,w.trueWindHeadingId="trueairheading",w.trueWindSpeedId="trueairspeed",w.relWindHeadingId="relairheading",w.relWindSpeedId="relairspeed",w.frontTrans={id:"fronttrans"},w.frontPropAngle={id:"frontpropangle"},w.mainLeft={id:"mainleft"},w.mainRight={id:"mainright"},w.angle={id:"angle"},w.fontsize=1,w.frameListener=e.registerForDevice(w.deviceId).registerForFrame(w.frameId),w.frameListener.promise.then({},{},function(e){w.frontTrans.value=e.value[w.frontTrans.id],w.frontPropAngle.value=e.value[w.frontPropAngle.id],w.mainLeft.value=e.value[w.mainLeft.id],w.mainRight.value=e.value[w.mainRight.id],w.angle.value=e.value[w.angle.id],w.readyToDraw&&(c(),S.update())}),w.heading={id:"heading"},w.gndCourse={id:"gndcourse"},w.gndSpeed={id:"gndspeed"},w.surfCourse={id:"surfcourse"},w.surfSpeed={id:"surfspeed"},w.surfNorth=w.surfWest=w.surfEast=w.surfSouth=void 0,w.gndNorth=w.gndWest=w.gndEast=w.gndSouth=void 0,w.navFrameListener=e.registerForDevice(w.navId).registerForFrame("shipnav"),w.navFrameListener.promise.then({},{},function(e){w.heading.value=e.value[w.heading.id],w.gndCourse.value=e.value[w.gndCourse.id],w.gndSpeed.value=e.value[w.gndSpeed.id],w.surfCourse.value=e.value[w.surfCourse.id],w.surfSpeed.value=e.value[w.surfSpeed.id],null!=P&&null==O&&p(),angular.isDefined(O)&&(O.rotation=w.heading.value-90,M.rotation=w.heading.value-90,angular.isDefined(F)&&(F.rotation=parseFloat(w.heading.value)+parseFloat(_)-90),P.update());var t=w.surfSpeed.value*Math.cos((w.surfCourse.value-w.heading.value)*Math.PI/180);t>=0?(w.surfNorth=t,w.surfSouth=void 0):(w.surfNorth=void 0,w.surfSouth=-t);var a=w.surfSpeed.value*Math.sin((w.surfCourse.value-w.heading.value)*Math.PI/180);a<0?(w.surfWest=-a,w.surfEast=void 0):(w.surfWest=void 0,w.surfEast=a);var i=w.gndSpeed.value*Math.cos((w.gndCourse.value-w.heading.value)*Math.PI/180);i>=0?(w.gndNorth=i,w.gndSouth=void 0):(w.gndNorth=void 0,w.gndSouth=-i);var n=w.gndSpeed.value*Math.sin((w.gndCourse.value-w.heading.value)*Math.PI/180);n<0?(w.gndWest=-n,w.gndEast=void 0):(w.gndWest=void 0,w.gndEast=n)}),w.trueWindSpeedId=o.TRUE_AIR_SPEED,w.trueWindHeadingId=o.TRUE_AIR_HEADING,w.relWindSpeedId=o.REL_AIR_SPEED,w.relWindHeadingId=o.REL_AIR_HEADING,w.weatherFrameListener=e.registerForDevice(w.weatherDeviceId).registerForFrame(o.FRAME),w.weatherFrameListener.promise.then({},{},function(e){if(angular.isDefined(P)){var t=e.value[o.TRUE_AIR_SPEED],a=e.value[o.TRUE_AIR_HEADING],i=e.value[o.REL_AIR_SPEED];_=e.value[o.REL_AIR_HEADING],P.removeChild(N),P.removeChild(F),angular.isDefined(w.heading.value)?(N=g(t,U,a),F=g(i,k,parseFloat(w.heading.value)+parseFloat(_))):F=g(i,k,parseFloat(_)),P.update()}}),void t(function(){s(),m(),w.readyToDraw=!0},500))},w.$onDestroy=function(){angular.isDefined(w.frameListener)&&e.registerForDevice(w.deviceId).unregisterForFrame(w.frameListener),angular.isDefined(w.weatherFrameListener)&&e.registerForDevice(w.weatherDeviceId).unregisterForFrame(w.weatherFrameListener),angular.isDefined(w.navFrameListener)&&e.registerForDevice(w.navId).unregisterForFrame(w.navFrameListener)}}e.$inject=["acquisitionService","$timeout","$scope","easelJsUtils","themeService","NAVIGATION","WEATHER"],angular.module("tsa.tsaViews.landingAt",[]).component("tsaLandingAt",{templateUrl:"app/tsa-views/landing-at/landing-at.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a){var i=this;i.logger=e.getInstance("tsa-magnetometer"),i.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void i.logger.error("config and/or deviceId and/or frameId not defined!"):(i.deviceId=this.config.deviceId,i.frameId=this.config.frameId,void(this.MAGNETOMETER=t))}}e.$inject=["$log","MAGNETOMETER","acquisitionService"],angular.module("tsa.tsaViews.magnetometer",[]).component("tsaMagnetometer",{templateUrl:"app/tsa-views/magnetometer/magnetometer.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d,l,c,u,m,v,p){function g(){var e=c.getServerTime().time;e-y.getLastMobileTimestamp()>6e4&&y.clearMobileArray()}function f(){w.mapComponent.setOwnShipData(w.position.latitude,w.position.longitude,w.position.heading,w.position.surfspeed,w.position.gndcourse,w.position.gndspeed,w.position.lengthVector),w.mapComponent.setOwnShipTrace(y.getTraceArray()),P&&w.mapComponent.setSMFData(y.getMultibeamArray()),E&&w.mapComponent.setMobiles(y.getMobileArray()),A&&w.mapComponent.setAIS(y.getAISArray()),w.mapComponent.setWindForceAndDirection(w.wind.windSpeed,w.wind.windHeading),w.isModeNavigation()?w.mapComponent.setOwnShipRoute(y.getRoute()):(4===y.getRoute().length?(w.positionStation.latitude=y.getRoute()[2],w.positionStation.longitude=y.getRoute()[3]):(w.positionStation.latitude=y.getRoute()[0],w.positionStation.longitude=y.getRoute()[1]),w.mapComponent.setStationViewCenterAndScale(w.positionStation.latitude,w.positionStation.longitude,w.stationViewScale)),void 0!==w.mapComponent&&w.mapComponent.render()}function h(){var e=[];e.serverAddress=v,console.log("coucou "+e.serverAddress),e.OSMNightMode=d.getTheme().id.toUpperCase(),e.map=w.mapId,w.mapComponent=new geolayer.carto.CartoComponent(e,"resources/images"),w.mapComponent.showStationView(w.currentMode===m.MODE.STATION),w.mapComponent.setOwnShipGeometry(_,U,k,$),w.mapComponent.setMarineBackground(N),w.mapComponent.setOwnShipSymbolType(F),w.mapComponent.showSMF(w.multibeamEnabled),w.mapComponent.showGraticule(w.gridEnabled),w.mapComponent.setAutoCenterMode(w.autoCenterEnabled),w.mapComponent.setShowRouteMode(w.routeEnabled),w.mapComponent.setShowAISMode(w.aisEnabled),w.mapComponent.setShowTraceMode(w.traceEnabled),w.onMeasureToolChange(w.currentMeasureTool),w.mapComponent.getMap().on("pointermove",function(e){var t=e.coordinate,a=proj.transform(t,"EPSG:3857","EPSG:4326");w.stringMouseLatitude=n.parseLatToString(a[1]),w.stringMouseLongitude=n.parseLongToString(a[0])});var a;a=d.getTheme().id===d.THEME.NIGHT.id?geolayer.carto.Luminosity.DUSK:geolayer.carto.Luminosity.DAY,w.mapComponent.setLuminosity(a);var o=document.getElementById(w.mapId);t.$watch(function(){return o.offsetHeight},f),t.$watch(function(){return o.offsetWidth},f),y.setMapComponent(w.mapComponent),y.initDataListener(S,x,C,P,T,A,R,E,D,L,O),"/tracking"===r.path()?(w.trackingEnabled=!0,G(),B()):w.trackingEnabled=!1,angular.isDefined(O)&&(w.mapComponent.addTrawlingLayer(),y.getArchiveTrawling()),w.position=y.getPosition(),w.wind=y.getWind(),w.positionStation=y.getPositionStation(),I=i(f,1e3)}function b(){angular.isDefined(w.config.routeEnabled)&&(w.routeEnabled=w.config.routeEnabled),angular.isDefined(w.config.aisEnabled)&&(w.aisEnabled=w.config.aisEnabled),angular.isDefined(w.config.traceEnabled)&&(w.traceEnabled=w.config.traceEnabled),angular.isDefined(w.config.autoCenterEnabled)&&(w.autoCenterEnabled=w.config.autoCenterEnabled),angular.isDefined(w.config.gridEnabled)&&(w.gridEnabled=w.config.gridEnabled),angular.isDefined(w.config.multibeamEnabled)&&(w.multibeamEnabled=w.config.multibeamEnabled),angular.isDefined(w.config.bottomBarEnabled)&&(w.bottomBarEnabled=w.config.bottomBarEnabled),angular.isDefined(w.config.stationViewScale)&&(w.stationViewScale=w.config.stationViewScale)}var w=this,y=u.getInstance();w.logger=e.getInstance("map-tsa-view"),w.stationIsUnvailable=!1;var I;w.showLayerMenu=!1,w.currentMode=m.MODE.NAVIGATION,w.routeEnabled=!0,w.aisEnabled=!1,w.traceEnabled=!0,w.autoCenterEnabled=!0,w.gridEnabled=!1,w.multibeamEnabled=!1,w.bottomBarEnabled=!0,w.trackingEnabled=!1,w.mapComponent=void 0,d.subscribe(t,function(e,t){if(w.theme=t,void 0!==w.mapComponent){var a;a=d.getTheme().id===d.THEME.NIGHT.id?geolayer.carto.Luminosity.NIGHT:geolayer.carto.Luminosity.DAY,w.mapComponent.setLuminosity(a)}},!0);var S,C,T,E,D,A,x,L,R,P,O;w.mapId="map-"+w.cardId;var M,N=geolayer.carto.BackgroundProviderType[p],F=geolayer.carto.OwnShipSymbolType.ZOOM,_=29.6,U=10.6,k=5,$=15,V=10;w.latitude=void 0,w.longitude=void 0,w.heading=void 0,w.gndcourse=void 0,w.gndspeed=void 0,w.surfspeed=void 0,w.mousePositionControl=void 0,w.stringMouseLatitude="",w.stringMouseLongitude="",w.position={},w.positionStation={},w.wind={},w.measureToolList=["Free","From boat","Disabled"],w.currentMeasureTool=w.measureToolList[2],w.stationViewScale=1e3,w.stationViewScaleList=[15,30,50,100,150,250,500,1e3,1500,2e3,5e3,1e5];var G=function(){l.getCapabilities().then(function(e){w.mapComponent.addCommonLayers(e)})["catch"](function(e){o.show(o.simple().textContent(s("translate")("views.map.qgis.failed")).hideDelay(1e4).highlightClass("md-warn").position("bottom right"))})},B=function(){w.mapComponent.addBoundariesLayer()};w.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void w.logger.error("config and/or deviceId and/or frameId not defined!"):(w.deviceId=this.config.deviceId,x=this.config.frameId,L=this.config.frameMobileId,R=this.config.frameAisId,S=this.config.deviceId,C=this.config.deviceId,T=this.config.weatherId,E=this.config.mobileDeviceId,D=this.config.lestDeviceId,A=this.config.aisDeviceId,P=this.config.multibeamId,O=this.config.trawlingId,w.currentMode=this.mode,console.log(this.config.ship),angular.isDefined(this.config.ship)?(angular.isDefined(this.config.ship.length)&&(_=this.config.ship.length),angular.isDefined(this.config.ship.beam)&&(U=this.config.ship.beam),angular.isDefined(this.config.ship.xOffset)&&(k=this.config.ship.xOffset),angular.isDefined(this.config.ship.yOffset)&&($=this.config.ship.yOffset),angular.isDefined(this.config.ship.lengthVector)&&(V=this.config.ship.lengthVector,y.setLengthVector(V))):w.logger.error("ship properties not defined!"),b(),M=i(g,1e3),void a(h,500))},w.$onDestroy=function(){angular.isDefined(I)&&i.cancel(I),y.destroyDataListener(S,C,T,A,E,D,P),i.cancel(g)},w.onMeasureToolChange=function(e){switch(w.currentMeasureTool=e,w.mapComponent.getMeasureTool().setActive(!1),w.mapComponent.getOwnShipMeasureTool().setActive(!1),e){case"Free":w.mapComponent.getMeasureTool().setActive(!0);break;case"From boat":w.mapComponent.getOwnShipMeasureTool().setActive(!0)}},w.clearMeasures=function(){w.mapComponent.getMeasureTool().resetTool(),w.mapComponent.getOwnShipMeasureTool().resetTool()},w.onStationViewScaleChange=function(){angular.isDefined(w.positionStation.latitude)&&angular.isDefined(w.positionStation.longitude)&&(w.mapComponent.setStationViewCenterAndScale(w.positionStation.latitude,w.positionStation.longitude,w.stationViewScale),
w.config.stationViewScale=w.stationViewScale)},w.showMultibeam=function(){w.mapComponent.showSMF(w.multibeamEnabled=!w.multibeamEnabled),y.clearMultibeamArray(),w.config.multibeamEnabled=w.multibeamEnabled},w.focusOnBoat=function(){w.mapComponent.setAutoCenterMode(w.autoCenterEnabled=!w.autoCenterEnabled),w.config.autoCenterEnabled=w.autoCenterEnabled},w.showRoute=function(){w.mapComponent.setShowRouteMode(w.routeEnabled=!w.routeEnabled),w.config.routeEnabled=w.routeEnabled},w.showAIS=function(){w.mapComponent.setShowAISMode(w.aisEnabled=!w.aisEnabled),w.config.aisEnabled=w.aisEnabled},w.showTrace=function(){w.mapComponent.setShowTraceMode(w.traceEnabled=!w.traceEnabled),w.config.traceEnabled=w.traceEnabled},w.showGrid=function(){w.mapComponent.showGraticule(w.gridEnabled=!w.gridEnabled),w.config.gridEnabled=w.gridEnabled},w.showBottomBar=function(){w.bottomBarEnabled=!w.bottomBarEnabled,w.config.bottomBarEnabled=w.bottomBarEnabled},w.toggleLayerMenu=function(){w.showLayerMenu=!w.showLayerMenu},w.getCustomPointMode=function(){return w.mapComponent?w.mapComponent.getCustomPointMode():"readonly"},w.getCustomRouteMode=function(){return w.mapComponent?w.mapComponent.getCustomRouteMode():"readonly"},w.onToggleCustomPointMode=function(e){w.mapComponent.toggleCustomPointLayerMode(e),w.mapComponent.toggleCustomRouteLayerMode("readonly")},w.onToggleCustomRouteMode=function(e){w.mapComponent.toggleCustomRouteLayerMode(e),w.mapComponent.toggleCustomPointLayerMode("readonly")},w.isModeNavigation=function(){return w.currentMode===m.MODE.NAVIGATION}}e.$inject=["$log","$scope","$timeout","$interval","formatterService","$location","$mdToast","$filter","themeService","qgisService","statusService","MapServiceProvider","MAP","GEOMOD_SERVER_ADDRESS","MAP_BACKGROUND"],angular.module("tsa.tsaViews.map",[]).component("tsaMap",{templateUrl:"app/tsa-views/map/map.html",controllerAs:"ctrl",controller:e,bindings:{onChangeCardType:"&",cardId:"@",config:"=",mode:"@"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d,l,c,u,m,v,p){var g=function(){function e(e){var t=e.timestamp;R.position.latitude=parseFloat(e.value[l.LATITUDE]),R.position.longitude=parseFloat(e.value[l.LONGITUDE]),R.position.heading=parseFloat(e.value[l.HEADING]),R.position.gndcourse=parseFloat(e.value[l.GROUND_COURSE]),R.position.gndspeed=parseFloat(e.value[l.GROUND_SPEED]).toFixed(2),R.position.surfspeed=parseFloat(e.value[l.SURFACE_SPEED]),R.position.stringLatitude=i.parseLatToString(R.position.latitude),R.position.stringLongitude=i.parseLongToString(R.position.longitude),void 0!==R.position.longitude&&void 0!==R.position.latitude&&(P++,60===P&&(M.push({latitude:R.position.latitude,longitude:R.position.longitude,timestamp:t}),M.length>500&&(M=M.slice(1)),R.traceArray=[],angular.forEach(M,function(e,t){R.traceArray.push(e.latitude,e.longitude)},this),P=0))}function s(e,t,a,i,n,r,o){R.multibeamArray.length>99&&(R.multibeamArray=R.multibeamArray.slice(1)),R.multibeamArray.push([e,t,a,i,n,r,o])}function g(e){var t=[],a=[];t=e.value[c.ALONG].map(parseFloat),a=e.value[c.ACROSS].map(parseFloat);for(var i=0,n=0,r=0,o=0,d=0;d<a.length;d++)i>a[d]&&(i=a[d],n=t[d]),r<a[d]&&(r=a[d],o=t[d]);s(R.position.latitude,R.position.longitude,R.position.heading,-i,-n,r,o)}function f(e){if("start"===e.value[p.COMMENT][0]){var t={Latitude:R.position.latitude,Longitude:R.position.longitude,ActionCode:"DEBTR",Field1:"start",Field2:""};R.mapComponent.addTrawlingFeature(t),R.mapComponent.addPointToTraceRT([R.position.latitude,R.position.longitude])}else if("trawling"===e.value[p.COMMENT][0])0===O&&(R.mapComponent.addPointToTraceRT([R.position.latitude,R.position.longitude]),O=19),O--;else if("stop"===e.value[p.COMMENT][0]){var t={Latitude:R.position.latitude,Longitude:R.position.longitude,ActionCode:"FINTR",Field1:"end",Field2:""};R.mapComponent.addTrawlingFeature(t),R.mapComponent.addPointToTraceRT([R.position.latitude,R.position.longitude]),R.mapComponent.clearTraceRT()}}function h(e){var t=e.value[d.LATITUDE].map(parseFloat),a=e.value[d.LONGITUDE].map(parseFloat);R.route=[];for(var i=0;i<t.length;i++)R.route.push(t[i],a[i])}function b(e){R.lastMobileTimestamp=n.getServerTime().time;var t=parseFloat(e.value[m.LATITUDE]),a=parseFloat(e.value[m.LONGITUDE]),i=0;R.mobileArray[0]=[t,a,i+90,geolayer.carto.MobileType.MOBILE,geolayer.carto.MobileStatus.ALIVE]}function w(e){R.lastMobileTimestamp=n.getServerTime().time;var t=parseFloat(e.value[m.LATITUDE]),a=parseFloat(e.value[m.LONGITUDE]),i=0;R.mobileArray[1]=[t,a,i+90,geolayer.carto.MobileType.LEST,geolayer.carto.MobileStatus.ALIVE]}function y(e){var t,a=parseFloat(e.value[v.LATITUDE]),i=parseFloat(e.value[v.LONGITUDE]),n=parseFloat(e.value[v.HEAD]),r=parseFloat(e.value[v.MMSI]),o=(new Date).getTime(),s=!1,d=0;for(d=0;d<R.AISArray.length;d++)t=R.AISArray[d],s===!1&&t[1]===r&&(R.AISArray[d]=[o,r,a,i,n,geolayer.carto.MobileType.AIS,geolayer.carto.MobileStatus.ALIVE],s=!0);for(s===!1&&(R.AISArray[R.AISArray.length]=[o,r,a,i,n,geolayer.carto.MobileType.AIS,geolayer.carto.MobileStatus.ALIVE]),d=0;d<R.AISArray.length;d++)if(t=R.AISArray[d],t[1]===r){var l=o-t[0];l>3e5&&R.AISArray.splice(d,1)}}var I,S,C,T,E,D,A,x,L,R=(t.getInstance("MapService"),this),P=0,O=0,M=[];return R.componentNumber=0,R.lengthVector=15,R.stationInit=!0,R.route=[],R.traceArray=[],R.position={latitude:void 0,longitude:void 0,heading:void 0,gndcourse:void 0,gndspeed:void 0,surfspeed:void 0,stringLatitude:void 0,stringLongitude:void 0},R.positionStation={latitude:void 0,longitude:void 0},R.wind={windSpeed:0,windHeading:0},R.AISArray=[],R.mobileArray=[],R.lastMobileTimestamp,R.multibeamArray=[],{clearMultibeamArray:function(){R.multibeamArray=[]},setLengthVector:function(e){R.lengthVector=e},setMapComponent:function(e){R.mapComponent=e},getMapComponent:function(){return R.mapComponent},clearAISArray:function(){R.AISArray=[]},getAISArray:function(){return R.AISArray},clearMobileArray:function(){R.mobileArray=[]},getMobileArray:function(){return R.mobileArray},getMultibeamArray:function(){return R.multibeamArray},getPosition:function(){return R.position},getPositionStation:function(){return R.positionStation},getRoute:function(){return R.route},getLastMobileTimestamp:function(){return R.lastMobileTimestamp},getTraceArray:function(){return R.traceArray},getWind:function(){return R.wind},getArchiveTrawling:function(){var e=n.getServerTime().time-864e5,t=n.getServerTime().time,a=new Date(e),i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+"-"+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds(),a=new Date(t),s=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+"-"+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds(),d="trawling",l="EU_TRAWLING",c=([new r.Variable("lat",d,l),new r.Variable("long",d,l),new r.Variable("comment",d,l)],o.getArchiveAllData("EU_TRAWLING",i,s));c.then(function(e){var t,a,i={},n=[],r=!1,o=!1,s=!1;angular.forEach(e.data,function(e){angular.forEach(e.data,function(e){"lat"===e.name&&void 0!==e.samples[0]?t=parseFloat(e.samples[0]):"long"===e.name&&void 0!==e.samples[0]?a=parseFloat(e.samples[0]):"comment"===e.name&&"start"===e.samples[0]?r=!0:"comment"===e.name&&"stop"===e.samples[0]?o=!0:"comment"===e.name&&"trawling"===e.samples[0]&&(s=!0)}),r&&(i={Latitude:t,Longitude:a,ActionCode:"DEBTR",Field1:"start",Field2:""},R.mapComponent.addTrawlingFeature(i),r=!1),o&&(i={Latitude:t,Longitude:a,ActionCode:"FINTR",Field1:"end",Field2:""},R.mapComponent.addTrawlingFeature(i),o=!1,R.mapComponent.addTrawlingTrace(n),n=[]),s&&(n.push(t),n.push(a),s=!1)})})},initDataListener:function(t,i,r,o,s,l,m,v,P,O,M){if(R.lastMobileTimestamp=n.getServerTime().time,0===R.componentNumber){if(I=a.registerForDevice(t).registerForFrame(i),I.promise.then({},{},e),D=a.registerForDevice(r).registerForFrame(d.FRAME),D.promise.then({},{},h),E=a.registerForDevice(o).registerForFrame(c.FRAME),E.promise.then({},{},g),angular.isDefined(M)&&(A=a.registerForDevice(M).registerForFrame(p.FRAME),A.promise.then({},{},f)),angular.isDefined(s)){var N,F,_=a.registerForDevice(s);x=_.registerForData(u.FRAME,u.TRUE_AIR_SPEED),x.promise.then({},{},function(e){F=sprintf("%d",e.value),R.wind.windSpeed=F}),L=_.registerForData(u.FRAME,u.TRUE_AIR_HEADING),L.promise.then({},{},function(e){N=sprintf("%d",e.value),R.wind.windHeading=N})}angular.isDefined(l)&&(S=a.registerForDevice(l).registerForFrame(m),S.promise.then({},{},y)),angular.isDefined(v)&&(C=a.registerForDevice(v).registerForFrame(O),C.promise.then({},{},b)),angular.isDefined(P)&&(T=a.registerForDevice(P).registerForFrame(O),T.promise.then({},{},w))}else R.componentNumber++},destroyDataListener:function(e,t,i,n,r,o,s){if(0===R.componentNumber){void 0!==I&&a.registerForDevice(e).unregisterForFrame(I),void 0!==D&&a.registerForDevice(t).unregisterForFrame(D),void 0!==x&&a.registerForDevice(i).unregisterForData(x),void 0!==L&&a.registerForDevice(i).unregisterForData(L),void 0!==S&&a.registerForDevice(n).unregisterForData(S),void 0!==C&&a.registerForDevice(r).unregisterForData(C),void 0!==T&&a.registerForDevice(o).unregisterForData(T),void 0!==E&&a.registerForDevice(s).unregisterForData(E);var d=document.querySelector("#custom-route-file");d&&d.removeEventListener("change",R.onUploadRoutes)}}}};return{getInstance:function(){return new g}}}e.$inject=["$interval","$log","acquisitionService","formatterService","statusService","archiveService","restService","MAP","WAYPOINTS","NAVIGATION","MULTIBEAM","WEATHER","MOBILE","AIS","TRAWLING"],angular.module("tsa.tsaViews.map").constant("MAP",{MODE:{NAVIGATION:"navigation",STATION:"station"}}),angular.module("tsa.tsaViews.map").factory("MapServiceProvider",e)}(),function(){"use strict";function e(e,t,a,i,n,r,o,s){function d(e){var t=m.mapComponent.transform(e.detail.feature.getGeometry().getCoordinates(),"EPSG:3857","EPSG:4326");m.currentCustomPoint={feature:e.detail.feature,coordinates:t,label:e.detail.feature.getProperties().name,edited:!!e.detail.feature.getProperties().name};var a=m.mapComponent.getMap().getPixelFromCoordinate(e.detail.feature.getGeometry().getCoordinates());m.currentPointEdit={left:""+parseInt(a[0])+"382px",top:""+parseInt(a[1])+"px"}}function l(){m.isConnected=void 0!==s.getCurrentUser()}function c(e){return function(){o.pushQGISProject(e.result).then(function(e){i.hide(),m.currentPointEdit=null})["catch"](function(e){console.log("zajegazezae"+e)})}}function u(e){if(document.querySelector(".custom-point-hover"))for(var t=document.getElementsByClassName("custom-point-hover");t.length>0;)t[0].parentNode.removeChild(t[0]);(e.detail.features.length>0&&e.detail.showLabel||!e.detail.showLabel&&1===e.detail.features.length)&&e.detail.features.forEach(function(e){if(e.properties.geometry&&e.id&&e.properties.name){var t=m.mapComponent.getMap().getPixelFromCoordinate(e.properties.geometry.getCoordinates());if(t.length){var a=document.createElement("div");a.id=e.id,a.classList.add("custom-point-hover"),a.style.position="absolute",a.style.top=""+t[1]+"px",a.innerHTML=""+e.properties.name,document.querySelector("tsa-map").appendChild(a);var i=a.offsetWidth/2;a.style.left=""+(t[0]+381.5-i)+"px"}}})}var m=this;m.logger=e.getInstance("GPS-tsa-view"),m.selectedLayer=null,m.backdrop=null,m.contextualOptionMenu=null,m.opacity=1,m.layer=null,m.background=geolayer.carto.BackgroundProviderType.OPENSEAMAP,m.openCustomPointCreatedDialog=function(e){if(t.customPointForm.$setPristine(),t.customPointForm.$setUntouched(),m.currentPointEdit=null,"undefined"!=typeof e){var a=m.mapComponent.transform(e.detail.feature.getGeometry().getCoordinates(),"EPSG:3857","EPSG:4326");m.currentCustomPoint={feature:e.detail.feature,coordinates:a,"new":!0,label:e.detail.feature.getProperties().name,edited:!!e.detail.feature.getProperties().name}}i.show({contentElement:"#custom-points-create-dialog",parent:angular.element(document.querySelector("tsa-map")),clickOutsideToClose:!1})},m.openCustomRouteDialog=function(){i.show({contentElement:"#custom-routes-edit-dialog",parent:angular.element(document.querySelector("tsa-map")),clickOutsideToClose:!0}),m.currentRouteEdit=null},m.$onInit=function(){l(),t.saveUploadPoint=!0,t.saveUploadRoute=!0,t.$watch(function(){return m.mapComponent},function(e){e&&(m.mapComponent=e,m.mapComponent.onCustomPointCreated(m.openCustomPointCreatedDialog),m.mapComponent.onCustomPointContextMenu(d),m.mapComponent.onCustomPointHover(u))}),a.$on("current-user-changed",function(){l()}),document.querySelector("tsa-map").addEventListener("click",function(e){document.getElementById("custom-points-edit-dialog").contains(e.target)||(m.currentPointEdit=null,m.currentRouteEdit=null)})},m.$postLink=function(){var e=document.querySelector("#custom-route-file");e&&e.addEventListener("change",m.enableUploadRoutes);var t=document.querySelector("#custom-point-file");t&&t.addEventListener("change",m.enableUploadPointSave);var a=document.querySelector("#qgis-upload-project");a&&a.addEventListener("change",m.enableUploadQGISFile)},m.getTreeLayer=function(){return m.mapComponent&&m.mapComponent.treeLayers?m.mapComponent.treeLayers.branches:[]},m.isBranchIsIndeterminate=function(e){if(e.hadChild()){var t=e.getChildren().filter(function(e){return!e.getVisible()});return 0!==t.length&&t.length!==e.getChildren().length}return!1},m.openMenu=function(e,t,a){m.layer=a,m.opacity=m.layer.getOpacity(),e.open(t)},m.setLayerOpacity=function(){m.layer.setOpacity(parseFloat(m.opacity))},m.toggleMapBackground=function(){m.mapComponent.setMarineBackground(m.background)},m.getBackgroundLayer=function(){return m.mapComponent&&m.mapComponent.getBackgroundLayerGroup?m.mapComponent.getBackgroundLayerGroup():null},m.onToggleCustomRouteMode=function(){var e="edit"==m.mapComponent.getCustomRouteMode()?"readonly":"edit";m.mapComponent.toggleCustomRouteLayerMode(e),m.mapComponent.toggleCustomPointLayerMode("readonly")},m.openUploadRouteDialog=function(e){i.show({contentElement:"#custom-routes-upload-dialog",parent:angular.element(document.querySelector("tsa-map")),targetEvent:e,clickOutsideToClose:!0})},m.closeRouteDialog=function(){i.hide(),m.customRouteEdit=null,m.currentCustomRoute=null},m.enableUploadRoutes=function(e){t.saveUploadRoute=!1,t.customRouteFile=e.target.files},m.cancelImportRoutes=function(){i.hide(),t.saveUploadRoute=!0,angular.element("#custom-route-file").val(null)},m.onUploadRoutes=function(){var e=t.customRouteFile;if(e&&0!==e.length){for(var a=0;a<e.length;a++)m.mapComponent.importCustomRoute(e[a]);i.hide(),angular.element("#custom-route-file").val(null)}},m.onRemoveAllCustomRoutes=function(){m.mapComponent.removeAllCustomRoutes()},m.onExportRoutes=function(e){var t=m.mapComponent.exportCustomRoutes(e);document.querySelector("#custom-routes-export-"+e).href="data:text/csv;base64,"+btoa(t)},m.getCustomRouteMode=function(){return m.mapComponent?m.mapComponent.getCustomRouteMode():"readonly"},m.saveCustomRoute=function(){m.mapComponent.updateSelectedRouteCoordinate(m.currentCustomRoute.coordinates),i.hide(),m.currentPointEdit=null},m.deleteCustomRoute=function(){m.currentRouteEdit=null,m.mapComponent.removeCustomRoute(m.currentCustomRoute.feature),i.hide()},m.onToggleCustomPointMode=function(){var e="edit"==m.mapComponent.getCustomPointMode()?"readonly":"edit";m.mapComponent.toggleCustomPointLayerMode(e),m.mapComponent.toggleCustomRouteLayerMode("readonly")},m.openUploadPointDialog=function(e){i.show({contentElement:"#custom-points-upload-dialog",parent:angular.element(document.querySelector("tsa-map")),targetEvent:e,clickOutsideToClose:!0})},m.closePointDialog=function(){m.currentCustomPoint["new"]&&m.mapComponent.removeCustomPoint(m.currentCustomPoint.feature),i.hide(),m.currentPointEdit=null,m.currentCustomPoint=null},m.onUploadPoints=function(){var e=t.customPointFile;if(e&&0!==e.length){for(var a=0;a<e.length;a++)m.mapComponent.importCustomPoint(e[a]);i.hide(),angular.element("#custom-point-file").val(null)}},m.enableUploadPointSave=function(e){t.saveUploadPoint=!1,t.customPointFile=e.target.files},m.onRemoveAllCustomPoints=function(){m.currentPointEdit=null,m.mapComponent.removeAllCustomPoints()},m.toggleCustomPointLabel=function(){m.mapComponent.setCustomPointShowLabel(!m.mapComponent.getCustomPointShowLabel())},m.getCustomPointLabelState=function(){return!!m.mapComponent&&m.mapComponent.getCustomPointShowLabel()},m.onExportPoints=function(e){var t=m.mapComponent.exportCustomPoint(e);document.querySelector("#custom-points-export-"+e).href="data:text/csv;base64,"+btoa(t)},m.cancelImportPoint=function(){i.hide(),t.saveUploadPoint=!0,angular.element("#custom-point-file").val(null)},m.getCustomPointMode=function(){return m.mapComponent?m.mapComponent.getCustomPointMode():"readonly"},m.saveCustomPoint=function(){var e=m.mapComponent.transform(m.currentCustomPoint.coordinates,"EPSG:4326","EPSG:3857");m.currentCustomPoint.feature.getGeometry().setCoordinates(e),m.currentCustomPoint.feature.setProperties({name:m.currentCustomPoint.label}),i.hide(),m.currentPointEdit=null,m.mapComponent.setCustomPointShowLabel(m.mapComponent.getCustomPointShowLabel())},m.deleteCustomPoint=function(){m.currentPointEdit=null,m.mapComponent.removeCustomPoint(m.currentCustomPoint.feature),i.hide()},m.onOpenCasinoDialog=function(e){m.casinoState="init",m.casinoLoading=!1,m.casinoErrorLoad=!1,m.cruises=[],m.selectedCruises=[],m.devices=[],m.selectedDevices=[],m.casinoConnectionParams={url:"localhost:3306",login:"root",password:"admin"},i.show({contentElement:"#casino-dialog",parent:angular.element(document.querySelector("tsa-map")),targetEvent:e,clickOutsideToClose:!0})},m.casinoConnection=function(){m.casinoLoading=!0,n.connect(m.casinoConnectionParams.url,m.casinoConnectionParams.login,m.casinoConnectionParams.password).then(function(){return n.getCruises()}).then(function(e){m.casinoErrorLoad=!1,m.casinoState="cruises",m.casinoLoading=!1,m.cruises=e})["catch"](function(){m.casinoErrorLoad=!0,m.casinoLoading=!1})},m.casinoCanConnect=function(){return!m.casinoConnectionParams||!m.casinoConnectionParams.url.trim()||!m.casinoConnectionParams.login.trim()||!m.casinoConnectionParams.password.trim()||m.casinoLoading},m.onChangeCruise=function(e,t){e.selected?m.selectedCruises.push(e.FullName):m.selectedCruises=m.selectedCruises.filter(function(t){return t!==e.FullName})},m.casinoSelectCruises=function(){n.setSelectCruises(m.selectedCruises),m.casinoErrorLoad=!1,n.getCasinoDevices(!0,["FFIL","DVIR","DEBTR","FINTR"]).then(function(e){m.casinoLoading=!1,m.devices=e,m.casinoState="devices"})["catch"](function(){m.casinoLoading=!1,m.casinoErrorLoad=!0})},m.onChangeDevices=function(e){if(e.selected){var t={name:e.DeviceName,code:e.DeviceCode,actions:[]};e.actions.map(function(e){return t.actions.push({name:e.ActionName,code:e.ActionCode}),e.selected=!0,e}),m.selectedDevices.push(t)}else m.selectedDevices=m.selectedDevices.filter(function(t){return t.name!==e.DeviceName}),e.indeterminate=!1,e.actions.map(function(e){return e.selected=!1,e})},m.onChangeAction=function(e){var t=e.actions.filter(function(e){return e.selected});e.indeterminate=t.length!==e.actions.length},m.casinoSelectDevices=function(){n.setSelectDevices(m.selectedDevices),0!==m.selectedDevices.length&&m.casinoLoadData()},m.casinoLoadData=function(){m.casinoErrorLoad=!1;var e=n.getSelectCruises(),t=n.getSelectDevices(),a=[];m.fullfilledEventsPromise=0,e.forEach(function(e){t.forEach(function(t){t.actions.forEach(function(i){var r=n.getEvents(e,t.code,i.code).then(function(t){return m.fullfilledEventsPromise++,{name:e,events:t}});a.push(r)})})}),r.all(a).then(function(e){var t={};e.forEach(function(e){t[e.name]||(t[e.name]=[]),t[e.name]=t[e.name].concat(e.events)}),m.mapComponent.addCasinoLayers(t),i.hide(),m.currentPointEdit=null})["catch"](function(){m.casinoErrorLoad=!0})},m.openUploadQGISDialog=function(e){i.show({contentElement:"#qgis-upload-project-dialog",parent:angular.element(document.querySelector("tsa-map")),targetEvent:e,clickOutsideToClose:!0})},m.closeUploadQGISDialog=function(e){m.saveUploadQGIS=!1,angular.element("input#qgis-upload-project").val(null),i.hide(),m.qgisFileUpload=null},m.onQGISFileUpload=function(e){var t=m.qgisFileUpload;if(t&&0!==t.length){for(var a=0;a<t.length;a++){var n=new FileReader;n.readAsDataURL(t[a]),n.onload=c(n)}angular.element("input#qgis-upload-project").val(null),i.hide()}},m.enableUploadQGISFile=function(e){m.saveUploadQGIS=!0,m.qgisFileUpload=e.target.files}}e.$inject=["$log","$scope","$rootScope","$mdDialog","casinoService","$q","qgisService","userService"],angular.module("tsa.tsaViews.mapSidemenu",[]).component("tsaMapSidemenu",{templateUrl:"app/tsa-views/map-sidemenu/map-sidemenu.html",controllerAs:"ctrl",controller:e,bindings:{mapComponent:"="}})}(),function(){"use strict";function e(e,t,a,i){var n=this;n.logger=e.getInstance("menu-tsa-view"),n.handler,n.menu="";var r=function(){a({url:"/api/menu",method:"GET",transformResponse:[function(e){return e}]}).then(function(e){n.menu=e.data})};n.$onInit=function(){r(),n.handler=i(r,3e4)},n.$onDestroy=function(){i.cancel(handler)}}e.$inject=["$log","$scope","$http","$interval"],angular.module("tsa.tsaViews.menu",[]).component("tsaMenu",{templateUrl:"app/tsa-views/menu/menu.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a){var i=this;i.lastMessage=a.lastMessage}e.$inject=["$timeout","$scope","messagingService"],angular.module("tsa.tsaViews.message",[]).component("tsaMessage",{templateUrl:"app/tsa-views/message/message.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){var a=this;a.logger=e.getInstance("tsa-mobile"),a.$onInit=function(){a.deviceId=this.config.deviceId,a.lestDeviceId="LEST_NAV",a.frameId=this.config.frameId,a.MOBILE=t}}e.$inject=["$log","MOBILE"],angular.module("tsa.tsaViews.mobile",[]).component("tsaMobile",{templateUrl:"app/tsa-views/mobile/mobile.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d){function l(){void 0!==S&&S.destroy(),g=document.getElementById(v.canvasId),void 0!=g&&(S=Chart.Scatter(g,{data:C,options:T}))}function c(){b=r.registerForDevice(v.deviceId).registerForFrame(v.frameId),b.promise.then({},{},function(e){w&&(w=!1,C.datasets[0].borderColor=y,C.datasets[1].borderColor=I),p=e.timestamp;var t,a,i,r=e.value[n.ACROSS];v.nbValue=e.value[n.DEPTH].length;var o=0;if(C.datasets[0].data=[],C.datasets[1].data=[],angular.forEach(e.value[n.DEPTH],function(e){var n=parseFloat(r[o]);n<0?C.datasets[0].data.push({x:n,y:-parseFloat(e)}):C.datasets[1].data.push({x:n,y:-parseFloat(e)}),(angular.isUndefined(t)||n<t)&&(t=n,i=parseFloat(e)),(angular.isUndefined(a)||n>a)&&(a=n),o++}),angular.isDefined(t)&&angular.isDefined(a)){v.swathValue=a-t,v.verticalDepth=i;var s=Math.max(Math.abs(t),Math.abs(a));S.chart.config.options.scales.xAxes[0].ticks.suggestedMin=-s,S.chart.config.options.scales.xAxes[0].ticks.suggestedMax=s}S.update()})}function u(){f=e(function(){var e=r.registerForDevice(v.deviceId).periodList[v.frameId];angular.isUndefined(e)&&(e=1e3),angular.isDefined(p)&&o.getServerTime().time-p>5*e&&(w=!0,C.datasets[0].borderColor="#BDBDBD",C.datasets[1].borderColor="#BDBDBD",S.update())},1e3)}function m(){s.subscribe(a,function(e,t){T.scales.xAxes[0].gridLines.color=t.gridLinesColor,T.scales.yAxes[0].gridLines.color=t.gridLinesColor,l()})}var v=this;v.logger=i.getInstance("multibeam-tsa-view"),v.canvasId="canvas-mb-"+v.cardId;var p,g,f,h,b,w=!0,y="#F44336",I="#4CAF50",S=void 0,C={datasets:[{xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:y,data:[]},{xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:I,data:[]}]},T={animation:!1,maintainAspectRatio:!1,legend:{display:!1},showLines:!1,tooltips:{enabled:!1},elements:{point:{radius:1,borderWidth:2}},scales:{xAxes:[{type:"linear",position:"top",gridLines:{zeroLineColor:"#9E9E9E",color:"#BDBDBD"}}],yAxes:[{id:"y-axis-1",position:"left",display:!0,scaleLabel:{display:!0,labelString:"Depth (m)"},gridLines:{zeroLineColor:"#9E9E9E",color:"#BDBDBD"},afterTickToLabelConversion:function(e){angular.forEach(e.ticks,function(t,a){e.ticks[a]=Math.abs(t)})},ticks:{suggestedMin:-10}}]}};v.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void v.logger.error("deviceId or/and frameId  not defined!"):(v.deviceId=this.config.deviceId,v.frameId=this.config.frameId,void(h=t(function(){l(),c(),u(),m()},500)))},v.$onDestroy=function(){angular.isDefined(b)&&r.registerForDevice(v.deviceId).unregisterForFrame(b),angular.isDefined(h)&&t.cancel(h),angular.isDefined(f)&&e.cancel(f)}}e.$inject=["$interval","$timeout","$scope","$log","MULTIBEAM","acquisitionService","statusService","themeService","graphUtils"],function(){angular.module("tsa.tsaViews.multibeam",[]).component("tsaMultibeam",{templateUrl:"app/tsa-views/multibeam/multibeam.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}()}(),function(){"use strict";function e(e,t,a,i,n,r){var o=this;o.logger=e.getInstance("navigation-tsa-view"),o.$onInit=function(){function e(e){var t=e.value[i.LATITUDE].map(parseFloat),n=e.value[i.LONGITUDE].map(parseFloat),r=e.value[a.ID],s=e.value[a.INDEX].map(parseInt);1!=t.lenght||1!=n.lenght?o.currentMode=o.MODE.NAVIGATION:o.currentMode=o.MODE.STATION,s.length&&r.length>=s[0]&&(o.currentWptName=r[s[0]-1])}if(angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId))return void o.logger.error("config and/or deviceId and/or frameId not defined!");o.MODE={NAVIGATION:"navigation",STATION:"station"},o.currentMode=o.MODE.NAVIGATION,o.shipId=n,o.isMD="MD"===n,o.currentWptName="",o.statusService=r,o.deviceId=this.config.deviceId,o.frameId=this.config.frameId,o.latitude=a.LATITUDE,o.longitude=a.LONGITUDE,o.heading=a.HEADING,o.sounder=a.SOUNDER,o.groundSpeed=a.GROUND_SPEED,o.groundCourse=a.GROUND_COURSE,o.surfaceSpeed=a.SURFACE_SPEED,o.surfaceCourse=a.SURFACE_COURSE,o.driftSpeed=a.DRIFT_SPEED,o.driftCourse=a.DRIFT_COURSE,o.frameRoutingId=a.FRAME_ROUTING,o.curDist=a.CUR_DIST,o.curCourse=a.CUR_COURSE,o.prevDist=a.PREV_DIST,o.prevCourse=a.PREV_COURSE,o.eta=a.ETA,o.dataViewSize=.8,o.dataFormat="%.1f",o.angleFormat="%.0f",o.positionFormat="coordinate";var s=t.registerForDevice(o.deviceId).registerForFrame(i.FRAME);s.promise.then({},{},e)}}e.$inject=["$log","acquisitionService","NAVIGATION","WAYPOINTS","SHIP_ID","statusService"],angular.module("tsa.tsaViews.navigation",[]).component("tsaNavigation",{templateUrl:"app/tsa-views/navigation/navigation.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a){function i(e,t,a,i){this.deviceId=e,this.frameId=t,this.dataId=a,this.title=i,this.frameDataId=function(e){return arguments.length&&(this.frameId=e.split("!")[0],this.dataId=e.split("!")[1]),this.frameId+"!"+this.dataId},this.remove=function(){o.itemList.splice(o.itemList.indexOf(this),1),n()},this.up=function(){var e=o.itemList.indexOf(this),t=e-1;if(!(t<0)){var a=o.itemList[t];o.itemList[e]=a,o.itemList[t]=this,n()}},this.down=function(){var e=o.itemList.indexOf(this),t=e+1;if(!(t>o.itemList.length-1)){var a=o.itemList[t];o.itemList[t]=this,o.itemList[e]=a,n()}}}function n(){o.config={},o.config.type="Numerical",o.config.dataList=[],angular.forEach(o.itemList,function(e){o.config.dataList.push({deviceId:e.deviceId,frameId:e.frameId,dataId:e.dataId,title:void 0!==e.title?e.title:""})},o)}function r(){void 0!==o.config&&"Numerical"===o.config.type&&angular.forEach(o.config.dataList,function(e){o.itemList.push(new i(e.deviceId,e.frameId,e.dataId,e.title))})}var o=this;o.itemList=[],o.editionMode=!1,o.$onInit=function(){r()},o.addItem=function(){a.showSelectData(e.getEnabledDeviceList()).then(function(e){angular.forEach(e,function(e){o.itemList.push(new i(e.deviceId,e.frameId,e.id))}),n()})}}e.$inject=["acquisitionService","$mdDialog","dialogService"],angular.module("tsa.tsaViews.numerical",["tsa.services.filters"]).component("tsaNumerical",{templateUrl:"app/tsa-views/numerical/numerical.html",controller:e,controllerAs:"numerical",bindings:{cardId:"@",config:"=",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r){function o(){v=document.getElementById(u.canvasId),null!=v&&(p=new createjs.Stage(v),g=new createjs.Container,f=new createjs.Container,p.addChild(g,f),a.$watch(function(){return v.offsetHeight},function(){s()}),a.$watch(function(){return v.offsetWidth},function(){s()}),s())}function s(){if(null!=v){h=v.offsetWidth,b=v.offsetHeight,v.setAttribute("width",h),v.setAttribute("height",b),angular.element(v).parent().find("tsa-data-view .value").css({"font-size":""+b/220+"em"}),angular.element(v).parent().find("tsa-data-view").css({width:""+Math.round(b/3.5)+"px !important","max-width":""+Math.round(b/3.5)+"px"}),p.x=h/2,p.y=b/2;var e=b/100;p.scaleX=p.scaleY=e,d(),g.cache(-h/2,-b/2,h,b,e),l(),c(),p.update()}}function d(){g.removeAllChildren();var e=i.createVessel(u.colors.tick);e.scaleX=.3,e.scaleY=.65,e.y=-12;var t=i.createBackRudder(u.colors.background);t.y=22,t.x=-10,t.scaleX=t.scaleY=.12;var a=i.createBackRudder(u.colors.background);a.y=22,a.x=10,a.scaleX=a.scaleY=.12;var n=i.createBackGauge(u.colors.background);n.y=2,n.x=-10,n.scaleX=.23,n.scaleY=.3,n.rotation=270;var r=i.createBackGauge(u.colors.background);r.y=2,r.x=10,r.scaleX=.23,r.scaleY=.3,r.rotation=270,g.addChild(e,t,a,n,r)}function l(){f.removeAllChildren();var e=u.colors.rudder;Math.abs(Math.round(u.angle.value))>0&&(e=u.angle.value>0?u.colors.red:u.colors.green);var t=i.createRudder(e);t.y=22,t.x=-10,t.scaleX=t.scaleY=.12,t.rotation=u.angle.value;var a=i.createRudder(e);a.y=22,a.x=10,a.scaleX=a.scaleY=.12,a.rotation=u.angle.value;var n=i.createGaugge(u.colors.tick,u.colors.zero,100*u.mainLeft.value/150,u.colors.forward,u.colors.backward);n.y=2,n.x=-10,n.scaleX=.23,n.scaleY=.3,n.rotation=270;var r=i.createGaugge(u.colors.tick,u.colors.zero,100*u.mainRight.value/150,u.colors.forward,u.colors.backward);r.y=2,r.x=10,r.scaleX=.23,r.scaleY=.3,r.rotation=270;var o=u.colors.rudder;o=u.frontPropAngle.value<=180&&u.frontPropAngle.value>=0?u.colors.green:u.colors.red;var s=i.createArrow(o,u.frontTrans.value/2);s.y=-31.5,s.x=0,s.scaleX=s.scaleY=.1,s.rotation=u.frontPropAngle.value,f.addChild(t,a,n,r,s)}function c(){h=v.offsetWidth,b=v.offsetHeight;var e=v.offsetLeft,t=v.offsetTop;u.frontTrans.x=e+.1*h/2,u.frontTrans.y=t+12*b/100,u.frontPropAngle.x=u.frontTrans.x,u.frontPropAngle.y=t+25*b/100,u.mainLeft.x=u.frontTrans.x,u.mainLeft.y=t+50*b/100,u.mainRight.x=e+1.4*h/2,u.mainRight.y=u.mainLeft.y,u.angle.x=e+1*h/2,u.angle.y=t+87*b/100}var u=this,m="[propulsionControllerAt] ";u.canvasId="canvas-propulsion-at-"+u.cardId;var v,p,g,f,h,b;u.readyToDraw=!1,u.colors={background:"#CCCCCC",zero:"#EE2222",tick:"#888888",rudder:"#000000",green:"#11CC11",red:"#EE2222",forward:"#1111DD",backward:"#000000",funkyBackground:"#F3BF52"},u.themeChanged=function(e,t){console.log("propulsion at themechanged")},n.subscribe(a,u.themeChanged),u.$onInit=function(){return console.log(m+"$onInit: deviceId = "+(this.config?this.config.deviceId:"config undefined")),void 0==this.config||void 0==this.config.deviceId?void console.error(m+"device Id not found!"):(u.deviceId=this.config.deviceId,u.navId=this.config.navId,u.device=e.registerForDevice(u.deviceId),u.frameId="atpropulsion",u.navFrameId="shipnav",u.frontTrans={id:"fronttrans"},u.frontPropAngle={id:"frontpropangle"},u.mainLeft={id:"mainleft"},u.mainRight={id:"mainright"},u.angle={id:"angle"},u.fontsize=1,u.frameListener=e.registerForDevice(u.deviceId).registerForFrame(u.frameId),u.frameListener.promise.then({},{},function(e){u.frontTrans.value=e.value[u.frontTrans.id],u.frontPropAngle.value=e.value[u.frontPropAngle.id],u.mainLeft.value=e.value[u.mainLeft.id],
u.mainRight.value=e.value[u.mainRight.id],u.angle.value=e.value[u.angle.id],u.readyToDraw&&(l(),p.update())}),u.heading={id:"heading"},u.gndCourse={id:"gndcourse"},u.gndSpeed={id:"gndspeed"},u.surfCourse={id:"surfcourse"},u.surfSpeed={id:"surfspeed"},u.surfNorth=u.surfWest=u.surfEast=u.surfSouth=void 0,u.gndNorth=u.gndWest=u.gndEast=u.gndSouth=void 0,u.navFrameListener=e.registerForDevice(u.navId).registerForFrame("shipnav"),u.navFrameListener.promise.then({},{},function(e){u.heading.value=e.value[u.heading.id],u.gndCourse.value=e.value[u.gndCourse.id],u.gndSpeed.value=e.value[u.gndSpeed.id],u.surfCourse.value=e.value[u.surfCourse.id],u.surfSpeed.value=e.value[u.surfSpeed.id];var t=u.surfSpeed.value*Math.cos((u.surfCourse.value-u.heading.value)*Math.PI/180);t>=0?(u.surfNorth=t,u.surfSouth=void 0):(u.surfNorth=void 0,u.surfSouth=-t);var a=u.surfSpeed.value*Math.sin((u.surfCourse.value-u.heading.value)*Math.PI/180);a<0?(u.surfWest=-a,u.surfEast=void 0):(u.surfWest=void 0,u.surfEast=a);var i=u.gndSpeed.value*Math.cos((u.gndCourse.value-u.heading.value)*Math.PI/180);i>=0?(u.gndNorth=i,u.gndSouth=void 0):(u.gndNorth=void 0,u.gndSouth=-i);var n=u.gndSpeed.value*Math.sin((u.gndCourse.value-u.heading.value)*Math.PI/180);n<0?(u.gndWest=-n,u.gndEast=void 0):(u.gndWest=void 0,u.gndEast=n),u.readyToDraw}),void t(function(){o(),u.readyToDraw=!0},500))},u.$onDestroy=function(){angular.isDefined(u.frameListener)&&(e.registerForDevice(u.deviceId).unregisterForFrame(u.frameListener),e.registerForDevice(u.navId).unregisterForFrame(u.navFrameListener))}}e.$inject=["acquisitionService","$timeout","$scope","easelJsUtils","themeService","NAVIGATION"],angular.module("tsa.tsaViews.propulsionAt",[]).component("tsaPropulsionAt",{templateUrl:"app/tsa-views/propulsion-at/propulsion-at.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s){function d(){g=document.getElementById(v.canvasId),null!=g&&(f=new createjs.Stage(g),h=new createjs.Container,b=new createjs.Container,f.addChild(h,b),a.$watch(function(){return g.offsetHeight},function(){l()}),a.$watch(function(){return g.offsetWidth},function(){l()}),l())}function l(){if(null!=g){w=g.offsetWidth,y=g.offsetHeight,g.setAttribute("width",w),g.setAttribute("height",y),angular.element(g).parent().find("tsa-data-view .value").css({"font-size":""+y/220+"em"}),angular.element(g).parent().find("tsa-data-view").css({width:""+Math.round(y/3.5)+"px !important","max-width":""+Math.round(y/3.5)+"px"}),f.x=w/2,f.y=y/2;var e=y/100;f.scaleX=f.scaleY=e,c(),h.cache(-w/2,-y/2,w,y,e),u(),m(),f.update()}}function c(){h.removeAllChildren();var e=i.createVessel(v.colors.tick);e.scaleX=.3,e.scaleY=.65,e.y=-12,h.addChild(e);var t=i.createBackRudder(v.colors.background);t.y=22,t.x=-10,t.scaleX=t.scaleY=.12,h.addChild(t);var a=i.createBackRudder(v.colors.background);a.y=22,a.x=10,a.scaleX=a.scaleY=.12,h.addChild(a);var n=i.createBackGauge(v.colors.background);n.y=2,n.x=-35,n.scaleX=.23,n.scaleY=.3,n.rotation=270,h.addChild(n);var r=i.createBackGauge(v.colors.background);r.y=2,r.x=35,r.scaleX=.23,r.scaleY=.3,r.rotation=270,h.addChild(r)}function u(){function e(e,t){if(angular.isDefined(e)){var a=v.colors.rudder;Math.abs(Math.round(e))>0&&(a=e>0?v.colors.green:v.colors.red);var n=i.createRudder(a);n.y=22,n.x=t?10:-10,n.scaleX=n.scaleY=.12,n.rotation=-e,b.addChild(n)}}function t(e,t){if(angular.isDefined(e)&&Math.abs(Math.round(e))>0){var a=e>0?v.colors.green:v.colors.red,n=i.createArrow(a,Math.abs(e));n.y=t,n.x=0,n.scaleX=n.scaleY=.1,n.rotation=e>0?90:270,b.addChild(n)}}function a(e,t){var a=i.createGaugge(v.colors.tick,v.colors.zero,e,v.colors.forward,v.colors.backward);a.y=2,a.x=t,a.scaleX=.23,a.scaleY=.3,a.rotation=270,b.addChild(a)}b.removeAllChildren(),e(v.PROP_VDR.starboardRudder.value,!1),e(v.PROP_VDR.portRudder.value,!0),t(v.PROP_VDR.trans1.value,-38),t(v.PROP_VDR.trans2.value,-25),t(v.PROP_VDR.trans3.value,-12),t(v.PROP_VDR.trans4.value,10),a(v.PROP_ENGINE.portMain.value,35),a(v.PROP_ENGINE.starboardMain.value,-35)}function m(){w=g.offsetWidth,y=g.offsetHeight;var e=g.offsetLeft,t=g.offsetTop;v.PROP_VDR.trans1.x=e+1.6*w/2,v.PROP_VDR.trans1.y=t+12*y/100,v.PROP_VDR.trans2.x=e+1.6*w/2,v.PROP_VDR.trans2.y=t+25*y/100,v.PROP_VDR.trans3.x=e+1.6*w/2,v.PROP_VDR.trans3.y=t+38*y/100,v.PROP_VDR.trans4.x=e+1.6*w/2,v.PROP_VDR.trans4.y=t+60*y/100,v.PROP_VDR.portRudder.x=e+1.05*w/2,v.PROP_VDR.portRudder.y=t+94*y/100,v.PROP_VDR.starboardRudder.x=e+.6*w/2,v.PROP_VDR.starboardRudder.y=t+94*y/100,v.PROP_ENGINE.portMain.x=e+1.3*w/2,v.PROP_ENGINE.portMain.y=t+80*y/100,v.PROP_ENGINE.starboardMain.x=e+.4*w/2,v.PROP_ENGINE.starboardMain.y=t+80*y/100}var v=this,p="[propulsionControllerAt] ";v.canvasId="canvas-propulsion-pp-"+v.cardId,v.DA={deviceId:"PP_ENGINE",frameId:o.FRAME,datas:[{dataId:o.DA1_POWER},{dataId:o.DA2_POWER},{dataId:o.DA3_POWER},{dataId:o.DA4_POWER}]},v.PROP_VDR={deviceId:"PP_VDR",frameId:s.FRAME,trans1:{id:s.TRANS1_PROP,value:void 0,lastTimeStamp:0},trans2:{id:s.TRANS2_PROP,value:void 0,lastTimeStamp:0},trans3:{id:s.TRANS3_PROP,value:void 0,lastTimeStamp:0},trans4:{id:s.TRANS4_PROP,value:void 0,lastTimeStamp:0},starboardRudder:{id:s.RUDDER_STARBOARD,value:void 0,lastTimeStamp:0},portRudder:{id:s.RUDDER_PORT,value:void 0,lastTimeStamp:0}},v.PROP_ENGINE={deviceId:"PP_ENGINE",frameId:o.FRAME,starboardMain:{id:o.MAIN_STARBOARD,value:void 0,lastTimeStamp:0},portMain:{id:o.MAIN_PORT,value:void 0,lastTimeStamp:0}};var g,f,h,b,w,y;v.readyToDraw=!1,v.colors={background:"#CCCCCC",zero:"#EE2222",tick:"#888888",rudder:"#000000",green:"#11CC11",red:"#EE2222",forward:"#1111DD",backward:"#000000",funkyBackground:"#F3BF52"},v.themeChanged=function(e,t){console.log("propulsion at themechanged")},n.subscribe(a,v.themeChanged),v.$onInit=function(){function a(e,t){t.value.hasOwnProperty(e.id)&&(e.value=t.value[e.id][0],e.lastTimeStamp=(new Date).getTime())}function i(e,t){t-e.lastTimeStamp>5e3&&(e.value=void 0)}console.log(p+"$onInit: deviceId = "+(this.config?this.config.deviceId:"config undefined")),v.fontsize=1,v.PROP_VDR.frameListener=e.registerForDevice(v.PROP_VDR.deviceId).registerForFrame(v.PROP_VDR.frameId),v.PROP_VDR.frameListener.promise.then({},{},function(e){a(v.PROP_VDR.trans1,e),a(v.PROP_VDR.trans2,e),a(v.PROP_VDR.trans3,e),a(v.PROP_VDR.trans4,e),a(v.PROP_VDR.portRudder,e),a(v.PROP_VDR.starboardRudder,e),v.readyToDraw&&(u(),f.update())}),v.PROP_ENGINE.frameListener=e.registerForDevice(v.PROP_ENGINE.deviceId).registerForFrame(v.PROP_ENGINE.frameId),v.PROP_ENGINE.frameListener.promise.then({},{},function(e){a(v.PROP_ENGINE.portMain,e),a(v.PROP_ENGINE.starboardMain,e)}),v.timeout=setInterval(function(){var e=(new Date).getTime();i(v.PROP_VDR.trans1,e),i(v.PROP_VDR.trans2,e),i(v.PROP_VDR.trans3,e),i(v.PROP_VDR.trans4,e),i(v.PROP_VDR.portRudder,e),i(v.PROP_VDR.starboardRudder,e),i(v.PROP_ENGINE.portMain,e),i(v.PROP_ENGINE.starboardMain,e)},1e3),t(function(){d(),v.readyToDraw=!0},500)},v.$onDestroy=function(){e.registerForDevice(v.PROP_VDR.deviceId).unregisterForFrame(v.PROP_VDR.frameId),e.registerForDevice(v.PROP_ENGINE.deviceId).unregisterForFrame(v.PROP_ENGINE.frameId),clearInterval(v.timeout)}}e.$inject=["acquisitionService","$timeout","$scope","easelJsUtils","themeService","NAVIGATION","PP_ENGINE","PP_VDR"],angular.module("tsa.tsaViews.propulsionPp",[]).component("tsaPropulsionPp",{templateUrl:"app/tsa-views/propulsion-pp/propulsion-pp.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n){function r(){m=document.getElementById(c.canvasId),null!=m&&(v=new createjs.Stage(m),p=new createjs.Container,g=new createjs.Container,v.addChild(p,g),a.$watch(function(){return m.offsetHeight},function(){o()}),a.$watch(function(){return m.offsetWidth},function(){o()}),o())}function o(){if(null!=m){f=m.offsetWidth,h=m.offsetHeight,m.setAttribute("width",f),m.setAttribute("height",h),v.x=f/2,v.y=h/2;var e=h/100;v.scaleX=v.scaleY=e,s(),p.cache(-f/2,-h/2,f,h,e),d(),l(),v.update()}}function s(){p.removeAllChildren();var e=i.createVessel(c.colors.tick);e.scaleX=.6,e.scaleY=.95;var t=i.createBackRudder(c.colors.background);t.y=25,t.scaleX=t.scaleY=.18;var a=i.createBackGauge(c.colors.background);a.y=18,a.scaleX=.4,a.scaleY=.3;var n=i.createBackGauge(c.colors.background);n.y=-38,n.scaleX=.4,n.scaleY=.3;var r=i.createBackGauge(c.colors.background);r.y=-10,r.scaleX=.4,r.scaleY=.3,r.rotation=270,p.addChild(e,t,a,n,r)}function d(){g.removeAllChildren();var e=c.colors.rudder;Math.abs(Math.round(c.angle.value))>0&&(e=c.angle.value>0?c.colors.red:c.colors.green);var t=i.createRudder(e);t.y=25,t.scaleX=t.scaleY=.18,t.rotation=c.angle.value;var a=i.createGaugge(c.colors.tick,c.colors.zero,c.rearTrans.value,c.colors.green,c.colors.red);a.y=18,a.scaleX=.4,a.scaleY=.3;var n=i.createGaugge(c.colors.tick,c.colors.zero,c.frontTrans.value,c.colors.green,c.colors.red);n.y=-38,n.scaleX=.4,n.scaleY=.3;var r=i.createGaugge(c.colors.tick,c.colors.zero,100*c.main.value/150,c.colors.forward,c.colors.backward);r.y=-10,r.scaleX=.4,r.scaleY=.3,r.rotation=270,g.addChild(t,a,n,r)}function l(){f=m.offsetWidth,h=m.offsetHeight;var e=m.offsetLeft,t=m.offsetTop;c.frontTrans.x=e+1.4*f/2,c.frontTrans.y=t+12*h/100,c.rearTrans.x=c.frontTrans.x,c.rearTrans.y=t+68*h/100,c.main.x=c.frontTrans.x,c.main.y=t+40*h/100,c.angle.x=c.frontTrans.x,c.angle.y=t+82*h/100,c.gene1.y=c.frontTrans.y,c.gene2.y=c.gene1.y+50,c.gene3.y=c.gene2.y+50,c.gene4.y=c.gene3.y+50,c.gene1.x=e+10,c.gene2.x=e+10,c.gene3.x=e+10,c.gene4.x=e+10}var c=this,u="[propulsionControllerTl] ";c.canvasId="canvas-propulsion-tl-"+c.cardId;var m,v,p,g,f,h;c.readyToDraw=!1,c.colors={background:"#CCCCCC",zero:"#EE2222",tick:"#888888",rudder:"#000000",green:"#11CC11",red:"#EE2222",forward:"#1111DD",backward:"#000000",funkyBackground:"#F3BF52"},c.themeChanged=function(e,t){console.log("propulsion themechanged")},n.subscribe(a,c.themeChanged),c.$onInit=function(){return console.log(u+"$onInit: deviceId = "+(this.config?this.config.deviceId:"config undefined")),void 0==this.config||void 0==this.config.deviceId?void console.error(u+"device Id not found!"):(c.deviceId=this.config.deviceId,c.device=e.registerForDevice(c.deviceId),c.frameId="tlpropulsion",c.frontTrans={id:"fronttrans"},c.rearTrans={id:"reartrans"},c.main={id:"main"},c.angle={id:"angle"},c.gene1={id:"gene1"},c.gene2={id:"gene2"},c.gene3={id:"gene3"},c.gene4={id:"gene4"},c.fontsize=1,c.frameListener=e.registerForDevice(c.deviceId).registerForFrame(c.frameId),c.frameListener.promise.then({},{},function(e){c.frontTrans.value=e.value[c.frontTrans.id],c.rearTrans.value=e.value[c.rearTrans.id],c.main.value=e.value[c.main.id],c.angle.value=e.value[c.angle.id],c.gene1.value=parseFloat(e.value[c.gene1.id]),c.gene2.value=parseFloat(e.value[c.gene2.id]),c.gene3.value=parseFloat(e.value[c.gene3.id]),c.gene4.value=parseFloat(e.value[c.gene4.id]),c.readyToDraw&&(d(),v.update())}),void t(function(){r(),c.readyToDraw=!0},500))},c.$onDestroy=function(){angular.isDefined(c.frameListener)&&e.registerForDevice(c.deviceId).unregisterForFrame(c.frameListener)}}e.$inject=["acquisitionService","$timeout","$scope","easelJsUtils","themeService"],angular.module("tsa.tsaViews.propulsionTl",[]).component("tsaPropulsionTl",{templateUrl:"app/tsa-views/propulsion-tl/propulsion-tl.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,a,i,r,o,s,d,l,c,u,m){s.yOffset=50;var v,p=this;p.deviceId=this.config.deviceId,p.frameId=this.config.frameId,p.latitude=void 0,p.longitude=void 0,p.speed=void 0,p.index=void 0,p.eta=void 0,p.curdist=void 0,p.currentWpt=void 0,p.previroute=void 0,p.ready=!1,p.header=["views.route.name","views.route.type","views.route.eta","views.route.stationduration","views.route.etanextwpt","views.route.distance","views.route.time"],p.route=[],p.updateReady=function(){p.ready=p.route.length>1&&void 0!=p.index&&void 0!=p.latitude&&void 0!=p.longitude&&void 0!=p.speed&&void 0!=p.curdist&&c.getLocalTimeZoneOffset()},p.$onInit=function(){function e(e){p.latitude=e.value[m.LATITUDE].map(parseFloat),p.longitude=e.value[m.LONGITUDE].map(parseFloat),p.speed=e.value[m.GROUND_SPEED].map(parseFloat),p.calculateRoute()}function t(e){p.index=e.value[m.INDEX].map(parseInt),p.calculateRoute()}function i(e){e.value[m.CUR_DIST].length&&(p.curdist=e.value[m.CUR_DIST].map(parseFloat)[0]),e.value[m.ETA].length&&(p.eta=e.value[m.ETA].map(parseFloat)[0]),p.calculateRoute()}v=a(function(){p.updateRoute()},1e4),p.updateRoute();var n=l.registerForDevice(p.deviceId).registerForFrame(m.FRAME_SHIPNAV);n.promise.then({},{},e);var r=l.registerForDevice(p.deviceId).registerForFrame(m.FRAME_WAYPOINTS);r.promise.then({},{},t);var o=l.registerForDevice(p.deviceId).registerForFrame(m.FRAME_ROUTING);o.promise.then({},{},i)},p.$onDestroy=function(){angular.isDefined(v)&&a.cancel(v),angular.isDefined(shipnavFrameListener)&&l.registerForDevice(p.deviceId).unregisterForFrame(shipnavFrameListener),angular.isDefined(waypointsFrameListener)&&l.registerForDevice(p.deviceId).unregisterForFrame(waypointsFrameListener),angular.isDefined(routingFrameListener)&&l.registerForDevice(p.deviceId).unregisterForFrame(routingFrameListener)},p.updateRoute=function(){i.get(u+"/api/previroute").then(function(e){p.previroute=e.data,p.calculateRoute()})},p.calculateRoute=function(){if(p.route=[],void 0!=p.previroute&&p.previroute.route.length&&void 0!=p.index&&void 0!=p.latitude&&void 0!=p.longitude&&void 0!=p.speed&&void 0!=p.curdist&&c.getLocalTimeZoneOffset()){for(var e=(new Date).getTime(),a=p.index-1,i=-1,r=0;r<p.previroute.route.length;r++)if(p.previroute.to===p.previroute.route[r].name){i=r;break}var o={};o={},o.name="",o.type="",o.duration=0,o.eta=0,o.etanext=t(p.eta),o.distance=p.curdist,o.time=o.etanext-e,p.route.push(o);for(var s=[],r=a;r<i+1;r++)p.previroute.route[r].visible&&s.push(p.previroute.route[r]);for(var d=o.etanext,r=0;r<s.length-1;r++){var l=s[r],u=s[r+1],o={};o.name=l.name,o.type=l.stationtype,o.duration=60*l.stationtime*60*1e3,o.distance=n(l.latitude,l.longitude,u.latitude,u.longitude),o.time=o.distance/1852/l.speed*60*60*1e3,o.eta=d,o.etanext=o.eta+o.time+o.duration,d=o.etanext,p.route.push(o)}var o={};o={},o.name=u.name,o.type=u.type,o.duration=0,o.eta=d,o.distance=0,o.time=0,p.route.push(o),p.updateReady()}}}e.$inject=["$log","$interval","$http","$rootScope","$scope","$anchorScroll","$location","acquisitionService","statusService","MD_ADDONS_URL","NAVIGATION"];var t=function(e){return 86400*(e-25569)*1e3},a={a:6378137,b:6356752.3142,f:1/298.257223563},i=function(e){return e*Math.PI/180},n=function(e,t,n,r){for(var o={lat:e,lon:t},s={lat:n,lon:r},d=a,l=d.a,c=d.b,u=d.f,m=i(s.lon-o.lon),v=Math.atan((1-u)*Math.tan(i(o.lat))),p=Math.atan((1-u)*Math.tan(i(s.lat))),g=Math.sin(v),f=Math.cos(v),h=Math.sin(p),b=Math.cos(p),w=m,y=2*Math.PI,I=20;Math.abs(w-y)>1e-12&&--I>0;){var S=Math.sin(w),C=Math.cos(w),T=Math.sqrt(b*S*(b*S)+(f*h-g*b*C)*(f*h-g*b*C));if(0==T)return 0;var E=g*h+f*b*C,D=Math.atan2(T,E),A=Math.asin(f*b*S/T),x=Math.cos(A)*Math.cos(A),L=E-2*g*h/x,R=u/16*x*(4+u*(4-3*x));y=w,w=m+(1-R)*u*Math.sin(A)*(D+R*T*(L+R*E*(-1+2*L*L)))}if(0==I)return NaN;var P=x*(l*l-c*c)/(c*c),O=1+P/16384*(4096+P*(-768+P*(320-175*P))),M=P/1024*(256+P*(-128+P*(74-47*P))),N=M*T*(L+M/4*(E*(-1+2*L*L)-M/6*L*(-3+4*T*T)*(-3+4*L*L))),F=c*O*(D-N),_=F.toFixed(3)/1e3;return 1e3*_};angular.module("tsa.tsaViews.routeMd",[]).component("tsaRouteMd",{templateUrl:"app/tsa-views/route/route.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){var a=this;a.logger=e.getInstance("Species-tsa-view"),a.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void a.logger.error("config and/or deviceId and/or frameId not defined!"):(a.deviceId=this.config.deviceId,a.frameId=this.config.frameId,a.haul=t.HAUL_ID,a.pocket=t.POCKET,a.totalPocket=t.TOTAL_POCKET_WEIGHT,a.speciesId=t.SPECIES_ID,a.sign=t.SPECIES_SIGN,a.box=t.BOX_ID,a.boxWeight=t.BOX_WEIGHT,a.boxDest=t.BOX_DESTINATION,a.totalSpecies=t.SPECIES_WEIGHT,void(a.totalSorted=t.TOTAL_SORTED_SPECIES_WEIGHT))}}e.$inject=["$log","HAUL"],angular.module("tsa.tsaViews.species",[]).component("tsaSpecies",{templateUrl:"app/tsa-views/species/species.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a){var i=this;i.view="General",i.thermo={},i.instrument={},i.intakeTemperatureSensor={},i.conductivitySensor={},i.temperatureSensor={},i.init=function(){i.logger=e.getInstance("ThermoConfig");var n=t.csrftoken;n=t.get("XSRF-TOKEN"),i.uploader=new a({url:"api/files",headers:{"X-XSRF-TOKEN":n}}),i.uploader.onSuccessItem=function(e,t,a,n){i.logger.log(t),i.instrument=t.instrument,i.temperatureSensor=i.instrument.sensorArray.sensor[0].temperatureSensor,i.conductivitySensor=i.instrument.sensorArray.sensor[1].conductivitySensor,i.intakeTemperatureSensor=i.instrument.sensorArray.sensor[2].temperatureSensor},i.uploader.onAfterAddingFile=function(e,t,a){i.uploader.queue.length>1&&i.uploader.queue.splice(0,1)}}}e.$inject=["$log","$cookies","FileUploader"],angular.module("tsa.tsaViews.thermoConfig",[]).component("tsaThermoConfig",{templateUrl:"app/tsa-views/thermoConfig/thermoConfig.html",controllerAs:"ctrl",controller:e,bindings:{onChangeCardType:"&",cardId:"@"}})}(),function(){"use strict";function e(e,t,a){var i=this;i.logger=e.getInstance("tsa-thermometer"),i.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void i.logger.error("config and/or deviceId and/or frameId not defined!"):(i.deviceId=this.config.deviceId,i.frameId=this.config.frameId,void(this.THERMOMETER=t))}}e.$inject=["$log","THERMOMETER","acquisitionService"],angular.module("tsa.tsaViews.thermometer",[]).component("tsaThermometer",{templateUrl:"app/tsa-views/thermometer/thermometer.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){var a=this;a.logger=e.getInstance("thermosal-tsa-view"),a.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)||angular.isUndefined(this.config.flowDeviceId)?void a.logger.error("deviceId or/and frameId or/and flowDeviceId not defined!"):(a.deviceId=this.config.deviceId,a.frameId=this.config.frameId,a.flowDeviceId=this.config.flowDeviceId,void(a.TS=t))}}e.$inject=["$log","THERMOSAL"],angular.module("tsa.tsaViews.thermosal",[]).component("tsaThermosal",{templateUrl:"app/tsa-views/thermosal/thermosal.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r){function o(){p=document.getElementById(u.canvasId),null!=p&&(g=new createjs.Stage(p),n.$watch(function(){return p.offsetHeight},function(){s()}),n.$watch(function(){return p.offsetWidth},function(){s()}),s())}function s(){null!=p&&(f=p.offsetWidth,h=p.offsetHeight,p.setAttribute("width",f),p.setAttribute("height",h),g.removeAllChildren(),d(),g.update())}function d(){p=document.getElementById(u.canvasId),null!=p&&(g=new createjs.Stage(p)),v=new createjs.Shape,g.addChild(v),v.x=f/1.65,v.y=h/1.8,v.graphics.beginStroke("#757575").setStrokeStyle(2,"round");var e=f/3.7,t=h/3,a=[.9*-e,-t/6],i=[a[0],a[1]+t/3],n=[-e/2,t/2],r=[n[0],-n[1]],o=[1.3*-e,0],s=[-a[0],a[1]],d=[-i[0],i[1]],m=[-n[0],n[1]],b=[-r[0],r[1]],w=[-o[0],o[1]],y=[-f/2,1.3*r[1]],I=1.6*r[1],S=1.7*-r[0],C=f/60,T=h/8,E=-.9*t;v.graphics.beginFill("rgba(67, 203, 44, 0.1)").beginStroke("#8BC34A").moveTo(a[0],a[1]).lineTo(r[0],r[1]).quadraticCurveTo(0,I,b[0],b[1]).lineTo(s[0],s[1]).lineTo(d[0],d[1]).lineTo(m[0],m[1]).quadraticCurveTo(0,-I,n[0],n[1]).lineTo(i[0],i[1]).lineTo(a[0],a[1]).endFill().moveTo(r[0],r[1]).quadraticCurveTo(-S,0,n[0],n[1]).moveTo(b[0],b[1]).quadraticCurveTo(S,0,m[0],m[1]).beginStroke("#757575").moveTo(a[0],a[1]).lineTo(o[0],o[1]).lineTo(i[0],i[1]).moveTo(s[0],s[1]).lineTo(w[0],w[1]).lineTo(d[0],d[1]).beginFill("#757575").drawRect(o[0]-C/2,o[1]-T/2,C,T).drawRect(w[0]-C/2,o[1]-T/2,C,T).beginStroke("#757575").setStrokeStyle(1,"round").setStrokeDash([5,5],0).moveTo(y[0],y[1]).lineTo(0,y[1]).moveTo(o[0],o[1]).lineTo(o[0],o[1]+E).moveTo(w[0],w[1]).lineTo(w[0],w[1]+E),l([o[0],E],[w[0],E],u.doorDistance),l([a[0]+3,.7*a[1]],[s[0]-3,.7*s[1]],u.horSpread),u.horSpread.x-=e/3,l([0,1.33*r[1]+5],[0,1.33*n[1]-5],u.verSpread),u.verSpread.y+=t/3,l([0,1.3*n[1]+5],[0,h-v.y-5-.05*h],u.clearance),l([y[0],y[1]+5],[y[0],h-v.y-5-.05*h],u.altitude),l([y[0],y[1]-5],[y[0],-v.y+5+.05*h],u.immersion),c(),g.update()}function l(e,t,a){var i=new createjs.Shape;g.addChild(i),i.graphics.beginStroke("#757575").setStrokeStyle(2),i.x=v.x,i.y=v.y;var n=10,r=Math.atan2(t[1]-e[1],t[0]-e[0]);i.graphics.moveTo(e[0],e[1]).lineTo(e[0]+n*Math.cos(r-Math.PI/6),e[1]+n*Math.sin(r-Math.PI/6)).moveTo(e[0],e[1]).lineTo(e[0]+n*Math.cos(r+Math.PI/6),e[1]+n*Math.sin(r+Math.PI/6)).moveTo(e[0],e[1]).lineTo(t[0],t[1]).moveTo(t[0],t[1]).lineTo(t[0]-n*Math.cos(r-Math.PI/6),t[1]-n*Math.sin(r-Math.PI/6)).moveTo(t[0],t[1]).lineTo(t[0]-n*Math.cos(r+Math.PI/6),t[1]-n*Math.sin(r+Math.PI/6)),void 0!=a&&(a.x=v.x+(e[0]+t[0])/2-50,a.y=v.y+(e[1]+t[1])/2-14)}function c(){var e=new createjs.Shape,t=[.02*f,.05*h],a=[f-t[0],t[1]],i=[t[0],h-t[1]],n=[a[0],i[1]];g.addChild(e),e.graphics.beginStroke("").setStrokeStyle(1,"round").beginFill("rgba(44, 151, 203, 0.1)");for(var r=t[0];r<a[0]-60;)e.graphics.moveTo(r,t[1]).arcTo(r+30,t[1]+10,r+60,t[1],95),r+=60;e.graphics.lineTo(a[0],a[1]).lineTo(n[0],n[1]).lineTo(i[0],i[1]).lineTo(t[0],t[1]),e.graphics.endFill().beginStroke("#757575").setStrokeStyle(1,"round");for(var r=t[0];r<a[0]-60;)e.graphics.moveTo(r,t[1]).arcTo(r+30,t[1]+10,r+60,t[1],95),r+=60;for(e.graphics.lineTo(a[0],a[1]),e.graphics.moveTo(i[0],i[1]).lineTo(n[0],n[1]),r=i[0]+10;r<n[0];)e.graphics.moveTo(r,i[1]).lineTo(r-10,i[1]+10),r+=20}var u=this,m="[trawlController] ";u.canvasId="canvas-weather-"+u.cardId;var v,p,g,f,h;u.$onInit=function(){return console.log(m+"$onInit: deviceId = "+(this.config?this.config.deviceId:"config undefined")),void 0==this.config||void 0==this.config.deviceId?void console.error(m+"device Id not found!"):(u.deviceId=this.config.deviceId,u.device=e.registerForDevice(u.deviceId),u.frameId=a.FRAME,u.verSpread={id:a.VERTICAL_SPREAD},u.clearance={id:a.CLEARANCE},u.doorDistance={id:a.DOOR_DISTANCE},u.horSpread={id:a.HORIZONTAL_SPREAD},u.altitude={id:a.ALTITUDE},u.immersion={id:a.DEPTH},u.temp=a.TEMP,u.sounder={deviceId:i.DEVICE_ID,frameId:i.FRAME_SHIPNAV,data:i.SOUNDER},u.dataFormat="%.1f",void t(function(){o(),d()},500))}}e.$inject=["acquisitionService","$timeout","TRAWL","NAVIGATION","$scope","userService"],angular.module("tsa.tsaViews.trawl",[]).component("tsaTrawl",{templateUrl:"app/tsa-views/trawl/trawl.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n){var r=function(){function e(e){e.timestamp;o.trawling.lat=parseFloat(e.value[n.LAT]),o.trawling["long"]=parseFloat(e.value[n.LONG]),o.trawling.starboardunwound=parseFloat(e.value[n.STARBOARDUNWOUND]),o.trawling.portunwound=parseFloat(e.value[n.PORTUNWOUND]),o.trawling.verSpread=parseFloat(e.value[n.VERTICAL_SPREAD]),o.trawling.horSpread=parseFloat(e.value[n.HORIZONTAL_SPREAD]),o.trawling.waterropealt=parseFloat(e.value[n.ALTITUDE]),o.trawling.comment=parseFloat(e.value[n.COMMENT]),o.isAcquiring.value=!0}var r,o=(t.getInstance("TrawlingService"),this);return o.isAcquiring={value:!1},o.trawling={lat:void 0,"long":void 0,starboardunwound:void 0,portunwound:void 0,verSpread:void 0,horSpread:void 0,waterropealt:void 0,comment:void 0},o.lastMessageTimestamp,{isAcquiring:function(){return o.isAcquiring},initDataListener:function(t,n){o.lastMessageTimestamp=i.getServerTime().time,r=a.registerForDevice(t).registerForFrame(n),r.promise.then({},{},e)},destroyDataListener:function(e){void 0!==r&&a.registerForDevice(e).unregisterForFrame(r)}}};return{getInstance:function(){return new r}}}e.$inject=["$interval","$log","acquisitionService","statusService","TRAWLING"],angular.module("tsa.tsaViews.map").factory("TrawlingServiceProvider",e)}(),function(){"use strict";function e(e,t,a,i,n,r){var o=this,s="[trawlingController] ",d=r.getInstance();o.canvasId="canvas-trawling-"+o.cardId,o.$onInit=function(){if(o.currentUserProvider=t.getCurrentUserProvider(),o.currentUserProvider.currentUser?o.isAdminLogged="admin"===o.currentUserProvider.currentUser.login||"europe"===o.currentUserProvider.currentUser.login:o.isAdminLogged=!1,console.log(s+"$onInit: deviceId = "+(this.config?this.config.deviceId:"config undefined")),void 0===this.config||void 0===this.config.deviceId)return void console.error(s+"device Id not found!");o.horspread=0,o.horspread_mean=0,o.horspread_mean_nb=0,o.verspread=0,o.verspread_mean=0,o.verspread_mean_nb=0,o.altitude=0,o.altitude_mean=0,o.altitude_mean_nb=0,o.starboardunwound=0,o.starboardunwound_mean=0,o.starboardunwound_mean_nb=0,o.portunwound=0,o.portunwound_mean=0,o.portunwound_mean_nb=0,o.deviceId=this.config.deviceId,o.frameId=this.config.frameId,o.frameListener=e.registerForDevice(o.deviceId).registerForFrame(o.frameId),o.frameListener.promise.then({},{},function(e){var t=1;e.value[n.HORIZONTAL_SPREAD_SUM]&&(o.horspread=parseFloat(e.value[n.HORIZONTAL_SPREAD_SUM]),t=parseInt(e.value[n.HORIZONTAL_SPREAD_NB]),0!==t&&(o.horspread_mean_nb=t,o.horspread_mean=void 0!==e.value[n.HORIZONTAL_SPREAD_NB]?o.horspread/t:o.horspread_mean)),e.value[n.VERTICAL_SPREAD_SUM]&&(o.verspread=parseFloat(e.value[n.VERTICAL_SPREAD_SUM]),t=parseInt(e.value[n.VERTICAL_SPREAD_NB]),0!==t&&(o.verspread_mean_nb=t,o.verspread_mean=void 0!==e.value[n.VERTICAL_SPREAD_NB]?o.verspread/t:o.verspread_mean)),e.value[n.ALTITUDE_SUM]&&(o.altitude=parseFloat(e.value[n.ALTITUDE_SUM]),t=parseInt(e.value[n.ALTITUDE_NB]),0!==t&&(o.altitude_mean_nb=t,o.altitude_mean=void 0!==e.value[n.ALTITUDE_NB]?o.altitude/t:o.altitude_mean)),e.value[n.STARBOARDUNWOUND_SUM]&&(o.starboardunwound=parseFloat(e.value[n.STARBOARDUNWOUND_SUM]),t=parseInt(e.value[n.STARBOARDUNWOUND_NB]),0!==t&&(o.starboardunwound_mean_nb=t,o.starboardunwound_mean=void 0!==e.value[n.STARBOARDUNWOUND_NB]?o.starboardunwound/t:o.starboardunwound_mean)),e.value[n.PORTUNWOUND_SUM]&&(o.portunwound=parseFloat(e.value[n.PORTUNWOUND_SUM]),t=parseInt(e.value[n.PORTUNWOUND_NB]),0!==t&&(o.portunwound_mean_nb=t,o.portunwound_mean=void 0!==e.value[n.PORTUNWOUND_NB]?o.portunwound/t:o.portunwound_mean))});var a=e.registerForDevice(o.deviceId).registerForData(n.FRAME,n.COMMENT);a.promise.then({},{},function(e){"trawling"===e.value&&(o.isAcquiring=!0),"stop"===e.value&&(o.isAcquiring=!1)}),o.frameId=n.FRAME,d.initDataListener(o.deviceId,o.frameId),o.dataFormat="%.1f",o.lat={id:n.LAT},o.lon={id:n.LONG},o.comment={id:n.COMMENT},o.distance_straight={id:n.DISTANCE_STRAIGHT},o.distance_real={id:n.DISTANCE_REAL},o.ratio={id:n.RATIO}},o.startAcquire=function(){return o.isAcquiring=!0,i.put("/api/devices/EU_TRAWLING/acquire",!0)},o.stopAcquire=function(){return o.isAcquiring=!1,i.put("/api/devices/EU_TRAWLING/acquire",!1)}}e.$inject=["acquisitionService","userService","$timeout","$http","TRAWLING","TrawlingServiceProvider"],angular.module("tsa.tsaViews.trawling",[]).component("tsaTrawling",{templateUrl:"app/tsa-views/trawling/trawling.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s){var d=this;d.logger=i.getInstance("video-tsa-view"),d.videoId="video-"+d.cardId;var l;d.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.url)?void d.logger.error("url not found!"):(d.title=this.config.deviceId,d.url=this.config.url,d.janusStreamIndex=this.config.janusStreamIndex,d.currentUser=n.getCurrentUser(),d.janus=null,void(l=t(function(){var e=angular.element("#"+d.videoId),t=angular.element('<video width=800 height=600 autoplay="true"/>');e.append(t),o.startJanus(function(e){d.janus=e,o.startStream(e,d.janusStreamIndex)},t[0])},50)))},d.$onDestroy=function(){t.cancel(l),d.janus&&d.janus.destroy()}}e.$inject=["$interval","$timeout","$scope","$log","userService","themeService","videoStreamingService","VIDEO_PARAMS"],angular.module("tsa.tsaViews.video",[]).component("tsaVideo",{templateUrl:"app/tsa-views/video/video.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n){var r=this;r.logger=t.getInstance("videocall-tsa-view"),r.parentId="videocall-"+r.cardId,r.disableVideo=!1,r.diableAudio=!1,r.$onInit=function(){r.videoCallState=n.getVideoCallState(),a(function(){var e=document.querySelector("#"+r.parentId+" #localvideo"),t=document.querySelector("#"+r.parentId+" #remotevideo");n.setVideo(e,t)},50)},r.test=function(){n.test()},r.videoCall=function(e){n.videoCall(e)},r.hangup=function(){n.hangup()},r.toggleVideo=function(){r.disableVideo=!r.disableVideo,n.enableVideo(!r.disableVideo)},r.toggleAudio=function(){r.disableAudio=!r.disableAudio,n.enableAudio(!r.disableAudio)}}e.$inject=["$scope","$log","$timeout","userService","videoCallService"],angular.module("tsa.tsaViews.videoCall",[]).component("tsaVideoCall",{templateUrl:"app/tsa-views/videoCall/videoCall.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i,n,r){function o(){p=document.getElementById(v.canvasId),null!=p&&(b=new createjs.Stage(p),d(),n.$watch(function(){return p.offsetHeight},function(){s()}),n.$watch(function(){return p.offsetWidth},function(){s()}),s())}function s(){null!=p&&(g=p.offsetWidth<p.offsetHeight?p.offsetWidth:p.offsetHeight,f=p.offsetWidth,h=p.offsetHeight,p.setAttribute("width",f),p.setAttribute("height",h),b.removeAllChildren(),u(),d(),null!=I&&(I=l(I.speed,A,I.rotation+90)),null!=S&&(S=l(S.speed,x,S.rotation+90)),b.update())}function d(){w=new createjs.Shape,w.x=f/2,w.y=h/2,w.rotation=angular.isDefined(D)?D-90:-90,w.graphics.beginStroke("#757575").setStrokeStyle(1,"round"),b.addChild(w),y=new createjs.Shape,y.x=f/2,y.y=h/2,y.rotation=w.rotation,y.graphics.beginStroke("#757575").setStrokeStyle(1).setStrokeDash([10,5]),b.addChild(y);var e=.5*g,t=e/4;y.graphics.moveTo(.75*-e,0),y.graphics.lineTo(3*e/4,0),w.graphics.moveTo(e/5,t/2).lineTo(-e/2,t/2).lineTo(-e/2,-t/2).lineTo(e/5,-t/2).bezierCurveTo(e/1.5,-t/4,e/1.5,t/4,e/5,t/2)}function l(e,t,a){var i=new createjs.Shape;i.x=f/2,i.y=h/2,i.rotation=a-90,i.speed=e,b.addChild(i),i.graphics.beginStroke(t).setStrokeStyle(2);var n=g/3;return 0===e?i.graphics.drawCircle(0,0,20):e>200?v.logger.error("Error true wind speed too high"):(i.graphics.moveTo(0,0),i.graphics.lineTo(n,0),i.graphics.beginFill(t),c(i,e,n)),i}function c(e,t,a){for(var i=a,n=Math.floor(t/50),r=Math.floor(t%50/10),o=Math.floor(t%10/5),s=0;s<n;s++)e.graphics.moveTo(i,0).lineTo(i-12,20).lineTo(i-20,0),i-=20;for(0!==n&&(i-=10),s=0;s<r;s++)e.graphics.moveTo(i,0).lineTo(i+8,20),i-=10;for(s=0;s<o;s++)e.graphics.moveTo(i,0).lineTo(i+4,10),i-=10}function u(){var e=new createjs.Shape;e.x=f/2,e.y=h/2,b.addChild(e),e.graphics.beginStroke("#757575").setStrokeStyle(3);for(var t=g/2-20,a=0;a<24;a++){var i=a*Math.PI/12,n=a%3===0?7:2;if(a%2===0&&a%6!==0){var r=(t+n+20)*Math.cos(i)-6,o=(t+n+20)*Math.sin(i),s=(a+6)%24*360/24;r-=10,m(s,r,o)}e.graphics.moveTo((t-n)*Math.cos(i),(t-n)*Math.sin(i)),e.graphics.lineTo((t+n)*Math.cos(i),(t+n)*Math.sin(i))}}function m(e,t,a){var i=new createjs.Text(e,"18px Arial","#757575");return i.x=f/2+t,i.y=h/2+a,i.textBaseline="middle",b.addChild(i)}var v=this;
v.logger=e.getInstance("weather-tsa-view"),v.MODE={DEFAULT:"default",ANEMOMETER:"anemometer"},v.canvasId="canvas-weather-"+v.cardId;var p,g,f,h,b,w,y,I,S,C,T,E,D,A="#E53935",x="#1a75ae";v.$onInit=function(){return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void v.logger.error("config and/or deviceId and/or frameId not defined!"):(v.logger.debug("vm.currentMode: "+v.currentMode+"; vm.mode: "+v.mode+"; this.mode: "+this.mode),v.weatherDeviceId=this.config.deviceId,v.weatherFrame=this.config.frameId,v.weatherDataList=a.DATA_TO_DISPLAY,v.trueWindSpeedId=a.TRUE_AIR_SPEED,v.trueWindHeadingId=a.TRUE_AIR_HEADING,v.relWindSpeedId=a.REL_AIR_SPEED,v.relWindHeadingId=a.REL_AIR_HEADING,v.mode!=v.MODE.ANEMOMETER&&(E=t.registerForDevice(this.config.navId).registerForData(i.FRAME_SHIPNAV,i.HEADING),E.promise.then({},{},function(e){D=e.value,null!=b&&null==w&&d(),void 0!==w&&(w.rotation=e.value-90,y.rotation=e.value-90,angular.isDefined(S)&&(S.rotation=parseFloat(D)+parseFloat(C)-90),b.update())})),T=t.registerForDevice(v.weatherDeviceId).registerForFrame(a.FRAME),T.promise.then({},{},function(e){if(angular.isDefined(b)){var t=e.value[a.TRUE_AIR_SPEED],i=e.value[a.TRUE_AIR_HEADING],n=e.value[a.REL_AIR_SPEED];C=e.value[a.REL_AIR_HEADING],b.removeChild(I),b.removeChild(S),angular.isDefined(D)?(I=l(t,A,i),S=l(n,x,parseFloat(D)+parseFloat(C))):S=l(n,x,parseFloat(C)),b.update()}}),void r(function(){o()},500))},v.$onDestroy=function(){angular.isDefined(T)&&t.registerForDevice(v.weatherDeviceId).unregisterForFrame(T),angular.isDefined(E)&&t.registerForDevice(v.config.navId).unregisterForData(E)}}e.$inject=["$log","acquisitionService","WEATHER","NAVIGATION","$scope","$timeout"],angular.module("tsa.tsaViews.weather",[]).component("tsaWeather",{templateUrl:"app/tsa-views/weather/weather.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&",mode:"@"}})}(),function(){"use strict";function e(e,t,a,i,n,r,o,s,d,l){function c(){var e=r.getChartOptions(v.scales[v.selectedScale].stepSize);return e.scales.yAxes=[{id:"y-axis-1",gridLines:{color:v.theme.gridLinesColor},ticks:{beginAtZero:!0,min:0,suggestedMax:10}}],e}function u(){void 0!==h&&h.destroy();var e=document.getElementById(v.canvasId);e&&(h=Chart.Scatter(e,{data:b,options:c()}),m()),v.config.scale=v.selectedScale}function m(){var e=o.getServerTime().time;h.options.scales.xAxes[0].ticks.min=e-v.scales[v.selectedScale].scale,h.options.scales.xAxes[0].ticks.max=e;var t=v.scales[v.selectedScale].bufferId;b.datasets[0].data=[];var a=v.device.getData(v.frameId,v.tension);void 0!==a&&angular.forEach(a.buffers[t].frames,function(e){b.datasets[0].data.push({x:e.timestamp,y:e.value})}),h.update()}var v=this;v.logger=a.getInstance("winch-tsa-view"),v.canvasId="canvas-winch-"+v.cardId;var p,g;v.bufferLoading={};var f;v.scales=r.scales,v.selectedScale="1 min",v.spinningText="views.winch.spinning";var h=void 0,b={datasets:[{label:"Data 1",xAxisID:"x-axis-1",yAxisID:"y-axis-1",borderColor:"rgb(26, 117, 174)",backgroundColor:"rgba(26, 117, 174, 0.3)",data:[]}]};v.$onInit=function(){function t(e){var t=parseFloat(e.value[d.SPINNING]);v.spinningText=t<0?"views.winch.spinning.negative":"views.winch.spinning.positive"}return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void v.logger.error("config and/or deviceId and/or frameId not defined!"):(v.deviceId=this.config.deviceId,v.frameId=this.config.frameId,v.tension=d.TENSION,v.spinning=d.SPINNING,v.length=d.LENGTH,v.deviceSoundingId=this.config.sounder.deviceSoundingId,v.frameSounding=this.config.sounder.frameSounding,v.sounding=this.config.sounder.sounding,v.device=n.registerForDevice(v.deviceId),v.device.recordData(v.frameId,v.tension),f=n.registerForDevice(v.deviceId).registerForFrame(v.frameId),f.promise.then({},{},t),g=e(w,200),s.subscribe(i,function(e,t){v.theme=t,u()}),void(angular.isDefined(v.config.scale)&&(v.selectedScale=v.config.scale)))},v.$onDestroy=function(){void 0!==f&&n.registerForDevice(v.deviceId).unregisterForFrame(f),v.device.stopRecordData(v.frameId,v.tension),e.cancel(g),void 0!==p&&t.cancel(p)};var w=function(){if(void 0!==p&&t.cancel(p),angular.isDefined(v.device.getData(v.frameId,v.tension))){var e=v.scales[v.selectedScale].bufferId;v.bufferLoading[v.selectedScale]=v.bufferLoading[v.selectedScale]?++v.bufferLoading[v.selectedScale]:1;var a=v.selectedScale,i=function(){v.bufferLoading[a]--,void 0!==h&&m()};v.device.getData(v.frameId,v.tension).buffers[e].loadArchivedFrames().then(i,i)}u(),p=t(m,v.scales[v.selectedScale].scale/1e3)};v.onChangeXScale=w}e.$inject=["$timeout","$interval","$log","$scope","acquisitionService","graphUtils","statusService","themeService","WINCH","NAVIGATION"],function(){angular.module("tsa.tsaViews.winch",[]).component("tsaWinch",{templateUrl:"app/tsa-views/winch/winch.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}()}(),function(){"use strict";function e(e,t,a,i,n){function r(){c>0&&(new Date).getTime()-c>12e4&&(c=-1,l.alarms.length=0)}function o(e,t,a,i){var n=l.alarms.findIndex(function(t){return e===t.code});i>=1e5?n<0&&l.alarms.push({code:e,text:t,level:a,enddate:i}):0===i&&n>=0&&(l.alarms=l.alarms.splice(n,1))}var s,d,l=this,c=-1;l.alarms=[],l.deviceId="PP_KleyWinch",l.$onInit=function(){s=n(r,5e3),d=e.registerForDevice(l.deviceId).registerForFrame(i.FRAME),d.promise.then({},{},function(e){o(e.value[i.CODE][0],e.value[i.TEXT][0],e.value[i.LEVEL][0],e.value[i.ENDDATE][0])})},l.$onDestroy=function(){e.registerForDevice(l.deviceId).unregisterForFrame(i.FRAME),n.cancel(s)}}e.$inject=["acquisitionService","$timeout","$scope","PP_WINCH_ALARM","$interval"],angular.module("tsa.tsaViews.winchAlarmPp",[]).component("tsaWinchAlarmPp",{templateUrl:"app/tsa-views/winch-alarm-pp/winch-alarm-pp.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t,a,i){var n=this;n.logger=e.getInstance("winch-info-tsa-view");var r;n.$onInit=function(){function e(e){var a=parseFloat(e.value[t.SPINNING]);n.spinningText=a<0?"views.winch.spinning.negative":"views.winch.spinning.positive"}return angular.isUndefined(this.config)||angular.isUndefined(this.config.deviceId)||angular.isUndefined(this.config.frameId)?void n.logger.error("deviceId or/and frameId or/and flowDeviceId not defined!"):(console.log(this.config),n.deviceId=this.config.deviceId,n.frameId=this.config.frameId,n.navId=this.config.navId,n.WINCH=t,n.NAVIGATION=a,n.spinningText="views.winch.spinning",r=i.registerForDevice(n.deviceId).registerForFrame(n.frameId),void r.promise.then({},{},e))},n.$onDestroy=function(){void 0!==r&&i.registerForDevice(n.deviceId).unregisterForFrame(r)}}e.$inject=["$log","WINCH","NAVIGATION","acquisitionService"],angular.module("tsa.tsaViews.winchInfo",[]).component("tsaWinchInfo",{templateUrl:"app/tsa-views/winch-info/winch-info.html",controllerAs:"ctrl",controller:e,bindings:{config:"=",cardId:"@",onChangeCardType:"&"}})}(),function(){"use strict";function e(e,t){var a=this;a.title="New channel",a.channel=void 0,a.newChannelId=void 0,a.newChannelURL=void 0,a.channelList=[],t.getChannels().then(function(e){a.channelList=e}),a.cancel=function(){e.cancel()},a.save=function(){"New channel"===a.channel&&(a.channel={channelId:a.newChannelId,url:a.newChannelURL},void 0!==a.channel&&void 0!==a.newChannelURL&&t.putChannel(a.newChannelId,a.newChannelURL)),e.hide({channel:a.channel})}}e.$inject=["$mdDialog","restService"],angular.module("tsa.pages.acquisition").controller("addChannelController",e)}(),function(){"use strict";function e(e,t,a,i,n,r,o){if(r.checkAuthority(o.ADMIN)){var s=this;s.title="New device",s.channels=[],s.device={deviceId:"UNIQUE_DEVICE_ID",name:"my-device",frames:[],period:"1000",drivers:[],triggerMode:"FRAME",triggerFrameName:"$TEST",triggerInterval:""},s.triggerValue="$TEST",function(){void 0!==a.id&&t.getConfiguration().then(function(e){angular.forEach(e.devices,function(e){if(e.deviceId===a.id){switch(s.device=e,s.title=s.device.deviceId,s.device.triggerMode){case"FRAME":s.triggerValue=s.device.triggerFrameName;break;case"TIME":s.triggerValue=s.device.triggerInterval}var t=[];angular.forEach(s.device.drivers,function(e){var a=0;angular.forEach(t,function(t){t===e.channelId&&(a=1)}),0===a&&t.push(e.channelId)}),angular.forEach(t,function(e){s.channels})}})})}(),s.removeChannel=function(e){var t=s.channels.indexOf(e);t!=-1&&s.channels.splice(t,1)},s.removeDriver=function(e){e!=-1&&s.device.drivers.splice(e,1)},s.addChannel=function(){e.show({controller:"addChannelController",controllerAs:"ctrl",templateUrl:"app/pages/acquisition/addChannel/addChannel.html",clickOutsideToClose:!0,locals:{channel:void 0}}).then(function(e){console.log("new channel: "+e.channel);var t=0;angular.forEach(s.channels,function(a){a.channelId!==e.channel.channelId&&a.url!==e.channel.url||(t=1)}),0===t&&s.channels.push(e.channel)})},s.addDriver=function(){e.show({controller:"addDriverController",controllerAs:"ctrl",templateUrl:"app/pages/acquisition/addDriver/addDriver.html",clickOutsideToClose:!0,locals:{channelList:s.channels,driver:void 0}}).then(function(e){console.log("new driver: "+e.driver.driverName),s.device.drivers.push(e.driver),angular.forEach(e.frames,function(e){s.device.frames.push({name:e,major:1,minor:0})})})},s.editDriver=function(t){e.show({controller:"addDriverController",controllerAs:"ctrl",templateUrl:"app/pages/acquisition/addDriver/addDriver.html",clickOutsideToClose:!0,locals:{channelList:s.channels,driver:t}}).then(function(e){s.device.drivers.push(e.driver)})},s.save=function(){switch(s.device.triggerMode){case"FRAME":s.device.triggerFrameName=s.triggerValue;break;case"TIME":s.device.triggerInterval=s.triggerValue}t.putDevice(s.device.deviceId,s.device).then(function(e){i.showDialog("Device saved","Successful device creation!"),n.go("acquisition")})}}}e.$inject=["$mdDialog","restService","$stateParams","dialogService","$state","userService","AUTHORITIES"],angular.module("tsa.pages.acquisition").controller("editDeviceController",e)}(),function(){"use strict";function e(e,t,a,i){function n(e,t,a,i){this.frame=t,this.data=a,this.fieldIndex=e,this.option=i}function r(){void 0!==a&&(o.driver=a,o.title="Edit driver '",angular.forEach(o.driver.fields,function(e){o.fieldList.push(new n(e.fieldIndex,e.frame,e.data,e.option))})),void 0!==i&&angular.forEach(i,function(e){o.channelList.push(e)})}var o=this;o.title="New driver",o.headerLine=!1,o.driver={channelId:"",driverClassName:"",header:"",fields:[],parameters:{regex:"",separator:","}},o.frames=[],o.channelList=[],o.driverList=[],t.getDrivers().then(function(e){o.driverList=e}),o.frameList=[],t.getDescriptions().then(function(e){o.frameList=e}),o.fieldList=[],r(),o.changeDriverSelected=function(){o.driver.driverClassName.match("(NMEADriver|RegexDriver)")&&(o.headerLine=!0)},o.addField=function(){o.fieldList.push(new n)},o.removeField=function(e){var t=o.fieldList.indexOf(e);t!=-1&&o.fieldList.splice(t,1)},o.cancel=function(){e.cancel()},o.save=function(){o.driver.fields=[],angular.forEach(o.fieldList,function(e){var t=e.frame.split(":")[0],a=e.frame.split(":")[1];o.driver.fields.push(new n(e.fieldIndex,t,a,e.option));var i=0;angular.forEach(o.frames,function(e){t===e&&(i=1)}),0===i&&o.frames.push(t)}),e.hide({driver:o.driver,frames:o.frames})}}e.$inject=["$mdDialog","restService","driver","channelList"],angular.module("tsa.pages.acquisition").controller("addDriverController",e)}(),function(){"use strict";function e(e,t){function a(e,t,a){this.id=e,this.frameId=t,this.deviceId=a}function i(){this.dataList=[]}i.prototype.add=function(e,t,i){this.includes(e,t,i)||this.dataList.push(new a(e,t,i))},i.prototype.remove=function(e,t,a){angular.forEach(this.dataList,function(i){i.id==e&i.frameId==t&i.deviceId==a&&this.splice(this.indexOf(i),1)},this.dataList)},i.prototype.includes=function(e,t,a){var i=!1;return angular.forEach(this.dataList,function(n){n.id==e&n.frameId==t&n.deviceId==a&&(i=!0)}),i};var n=this;n.deviceList=t,n.selectedDataList=new i,n.frameIsSelected=function(e,t,a){var i=!1,r=!0;return angular.forEach(e,function(e){n.selectedDataList.includes(e.name,t,a)?i=!0:r=!1}),!!r||!!i&&"indeterminate"},n.selectData=function(e,t,a){n.selectedDataList.includes(e,t,a)?n.selectedDataList.remove(e,t,a):n.selectedDataList.add(e,t,a)},n.selectFrame=function(e,t,a){n.frameIsSelected(e,t,a)===!0?angular.forEach(e,function(e){n.selectedDataList.remove(e.name,t,a)}):angular.forEach(e,function(e){n.selectedDataList.includes(e.name,t,a)||n.selectedDataList.add(e.name,t,a)})},n.cancel=function(){e.cancel()},n.answer=function(){n.selectedDataList.dataList.length>0&&e.hide(n.selectedDataList.dataList)}}e.$inject=["$mdDialog","deviceList"],angular.module("tsa.services.dialog").controller("dataSelectionController",e)}(),function(){"use strict";function e(e,t,a){var i=this;i.startDate=t,i.startTime=(t.getUTCHours()>9?"":"0")+t.getUTCHours()+(t.getUTCMinutes()>9?":":":0")+t.getUTCMinutes()+(t.getUTCSeconds()>9?":":":0")+t.getUTCSeconds(),i.endDate=a,i.endTime=(a.getUTCHours()>9?"":"0")+a.getUTCHours()+(a.getUTCMinutes()>9?":":":0")+a.getUTCMinutes()+(a.getUTCSeconds()>9?":":":0")+a.getUTCSeconds(),i.cancel=function(){e.cancel()},i.answer=function(){var t=i.startTime.split(":");i.startDate.setHours(parseInt(t[0],10)-i.startDate.getTimezoneOffset()/60,t[1],t[2]),t=i.endTime.split(":"),i.endDate.setHours(parseInt(t[0],10)-i.endDate.getTimezoneOffset()/60,t[1],t[2]),e.hide({start:i.startDate,end:i.endDate})}}e.$inject=["$mdDialog","startDate","endDate"],angular.module("tsa.services.dialog").controller("dateRangeSelectionController",e)}(),function(){"use strict";function e(e,t){var a=this;a.messageList=t.messageList,a.currentMessage=void 0,function(){t.getLastMessages()}(),a.close=function(){e.cancel()},a.send=function(){angular.isDefined(a.currentMessage)&&t.send(a.currentMessage).then(function(e){a.currentMessage=void 0},function(e){console.log("message has not been send "+e.$resolved)})},a.tabFunction=function(e){var t=e.keyCode||e.which;if(void 0===a.currentMessage&&(a.currentMessage=""),9===t){e.preventDefault();var i=e.target.selectionStart,n=e.target.selectionEnd;a.currentMessage=a.currentMessage.substring(0,i)+"\t"+a.currentMessage.substring(n),angular.element(e.target).val(a.currentMessage),e.target.selectionStart=e.target.selectionEnd=i+1}}}e.$inject=["$mdDialog","messagingService"],angular.module("tsa.services.dialog").controller("messagingController",e)}(),function(){"use strict";function e(){function e(e,t,a){this.user=e,this.message=t,this.messageTime=a}return e}angular.module("tsa.services.dialog").factory("Message",e)}(),function(){"use strict";function e(e,t,a,i,n,r){var o=this;o.connectionTime=t.getServerTime().time,o.messageList=[],o.lastMessage={},o.send=function(e){function r(){return s=angular.isDefined(a.getCurrentUser())?a.getCurrentUser().name:"user"}var s=r(),d=new i(s,e,t.getServerTime().time);return n.sendMessage(d).then(function(e){return o.getLastMessages(),e},function(e){return e})},o.getLastMessages=function(){return n.getLastMessages().then(function(e){angular.copy(e,o.messageList)},function(e){return e})},o.getLastMessage=function(){return n.getLastMessage().then(function(t){o.lastMessage.messageTime!==t.messageTime&&(angular.copy(t,o.lastMessage),o.connectionTime<t.messageTime&&(e.showToastChat(r("translate")("toast.newMessage")),o.connectionTime=t.messageTime))},function(e){return e})}}e.$inject=["dialogService","statusService","userService","Message","restService","$filter"],angular.module("tsa.services").service("messagingService",e)}(),function(){"use strict";function e(e,t){var a=this,i="author";a.passwordInput=void 0,a.inputMatch=!1,a.close=function(){e.cancel()},a.redirect=function(){return a.passwordInput!==i?a.inputMatch=!0:void t.showMessaging()},a.onKeyPressed=function(e){13===e.which&&a.redirect()}}e.$inject=["$mdDialog","dialogService"],angular.module("tsa.services.dialog").controller("messagingAccessController",e)}(),function(){"use strict";function e(e,t){var a=this;a.title=t,a.cancel=function(){e.cancel()},a.save=function(){e.hide(a.title)}}e.$inject=["$mdDialog","title"],angular.module("tsa.services.dialog").controller("saveDashboardController",e)}(),function(){"use strict";function e(e,t,a,i,n){var r=this;r.title=t,r.msg=a,r.msgOk=void 0!==i?i:"yes",r.msgCancel=void 0!==n?n:"cancel",r.cancel=function(){e.cancel()},r.disconnect=function(){e.hide()}}e.$inject=["$mdDialog","title","msg","msgOk","msgCancel"],angular.module("tsa.services.dialog").controller("validationController",e)}(),function(){"use strict";function e(e,t,a){var i=this;i.viewProvider=a,i.viewList=a.getViewList(),i.mosaicList=a.getMosaicList();var n=t.registerForDeviceList();n.promise.then({},{},function(){i.viewList=a.getViewList()}),i.cancel=function(){a.stopRefreshMosaic(),t.unregisterForDeviceList(n),e.cancel()},i.selectView=function(i){a.stopRefreshMosaic(),t.unregisterForDeviceList(n),e.hide({view:i.type,config:i.config,title:i.title,icon:i.icon})}}e.$inject=["$mdDialog","acquisitionService","viewProvider"],angular.module("tsa.services.dialog").controller("viewSelectionController",e)}(),function(){"use strict";function e(){var e=this;e.selectedItem,e.$onInit=function(){e.listItems&&e.itemCode&&angular.forEach(e.listItems,function(t){t.code===e.itemCode&&(e.selectedItem=t,e.updateItem())})},e.$onChanges=function(t){t.listItems&&angular.isDefined(t.listItems.currentValue)&&(e.selectedItem=void 0),t.itemCode&&angular.isDefined(t.itemCode.currentValue)&&e.listItems&&angular.forEach(e.listItems,function(a){a.code===t.itemCode.currentValue&&(e.selectedItem=a)})},e.$onDestroy=function(){},e.updateItem=function(){e.onItemChange({$item:e.selectedItem})}}angular.module("tsa.tsaViews.codeNameFields",[]).component("tsaCodeNameFields",{templateUrl:"app/tsa-views/casino/codeNameFields/codeNameFields.html",controller:e,controllerAs:"ctrl",bindings:{itemType:"@",listItems:"<",itemCode:"<",onItemChange:"&",itemReadonly:"<",itemFollow:"<"}})}(),function(){"use strict";function e(e){var t=this;t.simpleSampingInterval=60,t.maxValues=1e5,t.timeStampingStrategy="resampling",t.reference="reference",t.resampleInterval=1,t.intervalStampFraction=1,t.getParams=function(){var e={maxValues:t.maxValues};if("simple"==t.mode)return e.timeStampingStrategy="resampling",e.intervalOrRef=t.simpleSampingInterval,e;switch(e.timeStampingStrategy=t.timeStampingStrategy,t.timeStampingStrategy){case"reference":e.intervalOrRef=t.reference;break;case"resampling":e.intervalOrRef=t.resampleInterval,e.intervalStampFraction=t.intervalStampFraction}return e}}e.$inject=["dialogService"],angular.module("tsa.pages.dataAccess.paramSelector",[]).component("tsaParamSelector",{templateUrl:"app/pages/dataAccess/components/paramSelector/paramSelector.html",controller:e,controllerAs:"ctrl",bindings:{getParams:"=",mode:"<"}})}(),function(){"use strict";function e(e){var t=this;t.CUSTOM_RANGE="pages.data-access.custom-range",t.selectionList={LAST_HOUR:"pages.data-access.last-hour",LAST_6_HOURS:"pages.data-access.last-6-hours",LAST_24_HOURS:"pages.data-access.last-24-hours"},t.currentSelection=t.selectionList.LAST_HOUR,t.getDateRange=function(){switch(t.currentSelection){case t.selectionList.LAST_HOUR:return{start:new Date-36e5,end:(new Date).getTime()};case t.selectionList.LAST_6_HOURS:return{start:new Date-216e5,end:(new Date).getTime()};case t.selectionList.LAST_24_HOURS:return{start:new Date-864e5,end:(new Date).getTime()};case t.CUSTOM_RANGE:return{start:t.startDate.getTime(),end:t.endDate.getTime()}}},t.setCustomRange=function(){t.startDate=new Date,t.endDate=new Date,e.showSelectDateRange(t.startDate,t.endDate).then(function(e){t.startDate=e.start,t.endDate=e.end})}}e.$inject=["dialogService"],angular.module("tsa.pages.dataAccess.periodSelector",[]).component("tsaPeriodSelector",{templateUrl:"app/pages/dataAccess/components/periodSelector/periodSelector.html",controller:e,controllerAs:"ctrl",bindings:{getDateRange:"="}})}(),function(){"use strict";function e(e,t,a,i,n){function r(e,t){this.label=e,this.data=[],this.hidden=!1,this.borderColor=l[d%l.length],d++,angular.forEach(s.frames,function(t){this.data.push({x:t.time,y:t[e]})},this)}function o(){void 0!==s.chart&&s.chart.destroy();var e=document.getElementById(s.canvasId);e&&(s.chart=Chart.Scatter(e,{data:s.chartData,options:i.getChartOptions()}))}var s=this;s.displayMode="table",s.chartData={datasets:[]},s.canvasId="resultView",s.chart=void 0;var d=0,l=["rgb(26, 117, 174)","#8BC34A","#FF5722","#3F51B5","#F44336","#9C27B0","#FDD835","#2196F3","#E91E63","#009688","#673AB7","#795548","#E91E63","#CDDC39"];s.updateChart=function(){d=0,s.chartData.datasets=[],angular.isDefined(s.frames)&&s.frames.length>0&&(angular.forEach(s.frames[0],function(e,t){"time"!=t&&"$$hashKey"!=t&&s.chartData.datasets.push(new r(t))}),void 0!=s.chart&&s.chart.update())},s.$onInit=function(){e(o,200);n.subscribe(a,o)},s.$onChanges=function(e){s.updateChart(),void 0!=s.frames&&s.frames.length>0&&(s.framesTable=s.frames.slice(),angular.forEach(s.framesTable,function(e){e.time=t("date")(new Date(e.time),"dd MMM yyyy; HH:mm:ss","+0")}))}}e.$inject=["$timeout","$filter","$scope","graphUtils","themeService"],angular.module("tsa.pages.dataAccess.resultCard",[]).component("tsaResultCard",{templateUrl:"app/pages/dataAccess/components/resultCard/resultCard.html",controller:e,controllerAs:"ctrl",bindings:{frames:"<",description:"<"}})}(),function(){"use strict";function e(e,t,a,i,n,r){function o(t){var a=[];angular.forEach(t,function(e){void 0===e.colname&&(e.colname=e.id),angular.forEach(c.simpleDataList,function(t){t.id===e.id&&t.frameId===e.frameId&&t.deviceId===e.deviceId&&a.push(e)}),a.includes(e)||c.simpleDataList.push(e)}),a.length>0&&i.showDialog(e("translate")("pages.data-access.data-selection"),e("translate")("pages.data-access.data-already-in-table"))}var s=r.NAVIGATION,d=r.WEATHER,l=r.THERMOSAL,c=this;c.aggregateList=["RAW","HOLD","NEAREST","INTERPOLATE","TOTAL","COUNT","AVERAGE"],c.simpleDataList=[],c.advancedDataList=[],c.getVariableList=function(){if("advanced"===c.mode)return c.advancedDataList;var e=[];return angular.forEach(c.simpleDataList,function(t){e.push(new a.Variable(t.id,t.frameId,t.deviceId,(void 0),t.colname))}),e},c.addData=function(){switch(c.mode){case"simple":n.getArchiveDevices().then(function(e){i.showSelectData(e).then(o)},function(){i.showDialog(e("translate")("pages.data-access.error"),e("translate")("pages.data-access.device-list-unavailable"))});break;case"advanced":c.advancedDataList.push({varid:"",colname:"",aggregate:"",units:"","default":"",min:"",max:""})}},c.clearAll=function(){switch(c.mode){case"simple":c.simpleDataList=[];break;case"advanced":c.advancedDataList=[]}},c.addNavData=function(){o(s)},c.addWeatherData=function(){o(d)},c.addTSData=function(){o(l)}}e.$inject=["$filter","acquisitionService","archiveService","dialogService","restService","DATA_ACCESS"],angular.module("tsa.pages.dataAccess.variableSelector",[]).component("tsaVariableSelector",{templateUrl:"app/pages/dataAccess/components/variableSelector/variableSelector.html",controller:e,controllerAs:"ctrl",bindings:{getVariableList:"=",mode:"<"}})}(),angular.module("tsa").run(["$templateCache",function(e){e.put("app/components/card/card.html",'<md-card id={{ctrl.cardId}} ng-switch=ctrl.type><tsa-adcp ng-switch-when=ADCP card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-adcp><tsa-attitude ng-switch-when=Attitude card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-attitude><tsa-debug ng-switch-when=Debug card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type)></tsa-debug><tsa-depth ng-switch-when=Depth card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-depth><tsa-devices ng-switch-when=Devices card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-devices><tsa-driver-preview ng-switch-when=DriverPreview card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-driver-preview><tsa-ephemeride ng-switch-when=Ephemeride card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-ephemeride><tsa-ferrybox-fluo ng-switch-when="Ferrybox fluo" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-ferrybox-fluo><tsa-ferrybox-technic ng-switch-when="Ferrybox technic" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-ferrybox-technic><tsa-ferrybox-science ng-switch-when="Ferrybox science" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-ferrybox-science><tsa-flow ng-switch-when=Flow card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-flow><tsa-funes-winch ng-switch-when="Funes winch" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-funes-winch><tsa-generic ng-switch-when=Generic card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-generic><tsa-gps ng-switch-when=GPS card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-gps><tsa-graphics ng-switch-when=Graphics card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-graphics><tsa-gravimeter ng-switch-when=Gravimeter card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-gravimeter><tsa-kss31 ng-switch-when=Kss31 card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-kss31><tsa-haul-composition ng-switch-when="Haul composition" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-haul-composition><tsa-hull-sound-speed ng-switch-when="Hull sound speed" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-hull-sound-speed><tsa-navigation ng-switch-when=Navigation card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-navigation><tsa-magnetometer ng-switch-when=Magnetometer card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-magnetometer><tsa-map ng-switch-when=Map card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config mode=navigation></tsa-map><tsa-map ng-switch-when=Station card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config mode=station></tsa-map><tsa-mobile ng-switch-when=Mobile card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-mobile><tsa-numerical ng-switch-when=Numerical card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-numerical><tsa-propulsion-tl ng-switch-when="Propulsion Tl" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-propulsion-tl><tsa-propulsion-at ng-switch-when="Propulsion At" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-propulsion-at><tsa-propulsion-pp ng-switch-when="Propulsion Pp" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-propulsion-pp><tsa-landing-at ng-switch-when="Landing At" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-landing-at><tsa-multibeam ng-switch-when=Multibeam card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-multibeam><tsa-species ng-switch-when=Species card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-species><tsa-template ng-switch-when=Template card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-template><tsa-thermo-config ng-switch-when=ThermoConfig card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-thermo-config><tsa-thermometer ng-switch-when=Thermometer card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-thermometer><tsa-thermosal ng-switch-when=Thermosal card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-thermosal><tsa-trawl ng-switch-when=Trawl card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-trawl><tsa-trawling ng-switch-when=Trawling card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-trawling><tsa-video ng-switch-when=Video card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-video><tsa-video-call ng-switch-when="Video Call" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-video-call><tsa-weather ng-switch-when=Anemometer card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config mode=anemometer></tsa-weather><tsa-weather ng-switch-when=Weather card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config mode=default></tsa-weather><tsa-winch ng-switch-when=Winch card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-winch><tsa-message ng-switch-when=Message card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-message><tsa-ef-pos ng-switch-when=EFPos card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-ef-pos><tsa-ef-met ng-switch-when=EFMet card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-ef-met><tsa-ef-tss ng-switch-when=EFTss card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-ef-tss><tsa-ef-aum ng-switch-when=EFAum card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-ef-aum><tsa-casino ng-switch-when=Casino card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-casino><tsa-casino-add-event ng-switch-when="Casino - Add event" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-casino-add-event><tsa-route-md ng-switch-when=Route card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-route-md><tsa-winch-alarm-pp ng-switch-when="Winch Alarm Pp" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-winch-alarm-pp><tsa-winch-info ng-switch-when="Winch Info" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-winch-info><tsa-kley-state ng-switch-when="Kley state" card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-kley-state><tsa-menu ng-switch-when=Menu card-id={{ctrl.cardId}} on-change-card-type=ctrl.setType(type) config=ctrl.config></tsa-menu><!-- Default view (= empty view) --><div ng-switch-default><!-- Toolbar --><div layout=row class=tsa-toolbar><md-icon class=material-icons>web_asset</md-icon><p class=title>{{"views.empty.title" | translate }}</p><span flex></span><tsa-settings-button on-change-view=ctrl.setType(type) card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><div layout=row layout-align="center center"><md-button class=md-primary ng-click=ctrl.showChangeViewDialog()>{{"views.empty.select" | translate }}</md-button></div></div></md-card>'),e.put("app/components/console/console.html",'<div layout=column style="resize: both; height: 300px; margin:0px"><md-nav-bar md-selected-nav-item=ctrl.consoleView md-whiteframe=5><md-nav-item ng-repeat="view in ctrl.consoleViews" md-nav-click=ctrl.changeConsole(view) name={{view}}>{{view}}</md-nav-item></md-nav-bar><div layout=row flex=100 style="margin: 0px; padding: 0px"><textarea id=acquisition-textarea flex md-no-autogrow ng-model=ctrl.console md-select-on-focus readonly style="border: 0px"></textarea></div></div>'),
e.put("app/components/dataView/dataView.html",'<div layout=row layout-align="center center" ng-class="{\'data-missing\': ctrl.dataMissing, \'green\': ctrl.redGreen}"><!-- Title & subtitle side --><div ng-hide=ctrl.titleDisabled flex=45 layout=column layout-align=center class=title-zone><!-- Title --><h2 class="title md-headline">{{ctrl.title | translate}}</h2><!-- Subtitle --><p ng-if=ctrl.showSubtitle class="subtitle md-subhead">{{ctrl.subtitle}}</p></div><!-- Value --><h2 flex class="value md-display-1" ng-class=ctrl.frontColor>{{ctrl.value}}</h2></div>'),e.put("app/components/doubleDataView/doubleDataView.html",'<div layout=row layout-align="center center"><!-- Title --><h2 flex=30 class=md-headline>{{ctrl.title | translate}}</h2><!-- Data 1 --><tsa-data-view flex=35 data=ctrl.dataId1 frame-id=ctrl.frameId1 device-id=ctrl.deviceId1 title-disabled=true format={{ctrl.format1}} opt-value=ctrl.optValue1></tsa-data-view><!-- Data 2 --><tsa-data-view flex=35 data=ctrl.dataId2 frame-id=ctrl.frameId2 device-id=ctrl.deviceId2 title-disabled=true format={{ctrl.format2}} opt-value=ctrl.optValue2></tsa-data-view></div>'),e.put("app/components/navbar/navbar.html",'<tsa-sidenav></tsa-sidenav><md-toolbar class=md-hue-2 md-whiteframe=2 layout=row layout-align="start center" ng-style="!navbar.connected.flag && {\'background-color\':\'#F44336\'} ||\n                      navbar.isWelcomePage() && {\'background-color\':\'transparent\'} ||\n                      !navbar.isWelcomePage() && {}"><div class=md-toolbar-tools><!-- MENU ICON --><md-button ng-hide=navbar.isSDIVUserAndStaticView() ng-click=navbar.openSidenav() class=md-icon-button style="background: transparent !important"><i class=material-icons>menu</i></md-button><!-- TOOLBAR TITLE --> <img src=resources/images/favicon.ico class=tsa-icon><h2 ng-if=!navbar.isSDIVUserAndStaticView() ui-sref=welcome style="cursor: pointer">TECHSAS</h2><h2 ng-if=navbar.isSDIVUserAndStaticView()>TECHSAS - {{navbar.currentUserProvider.currentUser.name}}</h2><span flex></span><h2 ng-if=!navbar.connected.flag>{{"components.navbar.connection-error" | translate}}</h2><span flex></span><div layout=row layout-align="center center" ng-if=navbar.isSDIVUserAndStaticView()><i class="mdi mdi-24px mdi-alert-outline"></i><p class=message><i>{{"components.navbar.message" | translate}}</i></p></div><span flex></span><!-- TIME --><div class="time show-time-button" layout=row ng-click=navbar.showTimes()><h2><b>{{navbar.serverTime.time | date: "HH:mm:ss" : "UTC" }}</b></h2><p class=md-body-1>UTC</p><h3>{{navbar.serverTime.time | date: "dd/MM/yy" : "UTC" }}</h3><md-tooltip>{{"components.navbar.server-time" | translate}}</md-tooltip></div><!--DAY MODE--><md-button class=md-icon-button ng-click=navbar.changeDayMode()><md-icon class=material-icons>{{navbar.theme.icon}}</md-icon><md-tooltip>{{"components.navbar.day-night-mode" | translate}}</md-tooltip></md-button><!--TRANSLATION--><md-menu md-position-mode="target-right target"><md-button layout=row layout-align="center center" ng-click=$mdOpenMenu($event) style="min-width: 0; margin: 6px; padding: 7px"><img ng-src={{navbar.currentLocaleImg}} style="height: 20px"><md-tooltip>{{"components.navbar.select-language" | translate}}</md-tooltip></md-button><md-menu-content style="width: 150px"><md-menu-item ng-repeat="locale in navbar.locales"><md-button ng-click=navbar.changeLocale(locale) ng-style="locale.id === (\'directives.language-select.Language\' | translate) ?{\'color\': \' #1a75ad\'}: {}"><div layout=row flex layout-align="center center"><p flex>{{locale.name}}</p><img ng-src={{locale.img}} style="width: 30px" md-menu-align-target></div></md-button></md-menu-item></md-menu-content></md-menu><!-- MESSAGING --><md-button ng-if=navbar.ENABLE_CHAT class=md-icon-button ng-click=navbar.openMessagingWindow()><md-icon class=material-icons>chat</md-icon><md-tooltip>{{"components.navbar.messaging" | translate}}</md-tooltip></md-button><!-- HELP --><md-button class=md-icon-button ng-click=navbar.goToHelpPage() ng-hide=navbar.isSDIVUserAndStaticView()><md-icon class=material-icons>help</md-icon><md-tooltip>{{"components.navbar.online-help" | translate}}</md-tooltip></md-button></div><audio hidden id=ringtone loop><source src=resources/mario_bros_1up.mp3 type=audio/mpeg></audio></md-toolbar><!--</nav>-->'),e.put("app/components/settingsButton/settingsButton.html",'<div><md-button class=md-icon-button ng-click=ctrl.showChangeViewDialog() ng-if=ctrl.isStaticPage()><md-icon>system_update_alt</md-icon><md-tooltip>{{"components.settings-button.change-view" | translate}}</md-tooltip></md-button><md-button class=md-icon-button ng-click=ctrl.deleteClick() ng-if=!ctrl.isStaticPage()><md-icon>close</md-icon><md-tooltip>{{"components.settings-button.close" | translate}}</md-tooltip></md-button></div>'),e.put("app/components/sidenav/sidenav.html",'<md-sidenav class=md-sidenav-left md-component-id=left layout=column><!-- Title bar --><div class=title md-whiteframe=2 layout=row layout-align="start center"><h1 class=md-headline ui-sref=welcome style="cursor: pointer">TECHSAS</h1><span flex></span><md-button ng-click=ctrl.closeSidenav() class=md-icon-button><md-icon class=material-icons>close</md-icon></md-button></div><!-- User --><div class=user-block layout=column><!--Login title--><div layout=row style="color: grey"><md-icon class=account-icon ng-class="ctrl.isConnected ? \'connected\': \'not-connected\'">account_circle</md-icon><div flex style="padding: 8px"><h2 class=md-headline ng-show=!ctrl.isConnected>{{"components.sidenav.not-connected" | translate}}</h2><div ng-show=ctrl.isConnected><h3 class=md-headline>{{ctrl.currentUser.name}}</h3><p class=md-subhead>{{ctrl.currentUser.login}}</p></div></div></div><!-- Login input--><div layout=column ng-show="!ctrl.connectionInProgress && !ctrl.isConnected" style="height: 144px"><md-input-container><label>{{"components.sidenav.login" | translate}}</label><input ng-model=ctrl.login type=text></md-input-container><md-input-container><label>{{"components.sidenav.password" | translate}}</label><input type=password ng-model=ctrl.password ng-keypress=ctrl.onKeyPressed($event)></md-input-container></div><!-- Login progress circle--><div ng-show=ctrl.connectionInProgress layout=column layout-align="center center" style="height: 144px"><md-progress-circular md-mode=indeterminate></md-progress-circular></div><!-- Login Button--><div layout=row layout-align=end><md-button class="md-primary md-raised" ng-show=!ctrl.isConnected ng-click=ctrl.connection() ng-disabled="!ctrl.login || !ctrl.password">{{"components.sidenav.log-in" | translate}}</md-button><md-button class=md-warn ng-show=ctrl.isConnected ng-click=ctrl.disconnection()>{{"components.sidenav.log-out" | translate}}</md-button></div></div><md-divider></md-divider><!-- Route selection --><md-button ng-repeat="route in ctrl.routeList" layout=row layout-align="start stretch" ng-class="route.isSelected ? \'button-route-selected\':\'button-route\'" ui-sref={{route.sref}}><md-icon style="padding: 10px; width: 48px">{{route.icon}}</md-icon><h3>{{\'components.sidenav.\' + route.title | translate}}</h3><span flex></span><div class=vertical-bar></div></md-button><md-divider></md-divider><span flex></span><div layout=row class=info><p class=md-subhead>{{"pages.welcome.info" | translate}} <a href=mailto:techsas@ifremer.fr>techsas@ifremer.fr</a></p></div></md-sidenav>'),e.put("app/pages/acquisition/acquisition.html",'<div class="tsa-page acquisition" layout=column ng-init=ctrl.init()><!-- Buttons in the main navigation bar --><div class=tsa-navbar-buttons layout=row layout-align="center center"><!--        <md-button class="md-icon-button" ui-sref="device">--><!--            <md-icon>add_circle</md-icon>--><!--            <md-tooltip>{{"pages.acquisition.new-device" | translate}}</md-tooltip>--><!--        </md-button>--><md-menu md-position-mode="target-right target"><md-button class=md-icon-button ng-click=$mdOpenMenu($event)><md-icon md-menu-origin>filter_list</md-icon><md-tooltip>Filters</md-tooltip></md-button><md-menu-content><md-menu-item><div layout=row layout-align="center center" style="padding-right: 0px"><p flex>Status filters</p><md-button ng-click="" class=md-icon-button style="background-color: transparent !important"><md-icon md-menu-align-target style="margin: auto 3px auto 0">close</md-icon></md-button></div></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item ng-repeat="status in ctrl.STATUS" style="padding-left: 16px"><md-checkbox ng-model=status.show><p>{{status.text}}</p></md-checkbox></md-menu-item></md-menu-content></md-menu><md-button class=md-icon-button ng-click="ctrl.displayMode = ctrl.displayMode == \'grid\' ? \'list\': \'grid\';"><md-icon ng-show="ctrl.displayMode === \'list\'">view_module</md-icon><md-icon ng-show="ctrl.displayMode === \'grid\'">view_headline</md-icon><md-tooltip>Display mode</md-tooltip></md-button><md-button class=md-icon-button ng-click="ctrl.showConsole = !ctrl.showConsole"><md-icon>message</md-icon><md-tooltip>Show/hide console</md-tooltip></md-button></div><!-- Toolbar--><div ng-show="ctrl.displayMode === \'list\'" class=tsa-toolbar md-whiteframe=1 layout=row layout-align="center center"><md-button flex=20 layout=row layout-align="start center" class=tsa-button-text-icon ng-click="ctrl.setOrderDevice(\'device.name\')"><div layout=row><p>Device</p><md-icon class=material-icons>arrow_drop_down</md-icon></div><md-tooltip>Sort by name</md-tooltip></md-button><md-button flex=20 layout=row layout-align="start center" class=tsa-button-text-icon ng-click="ctrl.setOrderDevice(\'status.text\')"><div layout=row><p>Status</p><md-icon class=material-icons>arrow_drop_down</md-icon></div><md-tooltip>Sort by status</md-tooltip></md-button><p flex=15>Frames</p><div flex layout=row><p flex=80>File(s)</p><p flex=20>Size</p></div></div><!--<md-divider></md-divider>--><!--Device list --><md-list ng-show="ctrl.displayMode === \'list\'" layout=column flex style="padding: 0px"><md-content flex><!--Item list--  ng-show="item.device.isEnabled" --><md-list-item class=device style="padding: 0px" ng-repeat="item in ctrl.itemList | orderBy: ctrl.orderDevice" ng-show=item.status.show ng-click=ctrl.selectItem(item) ng-style="(item.isSelected) ?\n                          {\'background-color\': \' rgba(254, 237, 1, 0.47)\'}: {}" ng-disabled=item.isRemoved><div flex layout=row layout-align="center center"><div flex=20 layout=row><p class=tsa-device-title>{{item.device.name}}</p><p style="font-size: small">{{item.device.id}}</p></div><p flex=20 style="color: {{item.status.color}}">{{item.status.text}}</p><div flex=15><p>{{item.frameNumber}}</p></div><div flex layout=column><div ng-repeat="file in item.files" layout=row><p flex=80>{{file.filename.split(\'/\').pop()}}</p><p flex=20>{{file.filesizeFormated}}</p></div></div></div><div layout=row layout-align=end><!--                    <md-button class="md-icon-button" ui-sref="device({id:\'{{item.device.id}}\'})">--><!--                        <md-icon>edit</md-icon>--><!--                    </md-button>--><!--                    <md-button class="md-icon-button" ng-click="ctrl.removeItem(item)">--><!--                        <md-icon>delete</md-icon>--><!--                    </md-button>--></div><md-divider></md-divider></md-list-item></md-content></md-list><!-- Grid --><md-content ng-show="ctrl.displayMode === \'grid\'" flex class=tsa-page><md-grid-list flex md-cols-xs=2 md-cols-sm=4 md-cols-md=6 md-cols-gt-md=8 md-cols-gt-lg=10 md-row-height=130px md-gutter=12px style="margin: 12px"><md-grid-tile ng-repeat="item in ctrl.itemList" md-whiteframe=1 layout=column ng-if=item.status.show><md-content layout=column><p class=tsa-device-title>{{item.device.name}}</p><md-divider></md-divider><p>{{item.device.id}}</p><p>{{item.frameNumber}}</p></md-content><md-grid-tile-footer style=background-color:{{item.status.color}}><h3>{{item.status.text}}</h3></md-grid-tile-footer></md-grid-tile></md-grid-list></md-content><!-- Console --><div ng-show=ctrl.showConsole layout=column style="resize: both; height: 300px; margin:0px ; z-index: 2"><md-nav-bar md-selected-nav-item=ctrl.consoleView md-whiteframe=5><md-nav-item ng-repeat="view in ctrl.consoleViews" md-nav-click=ctrl.changeConsole(view) name={{view}}>{{view}}</md-nav-item><span flex></span><md-button class=md-icon-button ng-click="ctrl.showConsole = false" style="margin: auto"><md-icon>close</md-icon></md-button></md-nav-bar><div layout=row flex=100 style="margin: 0px; padding: 0px"><textarea id=acquisition-textarea flex md-no-autogrow ng-model=ctrl.console md-select-on-focus readonly style="border: 0px"></textarea></div></div></div>'),e.put("app/pages/dashboard/dashboard.html",'<div ng-init=ctrl.init() class=tsa-page><!-- Buttons inside the main toolbar --><div class=tsa-navbar-buttons layout=row layout-align="center center"><!-- Dashboard selection menu --><md-menu md-position-mode="target-right target"><md-button layout=row layout-align="center center" ng-click=$mdOpenMenu($event)><div layout=row><p style="margin: 0 8px">{{ctrl.selectedDashboard.title | translate}}</p><md-icon class=material-icons>arrow_drop_down</md-icon></div><md-tooltip>{{"pages.dashboard.select-dashboard" | translate}}</md-tooltip></md-button><md-menu-content width=4><!-- Personal dashboard list --><md-menu-item ng-repeat="(title, itemList) in ctrl.dashboardListPerso"><md-button ng-click="ctrl.dashboardService.setCurrentDashboard(title, itemList)" style="padding-right: 0px" ng-style="title  === ctrl.selectedDashboard.title ?{\'color\': \' #1a75ad\'}: {}"><div layout=row flex><p flex>{{title}}</p><md-icon md-menu-align-target ng-style="title  === ctrl.selectedDashboard.title ? {\'color\': \' #1a75ad\'}: {}">dashboard</md-icon></div></md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-click=ctrl.dashboardService.switchToNewDashboard() style="padding-right: 0px"><div layout=row flex><p flex>{{"pages.dashboard.new-dashboard" | translate}}</p><md-icon md-menu-align-target>add</md-icon></div></md-button></md-menu-item></md-menu-content></md-menu><!-- buttons --><md-button class=md-icon-button ng-click=ctrl.showSaveDialog() ng-disabled="ctrl.userService.getCurrentUser() == undefined"><md-icon class=material-icons>save</md-icon><md-tooltip>{{"pages.dashboard.save-dashboard" | translate}}</md-tooltip></md-button><md-button class=md-icon-button ng-click=ctrl.showDeleteDialog() ng-disabled=!ctrl.deleteEnabled()><md-icon class=material-icons>delete</md-icon><md-tooltip>{{"pages.dashboard.delete-dashboard" | translate}}</md-tooltip></md-button><md-button class=md-icon-button ng-click=ctrl.dashboardService.showAddItem()><md-icon class=material-icons>add_circle</md-icon><md-tooltip>{{"pages.dashboard.new-card" | translate}}</md-tooltip></md-button></div><!-- Dashboard grid --><div gridster=ctrl.gridsterOpts style=height:100%><ul><li gridster-item=item ng-repeat="item in ctrl.currentDashboard.itemList"><tsa-card card-id={{item.id}} type=item.type config=item.config></tsa-card></li></ul></div></div>'),e.put("app/pages/dataAccess/dataAccess.html",'<div class="tsa-page data-access" layout=column ng-init=ctrl.init()><!-- Buttons in the main navigation bar --><div class=tsa-navbar-buttons layout=row layout-align="center center"><md-nav-bar md-selected-nav-item=ctrl.currentMode><md-nav-item md-nav-click="goto(\'page1\')" name=simple>{{"pages.data-access.simple" | translate}}</md-nav-item><md-nav-item md-nav-click="goto(\'page2\')" name=advanced>{{"pages.data-access.advanced" | translate}}</md-nav-item></md-nav-bar></div><!-- Inputs (period, settings, data...) --><div layout=row class=inputs md-whiteframe=2><tsa-variable-selector flex=70 mode=ctrl.currentMode get-variable-list=ctrl.getVariableList></tsa-variable-selector><md-divider></md-divider><div flex=30 layout=column><tsa-period-selector mode=ctrl.currentMode get-date-range=ctrl.getDateRange></tsa-period-selector><tsa-param-selector mode=ctrl.currentMode get-params=ctrl.getParams></tsa-param-selector><span flex></span><!-- Download buttons --><div layout=row layout-align=center class=download-buttons><md-button class=md-primary ng-disabled="ctrl.netcdfInProgress || ctrl.csvInProgress" ng-click="ctrl.sendRequest(\'json\')" ng-class="{\'in-progress\': ctrl.researchInProgress}"><div layout=row layout-align="center center"><md-icon>search</md-icon><md-progress-circular md-mode=indeterminate md-diameter=20px></md-progress-circular>{{"pages.data-access.search" | translate}}</div></md-button><md-button class=md-primary ng-disabled="ctrl.netcdfInProgress || ctrl.researchInProgress" ng-click="ctrl.sendRequest(\'csv\')" ng-class="{\'in-progress\': ctrl.csvInProgress}"><div layout=row layout-align="center center"><md-icon>file_download</md-icon><md-progress-circular md-mode=indeterminate md-diameter=20px></md-progress-circular>CSV</div></md-button><md-button class=md-primary ng-disabled="ctrl.csvInProgress || ctrl.researchInProgress" ng-click="ctrl.sendRequest(\'netcdf\')" ng-class="{\'in-progress\': ctrl.netcdfInProgress}"><div layout=row layout-align="center center"><md-icon>file_download</md-icon><md-progress-circular md-mode=indeterminate md-diameter=20px></md-progress-circular>NetCDF</div></md-button></div></div></div><!-- Login progress --><div flex ng-show=ctrl.researchInProgress layout=column layout-align="center center" style="height: 200px"><md-progress-circular md-mode=indeterminate></md-progress-circular><h2 class=md-headline style="color: #1A75AE">{{"pages.data-access.research-msg" | translate}}</h2></div><!-- Result --><tsa-result-card flex frames=ctrl.results ng-show="!ctrl.researchInProgress && ctrl.results.length > 0"></tsa-result-card></div>'),e.put("app/pages/login/login.html",'<div class=tsa-login layout=column layout-align="center center"><!-- login card --><md-card><div layout=row layout-align=start><md-icon class=account-icon>lock_outline</md-icon><h1 class="md-headline card-title">{{"pages.login.authentication" | translate}}</h1></div><p class=md-body-1>{{"pages.login.authentication-msg" | translate}}</p><md-input-container ng-show=!ctrl.connectionInProgress><label>{{"components.sidenav.login" | translate}}</label><input ng-model=ctrl.login type=text></md-input-container><md-input-container ng-show=!ctrl.connectionInProgress><label>{{"components.sidenav.password" | translate}}</label><input type=password ng-model=ctrl.password ng-keypress=ctrl.onKeyPressed($event)></md-input-container><!-- Login progress circle--><div ng-show=ctrl.connectionInProgress layout=column layout-align="center center" style="height: 144px"><md-progress-circular md-mode=indeterminate></md-progress-circular></div><!-- Login Button--><div layout=row layout-align=end ng-show=!ctrl.connectionInProgress><md-button class="md-primary md-raised" ng-click=ctrl.connection() ng-disabled="!ctrl.login || !ctrl.password">{{"components.sidenav.log-in" | translate}}</md-button></div></md-card></div>'),e.put("app/pages/staticGrid/staticGrid.html",'<div class="tsa-page tsa-static-grid" layout=column><!-- Buttons inside the main toolbar --><div class=tsa-navbar-buttons layout=row layout-align="center center"><md-button class=md-icon-button ng-click=ctrl.service.changeViewMode()><md-icon ng-if="ctrl.service.getViewMode() == ctrl.service.MODES.SINGLE" class=material-icons>filter_1</md-icon><md-tooltip ng-if="ctrl.service.getViewMode() == ctrl.service.MODES.SINGLE">{{"pages.static-grid.switch-to-4" | translate}}</md-tooltip><md-icon ng-if="ctrl.service.getViewMode() == ctrl.service.MODES.MULTIPLE_4" class=material-icons>filter_4</md-icon><md-tooltip ng-if="ctrl.service.getViewMode() == ctrl.service.MODES.MULTIPLE_4">{{"pages.static-grid.switch-to-6" | translate}}</md-tooltip><md-icon ng-if="ctrl.service.getViewMode() == ctrl.service.MODES.MULTIPLE_6" class=material-icons>filter_6</md-icon><md-tooltip ng-if="ctrl.service.getViewMode() == ctrl.service.MODES.MULTIPLE_6">{{"pages.static-grid.switch-to-1" | translate}}</md-tooltip></md-button></div><!-- Nav bar (only in single mode) --><md-nav-bar ng-if=ctrl.service.isSingleMode() md-selected-nav-item=ctrl.currentNavItemId md-whiteframe=2 style="z-index: 2"><div layout=row ng-repeat="cardrow in ctrl.cards" ng-init="rowIndex = $index"><md-nav-item md-nav-click="ctrl.selectCard(rowIndex, $index)" name={{card.id}} ng-repeat="card in cardrow"><i class="mdi mdi-24px mdi-{{card.icon | translate}}"></i> {{card.title | translate }}</md-nav-item></div></md-nav-bar><!-- Static grid --><div style="margin-bottom: 8px"></div><div flex layout=column ng-class="ctrl.service.isSingleMode() ? \'static-single-mode\':\'\'" style="padding-left: 8px; padding-bottom: 8px" ng-repeat="cardrow in ctrl.cards" ng-show=ctrl.showRow($index)><div layout=row layout-fill><tsa-card ng-repeat="card in cardrow" ng-show=ctrl.showCard(card) flex={{ctrl.flex}} card-id={{card.id}} type=card.type config=card.config title-value=card.title icon=card.icon style="padding-right: 8px"></tsa-card></div></div></div>'),e.put("app/pages/tracking/tracking.html","<div ng-init=ctrl.init() class=tsa-page><tsa-map mode=navigation title=Map config=ctrl.config card-id={{ctrl.cardId}}></tsa-map></div>"),e.put("app/pages/welcome/welcome.html",'<div flex class="tsa-welcome {{ctrl.ship}}" layout=row ng-init=ctrl.init()><!-- Background layer --><div flex class=layer layout=column><div flex layout=row layout-align=space-between><!--Title--><div><h1 class=md-display-4>TECHSAS</h1><h3 class=md-headline>{{"pages.welcome.techsas.subtitle" | translate}}</h3></div><!--Message--><div layout=row class=info><i class=material-icons>info</i><p class=md-subhead>{{"pages.welcome.info" | translate}} <a href=mailto:techsas@ifremer.fr>techsas@ifremer.fr</a></p></div></div><!-- Cards --><div flex layout=row layout-align="space-around center"><md-card ui-sref=dashboard layout=column><md-card-title><md-card-title-text><span class=md-headline>{{"pages.welcome.dashboard.title" | translate}}</span> <span class=md-subhead>{{"pages.welcome.dashboard.subtitle" | translate}}</span></md-card-title-text></md-card-title><md-card-content layout=row layout-align="center center"><i class=material-icons>dashboard</i></md-card-content></md-card><md-card ui-sref=dataAccess ng-if=ctrl.showExtraction><md-card-title><md-card-title-text><span class=md-headline>{{"pages.welcome.data-access.title" | translate}}</span> <span class=md-subhead>{{"pages.welcome.data-access.subtitle" | translate}}</span></md-card-title-text></md-card-title><md-card-content layout=row layout-align="center center"><i class=material-icons>file_download</i></md-card-content></md-card><md-card ui-sref=acquisition><md-card-title><md-card-title-text><span class=md-headline>{{"pages.welcome.acquisition.title" | translate}}</span> <span class=md-subhead>{{"pages.welcome.acquisition.subtitle" | translate}}</span></md-card-title-text></md-card-title><md-card-content layout=row layout-align="center center"><i class=material-icons>settings_input_component</i></md-card-content></md-card></div></div></div>'),e.put("app/tsa-views/adcp/adcp.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.adcp.icon\' | translate }}"></i><p class=title>{{"views.adcp.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=row class=tsa-content ng-class="{\'data-missing\': ctrl.dataMissing}"><div flex=50 layout=column class=starboard><p class=md-headline>{{ "views.adcp.north-south.title" | translate }}</p><div flex class=tsa-chart-container><canvas id={{ctrl.canvasId1}}></canvas></div></div><div flex=50 layout=column class=port><p class=md-headline>{{ "views.adcp.east-west.title" | translate }}</p><div flex class=tsa-chart-container><canvas id={{ctrl.canvasId2}}></canvas></div></div></div><div flex=1 layout=row ng-style="{ color: ctrl.dateColor }">{{ ctrl.dateContent | date: "dd/MM/yy HH:mm:ss" : "UTC" }}</div></div>'),e.put("app/tsa-views/atpropulsion/atpropulsion.html",'<meta charset=utf-8><div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.propulsion.icon\' | translate }}"></i><p class=title>{{"views.propulsion.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column class=tsa-content><div class=canvas flex layout=column><canvas flex id={{ctrl.canvasId}}><p>Error during the display of the canvas (maybe due to the browser version)</p></canvas><!-- Data views --><tsa-data-view id=fronttrans data=ctrl.frontTrans.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units="" ng-style="{top:ctrl.frontTrans.y + \'px\', left: ctrl.frontTrans.x + \'px\'};"></tsa-data-view><!--\n            <tsa-data-view\n            \tid="reartrans"\n                data=ctrl.rearTrans.id\n                frame-id=ctrl.frameId\n                device-id=ctrl.deviceId\n                format="%.0f"\n                title-disabled="true"\n                units=""\n                ng-style="{top:ctrl.rearTrans.y + \'px\', left: ctrl.rearTrans.x + \'px\'};">\n            </tsa-data-view>\n--><tsa-data-view id=mainLeft data=ctrl.mainLeft.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=rpm ng-style="{top:ctrl.mainLeft.y + \'px\', left: ctrl.mainLeft.x + \'px\'};"></tsa-data-view><tsa-data-view id=angle data=ctrl.angle.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=° redgreen=true ng-style="{top:ctrl.angle.y + \'px\', left: ctrl.angle.x + \'px\'};"></tsa-data-view><span id=greendummy1 hidden>Green dummy 1</span></div></div></div>'),e.put("app/tsa-views/attitude/attitude.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.attitude.icon\' | translate }}"></i><p class=title>{{"views.attitude.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=row class=tsa-content><div flex=50 layout=column><tsa-data-view data=ctrl.heading frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.attitude.heading format=%.1f units=°></tsa-data-view><tsa-data-view data=ctrl.roll frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.attitude.roll format=%.1f units=°></tsa-data-view><tsa-data-view data=ctrl.pitch frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.attitude.pitch format=%.1f units=°></tsa-data-view><tsa-data-view data=ctrl.heave frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.attitude.heave format=%.1f units=m></tsa-data-view></div><md-divider></md-divider><div flex=50 layout=column><span class=column-span></span><tsa-data-view opt-value=ctrl.list opt-title=views.attitude.list format=%.1f units=°></tsa-data-view><tsa-data-view opt-value=ctrl.trim opt-title=views.attitude.trim format=%.1f units=°></tsa-data-view></div></div></div>'),e.put("app/tsa-views/casino/casino.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.casino.icon\' | translate }}"></i><p class=title>{{"views.casino.title" | translate }}</p><p class=device-id ng-show=ctrl.selectedCruise>- {{ctrl.selectedCruise.FullName}}</p><span flex></span><!-- Loading icon --><div ng-if=ctrl.casinoLoading layout=column layout-align="center center" style="width: 40px"><md-tooltip>{{"archive-loading" | translate }}</md-tooltip><md-progress-circular md-diameter=20px></md-progress-circular></div><!-- Period choice--><md-input-container ng-if="ctrl.selectedCruise && !ctrl.casinoErrorConnect && !ctrl.casinoErrorLoad"><md-select ng-model=ctrl.period ng-change=ctrl.refreshCruise(false)><md-option value=0>{{ctrl.config.limit}} {{"views.casino.period-list.0" | translate }}</md-option><md-option value=6>{{"views.casino.period-list.6" | translate }}</md-option><md-option value=24>{{"views.casino.period-list.24" | translate }}</md-option><md-option value=168>{{"views.casino.period-list.168" | translate }}</md-option></md-select><md-tooltip>{{"Scale" | translate }}</md-tooltip></md-input-container><!-- Refresh cruise --><md-button class=md-icon-button ng-click=ctrl.refreshCruise(true) ng-if=ctrl.casinoErrorLoad><i class="mdi mdi-24px mdi-{{\'views.casino.refresh.icon\' | translate }}"></i><md-tooltip>{{"views.casino.refresh.label" | translate }}</md-tooltip></md-button><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex class=tsa-content layout=column><!-- ERROR Content --><div ng-if=ctrl.casinoErrorConnect><br><div>{{"views.casino.connection.error" | translate }}</div><br><md-button class="md-raised md-primary" ng-click=ctrl.casinoConnection() ng-disabled=ctrl.casinoCanConnect()>{{"views.casino.connection.button" | translate }}</md-button></div><div ng-if=ctrl.casinoErrorLoad><br><div>{{"views.casino.connection.loaderror" | translate }}</div></div><!-- Events table --><div flex layout=column class=tsa-table ng-if="ctrl.selectedCruise && !ctrl.casinoErrorConnect && !ctrl.casinoErrorLoad"><div layout=row class="title tsa-table-title"><p flex ng-repeat="column in ctrl.config.eventsDisplayColumns">{{"views.casino.event." + column | translate }}</p></div><div flex id=casino_event_array class=tsa-table-content><div flex layout=row ng-repeat="eventDisplay in ctrl.eventsListToDisplay"><p flex ng-repeat="columnDisplay in ctrl.config.eventsDisplayColumns"><span ng-switch=columnDisplay><span ng-switch-when=Date>{{eventDisplay[columnDisplay] | date:\'yyyy-MM-dd HH:mm:ss\'}}</span> <span ng-switch-when=Latitude>{{eventDisplay[columnDisplay] | number:2}}</span> <span ng-switch-when=Longitude>{{eventDisplay[columnDisplay] | number:2}}</span> <span ng-switch-default="">{{eventDisplay[columnDisplay]}}</span></span></p></div></div></div></div></div>'),e.put("app/tsa-views/casino/casinoAddEvent.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.casino.add-event.icon\' | translate }}"></i><p class=title>{{"views.casino.add-event.title" | translate }}</p><p class=device-id ng-if=!ctrl.isFollow>- {{"views.casino.add-event.subtitle" | translate}}</p><p class=device-id ng-if=ctrl.isFollow>- {{"views.casino.add-event.follow-subtitle" | translate}} {{ctrl.operationId.getStringOperationId()}}</p><span flex></span><!-- Loading icon --><div ng-if=ctrl.casinoLoading layout=column layout-align="center center" style="width: 40px"><md-tooltip>{{"archive-loading" | translate }}</md-tooltip><md-progress-circular md-diameter=20px></md-progress-circular></div><!-- Refresh cruise --><md-button class=md-icon-button ng-click=ctrl.refreshCruise(true) ng-if=ctrl.casinoErrorLoad><i class="mdi mdi-24px mdi-{{\'views.casino.refresh.icon\' | translate }}"></i><md-tooltip>{{"views.casino.refresh.label" | translate }}</md-tooltip></md-button><!-- Reset Form --><md-button class=md-icon-button ng-click=ctrl.onResetClick() ng-if="!ctrl.casinoErrorConnect && !ctrl.casinoErrorLoad"><i class="mdi mdi-24px mdi-{{\'views.casino.add-event.reset.icon\' | translate }}"></i><md-tooltip>{{"views.casino.add-event.reset.label" | translate}}</md-tooltip></md-button><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}} valid-close-title={{ctrl.validExitTitle}} valid-close-msg={{ctrl.validExitMsg}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column class=tsa-content><!-- ERROR Content --><div ng-if=ctrl.casinoErrorConnect><br><div>{{"views.casino.connection.error" | translate }}</div><br><md-button class="md-raised md-primary" ng-click=ctrl.casinoConnection() ng-disabled=ctrl.casinoCanConnect()>{{"views.casino.connection.button" | translate }}</md-button></div><div ng-if=ctrl.casinoErrorLoad><br><div>{{"views.casino.connection.loaderror" | translate }}</div></div><div ng-if=ctrl.error style=color:red><br><div>ERROR: {{ctrl.error.message}}</div><br></div><!-- FORM CONTENT --><form name=casinoEventForm flex layout=column layout-align="space-between stretch" ng-if="!ctrl.casinoErrorConnect && !ctrl.casinoErrorLoad"><div flex layout=row class=form-group><!-- Current Cruise --><md-input-container flex><label>{{"views.casino.cruises.title" | translate }}</label><input type=text ng-model=ctrl.selectedCruise.FullName readonly></md-input-container><md-button class=md-icon-button ng-click=ctrl.refreshCruise(true) ng-if=ctrl.error style=color:red flex=10><i class="mdi mdi-24px mdi-{{\'views.casino.refresh.icon\' | translate }}"></i><md-tooltip>{{"views.casino.refresh.label" | translate }}</md-tooltip></md-button><!-- Select Type --><md-input-container flex=50><label>{{"views.casino.event.Type" | translate }}</label><md-select class=form-control required ng-model=ctrl.casinoEvent.type ng-disabled=ctrl.isFollow><md-option ng-value=eventType ng-repeat="eventType in ctrl.eventTypeEnum">{{"views.casino.event-type."+eventType | translate }}</md-option></md-select></md-input-container></div><!-- PHASE content --><div flex layout=row ng-if="ctrl.casinoEvent.type && ctrl.casinoEvent.type === \'PHA\'"><!-- Select Phase Type --><md-input-container flex=50><label>{{"views.casino.event.PhaseType" | translate }}</label><md-select class=form-control required ng-model=ctrl.casinoEvent.phaseType><md-option ng-value=phaseType ng-repeat="phaseType in ctrl.phaseTypeEnum">{{"views.casino.event-phase."+phaseType | translate }}</md-option></md-select></md-input-container><!-- Phase Name --><md-input-container flex=50><label>{{"views.casino.event.PhaseFullName" | translate }}</label><input type=text ng-model=ctrl.casinoEvent.phaseFullName></md-input-container></div><!-- OPERATION content --><div flex layout=row ng-if="ctrl.casinoEvent.type && ctrl.casinoEvent.type === \'OPE\'"><tsa-code-name-fields flex=50 item-type=device list-items=ctrl.listCasinoDevices item-code=ctrl.casinoEvent.deviceCode on-item-change=ctrl.updateDevice($item) item-readonly=ctrl.isFollow item-follow=false></tsa-code-name-fields><tsa-code-name-fields flex=50 item-type=action list-items=ctrl.listDeviceActions item-code=ctrl.casinoEvent.actionCode on-item-change=ctrl.updateAction($item) item-readonly=false item-follow=ctrl.isFollow></tsa-code-name-fields></div><!-- Operation Label --><div flex layout=row ng-if="ctrl.casinoEvent.type && ctrl.casinoEvent.type === \'OPE\'"><md-input-container flex=30><label>{{"views.casino.event.OperationId" | translate }}</label><input type=text ng-model=ctrl.operationId.prefix disabled></md-input-container><md-input-container flex=50><label>{{"views.casino.add-event.operation.custom" | translate }}</label><input type=text ng-model=ctrl.operationId.custom ng-disabled=ctrl.isFollow></md-input-container><md-input-container flex=20><label>{{"views.casino.add-event.operation.number" | translate }}</label><input type=number required ng-model=ctrl.operationId.number ng-disabled=ctrl.isFollow></md-input-container></div><!-- commun to OPE and OBS : Strate and Station Number (halieutic) --><div flex layout=row ng-if="ctrl.casinoEvent.type && ctrl.casinoEvent.type != \'PHA\'"><!-- Station Number --><md-input-container flex=50><label>{{"views.casino.event.Field1" | translate }}</label><input type=text ng-model=ctrl.casinoEvent.field1></md-input-container><!-- Strate --><md-input-container flex=50><label>{{"views.casino.event.Field2" | translate }}</label><input type=text ng-model=ctrl.casinoEvent.field2></md-input-container></div><!-- common content --><div flex layout=row><!-- Observations --><md-input-container flex=100><label>{{"views.casino.event.Observation" | translate }}</label><input type=text ng-model=ctrl.casinoEvent.observation ng-value=ctrl.casinoEvent.observation md-maxlength=255></md-input-container></div><!-- submit form --><md-button class="md-raised md-primary" ng-disabled="casinoEventForm.$invalid || ctrl.error" ng-click=ctrl.onSubmit()>{{"views.casino.add-event.submit" | translate }}</md-button></form></div></div>'),
e.put("app/tsa-views/debug/debug.html",'<div layout=column ng-switch=ctrl.view><!-- Nav bar --><md-nav-bar md-selected-nav-item=ctrl.view class=tsa-debug><md-nav-item md-nav-click="ctrl.view=\'Devices\'" name=Devices>Devices</md-nav-item><md-nav-item md-nav-click="ctrl.view=\'Topics\'" name=Topics>Topics</md-nav-item><md-nav-item md-nav-click="ctrl.view=\'Topic\'" name=Topic>Topic</md-nav-item><md-nav-item md-nav-click="ctrl.view=\'Buffers\'" name=Buffers>Buffers</md-nav-item><md-nav-item md-nav-click="ctrl.view=\'REST\'" name=REST>REST</md-nav-item><span flex></span><tsa-settings-button class=tsa-debug on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></md-nav-bar><!-- DEVICES tab --><div ng-switch-when=Devices flex layout=column><!--Device list title and legends --><div class=tsa-debug-title-bar layout=row layout-align="space-around center"><div layout=row layout-align="center center"><md-icon style="color: #F44336">highlight_off<md-tooltip>Device missing from the configuration messages.</md-tooltip></md-icon><md-icon style="color: #8BC34A">check_circle<md-tooltip>Device enabled.</md-tooltip></md-icon><md-subheader>status</md-subheader></div><div layout=row layout-align="center center"><md-subheader>data listeners</md-subheader></div></div><md-divider></md-divider><!--Device list --><md-content><md-list flex style="padding: 0px"><md-list-item class=md-2-line ng-repeat="device in ctrl.deviceList" ng-click=null style="padding: 0px" layout-align="center center"><div style="padding: 15px"><md-icon ng-show=!device.isEnabled style="color: #F44336">highlight_off</md-icon><md-icon ng-show=device.isEnabled style="color: #8BC34A">check_circle</md-icon></div><div flex=50 class=md-list-item-text><h3>{{device.name}}</h3><p>{{device.id}}</p></div><div flex=50 layout=row><p>Device: {{ device.listenerCount }} / Frame: {{ device.frameListenerList.length }} / Data: {{ device.dataListenerList.length }}</p></div><span flex=5></span><md-divider></md-divider></md-list-item></md-list></md-content></div><!--TOPICS tab --><div ng-switch-when=Topics layout=column><div layout=column><!--STOMP connection status --><div layout=row class=tsa-debug-title-bar layout-align="center center" ng-style=" ctrl.stompService.isConnected() ? {\'background-color\': \' rgba(139, 195, 74,0.2)\'}: {\'background-color\': \'rgba(244, 67, 54,0.2)\'} "><h3 class=md-headline ng-show=ctrl.stompService.isConnected() style="color: #8BC34A">Connection enabled</h3><h3 class=md-headline ng-show=!ctrl.stompService.isConnected() style="color: #F44336">Connection disabled</h3><div style="margin-left: 10px" layout=row layout-align="center center"><md-button class="md-raised md-primary" ng-show=!ctrl.stompService.isConnected() ng-click=ctrl.startStompService()>Start</md-button><md-button class="md-raised md-primary" ng-show=ctrl.stompService.isConnected() ng-click=ctrl.stopStompService()>Stop</md-button></div></div><md-divider></md-divider><!-- Titles --><div layout=row class=tsa-debug-title-bar><md-subheader flex>Topics managed by the STOMP service.</md-subheader><div layout=row layout-align="center center"><md-icon style="color: #757575">share</md-icon><md-subheader style="padding-right: 20px">topic\'s listeners</md-subheader></div></div><md-divider></md-divider><!--Topic list --><md-content flex><div ng-repeat="topic in ctrl.topicList" layout=column><div layout=row layout-align="center center"><p flex style="margin-left: 20px">{{topic.id}}</p><div layout=row style="margin-right: 20px"><p>{{topic.listeners.length}}</p><md-icon style="color: #757575">share</md-icon></div></div><md-divider></md-divider></div></md-content></div></div><!--TOPIC --><md-content ng-switch-when=Topic flex layout=column><md-content md-whiteframe=3 layout=row layout-align="start center" style="padding: 10px"><md-input-container class=md-block><input ng-model=ctrl.topic placeholder=Topic ng-disabled="ctrl.currentTopic !== undefined"><md-tooltip>Will be automatically prefixed by \'/topic/\'.</md-tooltip></md-input-container><md-button class="md-raised md-primary" ng-show="ctrl.currentTopic === undefined" ng-click=ctrl.connectToTopic()>Connect</md-button><md-button class="md-raised md-primary" ng-show="ctrl.currentTopic !== undefined" ng-click=ctrl.disconnectTopic()>Disconnect</md-button><md-button class="md-raised md-primary" ng-click=ctrl.clearTopicConsole()>Clear</md-button></md-content><md-input-container flex layout=column style="margin-top: 0px; margin-bottom: 0px"><textarea flex ng-model=ctrl.topicConsole md-no-autogrow md-no-resize readonly></textarea></md-input-container></md-content><!--BUFFER tab --><md-content ng-switch-when=Buffers layout=column><!-- Title --><div layout=row class=tsa-debug-title-bar><md-subheader flex>Buffers managed by the acquisitionBufffer service.</md-subheader><div layout=row layout-align="center center"><md-icon style="color: #757575">share</md-icon><md-subheader style="padding-right: 20px">components using the buffers</md-subheader></div></div><md-divider></md-divider><!--Buffer list --><md-content><div layout=column ng-repeat="data in ctrl.bufferDeviceList"><div layout=row layout-align="space-around center"><h3 class=md-headline>{{data.dataId}}</h3><p>{{data.device.id}} - {{data.frameId}}</p><div layout=row><p>{{ data.listenerCount }}</p><md-icon>share</md-icon></div></div><md-divider></md-divider></div></md-content></md-content><!--REST REQUEST tab --><div ng-switch-when=REST layout=column><!-- Title --><div layout=row class=tsa-debug-title-bar><md-subheader flex>REST requests managed by the rest service. Request in progress:</md-subheader></div><md-divider></md-divider><!--Buffer list --><div ng-show=ctrl.restService.getCurrentRequest() layout=column layout-align="space-around center" style="background: #1a75ae;color: white; min-height: 65px"><h3 class=md-subhead style="margin-bottom: 0">{{ctrl.restService.getCurrentRequest().name}} [#{{ctrl.restService.getCurrentRequest().id}}]</h3><p class=md-body-1>{{ctrl.restService.getCurrentRequest().description}}</p><md-progress-linear md-mode=indeterminate></md-progress-linear></div><div class=tsa-debug-title-bar ng-show="ctrl.requestStack.length > 0"><md-subheader flex>Pending requests:</md-subheader><md-divider></md-divider></div><md-content flex><div layout=column ng-repeat="request in ctrl.requestStack"><div layout=row layout-align="space-around center"><div flex=90 layout=column layout-align="space-around center"><h3 class=md-subhead>{{request.name}} [#{{request.id}}]</h3><p class=md-body-1>{{request.description}}</p></div><md-button flex=10 class="md-raised md-warn" ng-click=ctrl.cancelRequest(request)>cancel</md-button></div><md-divider></md-divider></div></md-content></div></div>'),e.put("app/tsa-views/depth/depth.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.depth.icon\' | translate }}"></i><p class=title>{{"views.depth.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><!-- Loading icon --><div ng-if="ctrl.bufferLoading[ctrl.selectedScale] > 0" layout=column layout-align="center center" style="width: 40px"><md-tooltip>{{"archive-loading" | translate }}</md-tooltip><md-progress-circular md-diameter=20px></md-progress-circular></div><!-- Scale X --><md-input-container><md-select ng-model=ctrl.selectedScale ng-change=ctrl.onChangeXScale()><md-option ng-repeat="(name, value) in ctrl.scales" value={{name}}>{{name}}</md-option></md-select><md-tooltip>{{"Graphic scale" | translate }}</md-tooltip></md-input-container><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex class=tsa-content layout=column><tsa-data-view data=ctrl.dataId opt-title=views.depth.title frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f></tsa-data-view><!-- Chart --><div flex class=tsa-chart-container><canvas id={{ctrl.canvasId}}></canvas></div></div></div>'),e.put("app/tsa-views/devices/devices.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.devices.icon\' | translate }}"></i><p class=title>{{"views.devices.title" | translate }}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><md-grid-list flex md-cols=4 md-row-height=60px md-gutter=8px><md-grid-tile ng-repeat="item in ctrl.itemList" md-whiteframe=1 ng-class="item.isReceivingJSON ? \'ok\': \'data-missing\'"><md-icon ng-if=item.isReceivingJSON>check_circle</md-icon><md-icon ng-if=!item.isReceivingJSON>highlight_off</md-icon><div flex layout=column layout-align=space-around><h2 class="title md-headline">{{item.device.name}}</h2><p class="subtitle md-subhead">{{item.device.id}}</p></div></md-grid-tile></md-grid-list></div>'),e.put("app/tsa-views/driverPreview/driverPreview.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><md-icon class=material-icons>developer_mode</md-icon><p class=title>{{ctrl.title}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><form name=driverForm class=tsa-content><div layout=row><md-input-container flex=20><label>Id</label><input required name=ctrl.driver.configuration.id ng-model=ctrl.driver.configuration.id><div ng-messages=driverForm.driverName.$error><div ng-message=required>This is required.</div></div></md-input-container><md-input-container flex=20><label>Header</label><input required name=ctrl.driver.configuration.header ng-model=ctrl.driver.configuration.header><div ng-messages=driverForm.driverHeader.$error><div ng-message=required>This is required.</div></div></md-input-container><!-- Driver selection --><md-input-container flex=60><label>Driver</label><md-select name=driver ng-model=ctrl.driver.configuration.driverClassName required><md-option ng-repeat="driver in ctrl.driverList" value={{driver}}>{{driver.split(\'.\').pop()}}</md-option></md-select><div class=errors ng-messages=driverForm.driver.$error><div ng-message=required>Required</div></div></md-input-container></div><!-- Message --><md-input-container class=md-block><label>Message</label><textarea ng-model=ctrl.driver.message md-maxlength=150 rows=2 md-select-on-focus></textarea></md-input-container><md-list><md-list-item><p flex=20>Field number</p><p flex=40>Data name</p><p flex=30>Result</p><div flex=10><md-button class=md-icon-button ng-click=ctrl.addField()><md-icon>add</md-icon></md-button></div></md-list-item><md-divider></md-divider><md-list-item ng-repeat="field in ctrl.fieldList"><md-input-container flex=20><input ng-model=field.number placeholder="Field number"></md-input-container><md-input-container flex=40><input ng-model=field.name placeholder="Field name"></md-input-container><p flex=20>{{field.result}}</p><div flex=10><md-button class=md-icon-button ng-click=ctrl.result()><md-icon>gavel</md-icon></md-button></div><div flex=10><md-button class=md-icon-button ng-click=ctrl.removeField(field)><md-icon>remove</md-icon></md-button></div></md-list-item></md-list></form></div>'),e.put("app/tsa-views/ef-aum/ef-aum.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.pefaum.icon\' | translate }}"></i><p class=title>{{"views.pefaum.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Data views --><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.TURBIDITYL frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=FTU opt-title=views.pefaum.turbidityL></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.TURBIDITYH frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=FTU opt-title=views.pefaum.turbidityH></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.OBSL frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=FTU opt-title=views.pefaum.obsL></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.OBSH frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=FTU opt-title=views.pefaum.obsH></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.CHLOROPHYLL frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=µg/l opt-title=views.pefaum.chlorophyll></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.BLUEALGAE frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=µg/l opt-title=views.pefaum.bluealgae></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.CDOM frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=µg/l opt-title=views.pefaum.cdom></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.PH frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units="" opt-title=views.pefaum.ph></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.FLUORESCENCE frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=µg/l opt-title=views.pefaum.fluorescence></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.PCO2 frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=µAtm opt-title=views.pefaum.pco2></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFAUM.PAR frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=µmol/S/m2 opt-title=views.pefaum.par></tsa-data-view></md-content></div>'),e.put("app/tsa-views/ef-met/ef-met.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.pefmet.icon\' | translate }}"></i><p class=title>{{"views.pefmet.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Data views --><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFMET.VELOCITY frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=m/s opt-title=views.pefmet.velocity></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFMET.GUST frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=m/s opt-title=views.pefmet.gust></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFMET.DIRECTION frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=° opt-title=views.pefmet.direction></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFMET.AIRTEMP frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=°C opt-title=views.pefmet.airtemp></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFMET.HUMIDITY frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=% opt-title=views.pefmet.humidity></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFMET.RADIATION frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=W/m2 opt-title=views.pefmet.radiation></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFMET.PRESSURE frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=hPa opt-title=views.pefmet.pressure></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFMET.WATERTEMP frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=°C opt-title=views.pefmet.watertemp></tsa-data-view></md-content></div>'),e.put("app/tsa-views/ef-pos/ef-pos.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.pefpos.icon\' | translate }}"></i><p class=title>{{"views.pefpos.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Data views --><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFPOS.LATITUDE frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=° opt-title=views.pefpos.latitude></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFPOS.LONGITUDE frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=° opt-title=views.pefpos.longitude></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFPOS.HEADING frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=° opt-title=views.pefpos.heading></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFPOS.SPEED frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=kn opt-title=views.pefpos.speed></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFPOS.DEPTH frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=m opt-title=views.pefpos.depth></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFPOS.COG frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=° opt-title=views.pefpos.cog></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFPOS.SOG frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=kn opt-title=views.pefpos.sog></tsa-data-view></md-content></div>'),e.put("app/tsa-views/ef-tss/ef-tss.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.peftss.icon\' | translate }}"></i><p class=title>{{"views.peftss.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Data views --><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFTSS.SALINITY frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=°C opt-title=views.peftss.watertemp></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFTSS.WATERTEMP frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=psu opt-title=views.peftss.salinity></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFTSS.FLUO frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=kg/m3 opt-title=views.peftss.sigmat></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFTSS.CONDUCT frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=S/m opt-title=views.peftss.conduct></tsa-data-view></md-content><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.PEFTSS.SIGMAT frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=V opt-title=views.peftss.fluo></tsa-data-view></md-content></div>'),e.put("app/tsa-views/ephemeride/ephemeride.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.ephemeride.icon\' | translate }}"></i><p class=title>{{"views.ephemeride.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column class=tsa-content layout-align="center center"><div layout=row><md-button class=md-raised ng-click=ctrl.prevDay()><i class="mdi mdi-24px mdi-arrow-left-bold"></i></md-button><md-grid-list md-cols=2 md-gutter=1em md-row-height=fit style="width: 800px; height: 400px"><md-grid-tile md-colspan=2><h2 class=md-headline>{{ctrl.day | translate}} {{ctrl.nbDate}} {{ctrl.month | translate}} {{ctrl.year}}</h2><br><p class="subtitle md-subhead"><i>{{ctrl.saint}}</i></p></md-grid-tile><md-grid-tile md-colspan=1><p class=md-headline>{{"views.ephemeride.sunrise" | translate}}: {{ctrl.times.sunrise | date: "HH:mm" : ctrl.timeOffset}} {{ctrl.timeLabel}}</p></md-grid-tile><md-grid-tile md-colspan=1><p class=md-headline>{{"views.ephemeride.sunset" | translate}}: {{ctrl.times.sunset | date: "HH:mm" : ctrl.timeOffset}} {{ctrl.timeLabel}}</p></md-grid-tile><md-grid-tile md-colspan=1><p class=md-headline>{{"views.ephemeride.moon" | translate}}:</p></md-grid-tile><md-grid-tile md-colspan=1><img ng-src=resources/images/icons/moon/{{ctrl.moonImage}} alt="Moon phase"></md-grid-tile></md-grid-list><md-button class=md-raised ng-click=ctrl.nextDay()><i class="mdi mdi-24px mdi-arrow-right-bold"></i></md-button></div></div></div>'),e.put("app/tsa-views/ferryboxFluo/ferryboxFluo.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.ferrybox-fluo.icon\' | translate }}"></i><p class=title>{{"views.ferrybox-fluo.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><!-- Loading icon --><div ng-if="ctrl.bufferLoading[ctrl.selectedScale] > 0" layout=column layout-align="center center" style="width: 40px"><md-tooltip>{{"archive-loading" | translate }}</md-tooltip><md-progress-circular md-diameter=20px></md-progress-circular></div><!-- Scale X --><md-input-container><md-select ng-model=ctrl.selectedScale ng-change=ctrl.onChangeXScale()><md-option ng-repeat="(name, value) in ctrl.scales" value={{name}}>{{name}}</md-option></md-select><md-tooltip>{{"Graphic scale" | translate }}</md-tooltip></md-input-container><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex class=tsa-content layout=row><!-- Chart --><div flex=60 class=tsa-chart-container><canvas id={{ctrl.canvasId}}></canvas></div><md-divider></md-divider><!-- Data views --><div flex=40 layout=column><div layout=row ng-repeat="data in ctrl.dataList" class={{data.cssClass}}><md-checkbox ng-checked=data.showInChart ng-click=ctrl.showInChart(data)></md-checkbox><tsa-data-view data=data.id frame-id=ctrl.frameId device-id=ctrl.deviceId units="eq. µg/L"></tsa-data-view></div></div></div></div>'),e.put("app/tsa-views/ferryboxScience/ferryboxScience.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.ferrybox-science.icon\' | translate }}"></i><p class=title>{{"views.ferrybox-science.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=row class=tsa-content><div flex=50 layout=column><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.QUALITY frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.SBE45_SEA_TEMP frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.SBE45_COND frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.SBE45_SAL frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.SBE45_SOUND_VEL frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.OPTODE_OXYGEN frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.OPTODE_SATURATION frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view></div><md-divider></md-divider><div flex=50 layout=column><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.SEA_POINT_TURB frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.AOA_GREEN_ALGAE frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.AOA_BLUE_ALGAE frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.AOA_DIATOMS frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.AOA_CRYPTOPHYTA frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.AOA_YELLOW_SUB frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.AOA_TOTAL_ALGAE frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view></div></div></div>'),e.put("app/tsa-views/ferryboxTechnic/ferryboxTechnic.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.ferrybox-technic.icon\' | translate }}"></i><p class=title>{{"views.ferrybox-technic.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content  --><div flex layout=row class=tsa-content><div flex=50 layout=column><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.QUALITY frame-id=ctrl.frameId device-id=ctrl.deviceId format=qualityFbx></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.FLOW_IN frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.FLOW_MAIN frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.FLOW_PCO2 frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.FLOW_BYPASS_2 frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.FLOW_AOA frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.PRESSURE frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.FB_PH_VALUE frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view></div><md-divider></md-divider><div flex=50 layout=column><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.FB_AIR_TEMP frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_SCIENCE.SBE45_SEA_TEMP frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.OPTODE_SEA_TEMP frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.AOA_SEA_TEMP frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.FB_PH_SEA_TEMP frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.FULL frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view data=ctrl.FERRYBOX_TECHNIC.HALFFULL frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view></div></div></div>'),e.put("app/tsa-views/flow/flow.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.flow.icon\' | translate }}"></i><p class=title>{{"views.flow.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Data views --><md-content flex layout=column layout-align="center center" class=tsa-content><tsa-data-view data=ctrl.FLOW.DATA frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=l/min opt-title=views.flow.data></tsa-data-view></md-content></div>'),e.put("app/tsa-views/funesWinch/funesWinch.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.funes-winch.icon\' | translate }}"></i><p class=title>{{"views.funes-winch.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><!-- Loading icon --><div ng-if="ctrl.bufferLoading[ctrl.selectedScale] > 0" layout=column layout-align="center center" style="width: 40px"><md-tooltip>{{"archive-loading" | translate }}</md-tooltip><md-progress-circular md-diameter=20px></md-progress-circular></div><!-- Scale X --><md-input-container><md-select ng-model=ctrl.selectedScale ng-change=ctrl.onChangeXScale()><md-option ng-repeat="(name, value) in ctrl.scales" value={{name}}>{{name}}</md-option></md-select><md-tooltip>{{"Graphic scale" | translate }}</md-tooltip></md-input-container><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=row class=tsa-content><div flex=50 layout=column class=port><p class=md-headline>{{ "views.funes-winch.port" | translate | uppercase }}</p><tsa-data-view data=ctrl.portLength frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.funes-winch.length></tsa-data-view><tsa-data-view data=ctrl.portSpeed frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.funes-winch.speed></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.portTension frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.funes-winch.tension></tsa-data-view><div flex class=tsa-chart-container><canvas id={{ctrl.canvasId2}}></canvas></div></div><div flex=50 layout=column class=starboard><p class=md-headline>{{ "views.funes-winch.starboard" | translate | uppercase }}</p><tsa-data-view data=ctrl.starboardLength frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.funes-winch.length></tsa-data-view><tsa-data-view data=ctrl.starboardSpeed frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.funes-winch.speed></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.starboardTension frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.funes-winch.tension></tsa-data-view><div flex class=tsa-chart-container><canvas id={{ctrl.canvasId1}}></canvas></div></div></div></div>'),
e.put("app/tsa-views/generic/generic.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{ctrl.config.icon}}"></i><p class=title>{{ctrl.config.title}}</p><p class=device-id ng-show="ctrl.config.deviceId != undefined">- {{ctrl.config.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Data views --><md-content flex layout=column layout-align="start center" class=tsa-content><tsa-data-view ng-repeat="data in ctrl.config.dataList" data=data.dataId frame-id=data.frameId device-id=data.deviceId opt-title={{data.name}} format={{data.format}} units={{data.units}}></tsa-data-view></md-content></div>'),e.put("app/tsa-views/gps/gps.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.gps.icon\' | translate }}"></i><p class=title>{{"views.gps.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div layout=column class=tsa-content><tsa-data-view data=ctrl.latitude frame-id=ctrl.framePosition device-id=ctrl.deviceId opt-title=views.gps.latitude format=coordinate></tsa-data-view><tsa-data-view data=ctrl.longitude frame-id=ctrl.framePosition device-id=ctrl.deviceId opt-title=views.gps.longitude format=coordinate></tsa-data-view><tsa-data-view data=ctrl.groundSpeed frame-id=ctrl.framePosition device-id=ctrl.deviceId opt-title=views.gps.ground-speed></tsa-data-view><tsa-data-view data=ctrl.groundCourse frame-id=ctrl.framePosition device-id=ctrl.deviceId opt-title=views.gps.ground-course></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.satNumber frame-id=ctrl.frameSatInfo device-id=ctrl.deviceId opt-title=views.gps.satellite-number></tsa-data-view><tsa-data-view data=ctrl.hdop frame-id=ctrl.frameSatInfo device-id=ctrl.deviceId opt-title=views.gps.hdop></tsa-data-view></div></div>'),e.put("app/tsa-views/graphics/graphics.html",'<md-content layout=column><!-- Title bar --><div layout=row class=tsa-toolbar><tsa-data-view flex=100 ng-hide="ctrl.frameDataId1 === undefined && ctrl.frameDataId2 !== undefined" data=ctrl.dataId1 frame-id=ctrl.frameId1 device-id=ctrl.deviceId1 opt-title={{ctrl.chartTitle1}} show-subtitle=true on-update-title=ctrl.updateTitle1Callback(title)></tsa-data-view><tsa-data-view flex=100 style="margin-left: 12px;color: {{ctrl.dataColor2}}" ng-show="ctrl.frameDataId2 !== undefined" data=ctrl.dataId2 frame-id=ctrl.frameId2 device-id=ctrl.deviceId2 opt-title={{ctrl.chartTitle2}} show-subtitle=true on-update-title=ctrl.updateTitle2Callback(title)></tsa-data-view><div layout=row><md-button class=md-icon-button ng-click="ctrl.showSettings = !ctrl.showSettings"><md-icon>edit</md-icon><md-tooltip>{{"Settings" | translate }}</md-tooltip></md-button><tsa-settings-button card-id={{ctrl.cardId}} on-change-view="ctrl.onChangeCardType({type: type})"></tsa-settings-button></div></div><!-- Chart --><div flex class=tsa-chart-container><div ng-if="ctrl.dataLoaders != 0" layout=row layout-align="center center" class=load-msg><md-progress-circular md-diameter=20px></md-progress-circular><p class=md-body-1>{{"archive-loading" | translate }}</p></div><canvas id={{ctrl.canvasId}}></canvas></div><!-- Settings --><md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-component-id=right md-is-open=ctrl.showSettings layout=column><md-toolbar class=md-primary><div class=md-toolbar-tools><h2><span>{{"Settings" | translate }}</span></h2><span flex></span><md-button class=md-icon-button aria-label=Favorite ng-click="ctrl.showSettings = !ctrl.showSettings"><i class=material-icons>close</i></md-button></div></md-toolbar><md-content flex><!-- Device - Data 1 --><div layout=row><md-input-container flex=35><label>{{"Device" | translate }} 1</label><md-select ng-model=ctrl.deviceId1 ng-change=ctrl.updateDataList1()><md-option ng-show=device.isEnabled value={{device.id}} ng-repeat="device in ctrl.deviceList | orderObjectBy:\'name\'">{{device.name}}</md-option></md-select></md-input-container><md-input-container flex=50><label>{{"Data" | translate }} 1</label><md-select ng-model=ctrl.frameDataId1 ng-change=ctrl.onChangeData1()><div ng-repeat="(frameName, frame) in ctrl.frameList1"><md-optgroup label={{frameName}}><md-option value={{frameName}}!{{data.name}} ng-repeat="data in frame | orderObjectBy:\'longName\'">{{data.longName}}</md-option></md-optgroup></div></md-select></md-input-container><div flex=15 layout=row layout-align="center center"><md-button style=margin:0 class=md-icon-button ng-click=ctrl.onClearData1()><md-icon class=material-icons>clear</md-icon><md-tooltip>Clear selection</md-tooltip></md-button></div></div><!-- Device - Data 2 --><div layout=row><md-input-container flex=35><label>{{"Device" | translate }} 2</label><md-select ng-model=ctrl.deviceId2 ng-change=ctrl.updateDataList2()><md-option ng-show=device.isEnabled value={{device.id}} ng-repeat="device in ctrl.deviceList | orderObjectBy:\'name\'">{{device.name}}</md-option></md-select></md-input-container><md-input-container flex=50><label>{{"Data" | translate }} 2</label><md-select ng-model=ctrl.frameDataId2 ng-change=ctrl.onChangeData2()><div ng-repeat="(frameName, frame) in ctrl.frameList2"><md-optgroup label={{frameName}}><md-option value={{frameName}}!{{data.name}} ng-repeat="data in frame | orderObjectBy:\'longName\'">{{data.longName}}</md-option></md-optgroup></div></md-select></md-input-container><div flex=15 layout=row layout-align="center center"><md-button style=margin:0 class=md-icon-button ng-click=ctrl.onClearData2()><md-icon class=material-icons>clear</md-icon><md-tooltip>Clear selection</md-tooltip></md-button></div></div><div layout=row><!-- Scale X --><md-input-container flex=50><label>{{"Scale" | translate }} X</label><md-select ng-model=ctrl.selectedScale ng-change=ctrl.onChangeXScale()><md-option ng-repeat="(name, value) in ctrl.scales" value={{name}}>{{name | translate }}</md-option></md-select></md-input-container><!-- Scale Y --><md-input-container flex=50><label>{{"Scale" | translate }} Y</label><md-select ng-model=ctrl.selectedYScaleMode md-on-close=ctrl.updateYAxesMode()><md-option ng-repeat="(name, value) in ctrl.YScaleModes" value={{value}}>{{value | translate }}</md-option></md-select></md-input-container></div><!-- Others settings --><div layout=row style="margin-top: 16px" layout-align="space-around center"><md-checkbox flex=40 ng-disabled="ctrl.frameDataId1 === undefined || ctrl.frameDataId2 === undefined" ng-model=ctrl.doubleYAxes ng-change=ctrl.updateChartOptions()>{{"views.graphics.2-y-axes" | translate }}</md-checkbox><md-checkbox flex=40 ng-model=ctrl.zeroOption ng-change=ctrl.updateChartOptions()>{{"views.graphics.zero-on" | translate }}</md-checkbox><md-checkbox flex=20 ng-model=ctrl.fill ng-change=ctrl.updateChartOptions()>{{"views.graphics.fill" | translate }}</md-checkbox></div><p>{{"views.graphics.y-axes-manual" | translate }}</p><div layout=row><md-button flex=33 class="md-raised md-primary" ng-disabled="ctrl.selectedYScaleMode != ctrl.YScaleModes.MANUAL" ng-click=ctrl.onZoomY()>Zoom +</md-button><md-button flex=33 class="md-raised md-primary" ng-disabled="ctrl.selectedYScaleMode != ctrl.YScaleModes.MANUAL" ng-click=ctrl.onZoomY(true)>Zoom -</md-button><md-button flex=33 class="md-raised md-primary" ng-disabled="ctrl.selectedYScaleMode != ctrl.YScaleModes.MANUAL" ng-click=ctrl.onCenterYAxes()>{{"views.graphics.center" | translate }}</md-button></div></md-content></md-sidenav></md-content>'),e.put("app/tsa-views/gravimeter/gravimeter.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.gravimeter.icon\' | translate }}"></i><p class=title>{{"views.gravimeter.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column class=tsa-content><tsa-data-view data=ctrl.GRAVIMETER.ACC_X frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.gravimeter.acc-X units=m/s²></tsa-data-view><tsa-data-view data=ctrl.GRAVIMETER.ACC_Y frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.gravimeter.acc-Y units=m/s²></tsa-data-view><tsa-data-view data=ctrl.GRAVIMETER.GRAVITY frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.gravimeter.gravity units=mgal></tsa-data-view><tsa-data-view data=ctrl.GRAVIMETER.SCALE frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.gravimeter.scale format=%.2f></tsa-data-view><tsa-data-view data=ctrl.GRAVIMETER.FILTER_ORDER frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.gravimeter.filter-order format=%.0f></tsa-data-view><tsa-data-view data=ctrl.GRAVIMETER.FILTER_TAU frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.gravimeter.filter-tau format=%.0f></tsa-data-view><tsa-data-view data=ctrl.GRAVIMETER.GPS_ON frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.gravimeter.gps format=%.0f></tsa-data-view><tsa-data-view data=ctrl.GRAVIMETER.STATUS frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.gravimeter.status format=%.0f></tsa-data-view></div></div>'),e.put("app/tsa-views/haulComposition/haulComposition.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.haul-composition.icon\' | translate }}"></i><p class=title>{{"views.haul-composition.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex class=tsa-content layout=column><div layout=row><tsa-data-view flex=33 data=ctrl.haul frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.haul-composition.haul></tsa-data-view><md-divider></md-divider><tsa-data-view flex=33 data=ctrl.pocket frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.haul-composition.pocket></tsa-data-view><md-divider></md-divider><tsa-data-view flex=33 data=ctrl.totalPocket frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.haul-composition.total-pocket></tsa-data-view></div><!-- Species table --><div flex layout=column class=tsa-table><div layout=row class="title tsa-table-title"><p flex=25>{{"views.haul-composition.species" | translate }}</p><p flex=25>{{"views.haul-composition.sign" | translate }}</p><p flex=25>{{"views.haul-composition.estimation" | translate }}</p><div flex=25 layout=row><p>{{"views.haul-composition.weight" | translate }}</p><span flex></span><p>Page {{ctrl.selectedPage}}/{{ctrl.pageArray.length}}</p></div></div><div flex id=array class=tsa-table-content><div flex layout=row ng-repeat="species in ctrl.speciesListToDisplay"><p flex=25>{{species.id}}</p><p flex=25>{{species.sign}}</p><p flex=25>{{species.estimation}}</p><p flex=25>{{species.weight}}</p></div></div></div><div layout=row class=pages layout-align=end><p class=md-body>Page :</p><md-button ng-repeat="page in ctrl.pageArray" class=page ng-class="{\'md-primary md-raised\': ctrl.selectedPage == page}" ng-click=ctrl.selectPage(page)>{{page}}</md-button><md-button ng-show=!ctrl.playEnabled class="play md-primary" ng-click="ctrl.playEnabled = !ctrl.playEnabled"><i class="mdi mdi-play-circle"></i> play</md-button><md-button ng-show=ctrl.playEnabled class="stop md-warn" ng-click="ctrl.playEnabled = !ctrl.playEnabled"><i class="mdi mdi-stop"></i> stop</md-button></div><div layout=row><tsa-data-view flex=50 data=ctrl.totalSortedSpecies frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.haul-composition.total-sorted></tsa-data-view><md-divider></md-divider><tsa-data-view flex=50 opt-value=ctrl.sortedPercentage opt-title=views.haul-composition.sorted-prc></tsa-data-view></div></div></div>'),e.put("app/tsa-views/hullSoundSpeed/hullSoundSpeed.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.hullsoundspeed.icon\' | translate }}"></i><p class=title>{{"views.hullsoundspeed.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><!-- Loading icon --><div ng-if="ctrl.bufferLoading[ctrl.selectedScale] > 0" layout=column layout-align="center center" style="width: 40px"><md-tooltip>{{"archive-loading" | translate }}</md-tooltip><md-progress-circular md-diameter=20px></md-progress-circular></div><!-- Scale X --><md-input-container><md-select ng-model=ctrl.selectedScale ng-change=ctrl.onChangeXScale()><md-option ng-repeat="(name, value) in ctrl.scales" value={{name}}>{{name}}</md-option></md-select><md-tooltip>{{"Graphic scale" | translate }}</md-tooltip></md-input-container><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Data views --><!-- Chart --><div flex class=tsa-content layout=column><tsa-data-view data=ctrl.HULLSOUNDSPEED.DATA frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=m/s opt-title=views.hullsoundspeed.data></tsa-data-view><div flex class=tsa-chart-container><canvas id={{ctrl.canvasId}}></canvas></div></div></div>'),e.put("app/tsa-views/kley-state/kley-state.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.kley-state.icon\' | translate }}"></i><p class=title>{{"views.kley-state.title" | translate }}</p><!-- <p class="device-id">- {{ctrl.deviceId}}</p> --> <span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=row layout-align=space-around class=tsa-content><!-- Data views --><div flex layout=column layout-align=space-around><tsa-data-view ng-repeat="data in ctrl.KLEY_STATE.datasLeft" data=data.id frame-id=ctrl.KLEY_STATE.frameId device-id=ctrl.deviceId opt-title={{data.name}} on-off=true></tsa-data-view></div><md-divider></md-divider><div flex=50 layout=column><tsa-data-view ng-repeat="data in ctrl.KLEY_STATE.datasRight" data=data.id frame-id=ctrl.KLEY_STATE.frameId device-id=ctrl.deviceId opt-title={{data.name}} format={{data.cFormat}}></tsa-data-view></div></div></div>'),e.put("app/tsa-views/kss31/kss31.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.gravimeter.icon\' | translate }}"></i><p class=title>{{"views.gravimeter.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column class=tsa-content><tsa-data-view data=ctrl.KSS31.ACC_X frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.kss31.acc-X units=m/s²></tsa-data-view><tsa-data-view data=ctrl.KSS31.ACC_Y frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.kss31.acc-Y units=m/s²></tsa-data-view><tsa-data-view data=ctrl.KSS31.GRAVITY frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.kss31.gravity units=mgal></tsa-data-view><tsa-data-view data=ctrl.KSS31.DATATION frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.kss31.datation></tsa-data-view><tsa-data-view data=ctrl.KSS31.SEASTATE frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.kss31.seastate></tsa-data-view><tsa-data-view data=ctrl.KSS31.EOETVOES frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.kss31.eoetvoes units=mgal></tsa-data-view><tsa-data-view data=ctrl.KSS31.BOUGUER frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.kss31.bouguer units=mgal></tsa-data-view><tsa-data-view data=ctrl.KSS31.FREEAIR frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.kss31.freeair units=mgal></tsa-data-view></div></div>'),e.put("app/tsa-views/landing-at/landing-at.html",'<meta charset=utf-8><div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.propulsion.icon\' | translate }}"></i><p class=title>{{"views.propulsion.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div class=tsa-content layout=row><div class=landingcols flex=25><!-- Wind data --><div layout=column><tsa-double-data-view class=true-wind title=views.weather.true-wind data1=ctrl.trueWindHeadingId frame-id1=ctrl.weatherFrame device-id1=ctrl.weatherDeviceId format1=%.0f data2=ctrl.trueWindSpeedId frame-id2=ctrl.weatherFrame device-id2=ctrl.weatherDeviceId format2=%.1f></tsa-double-data-view><tsa-double-data-view class=relative-wind title=views.weather.rel-wind data1=ctrl.relWindHeadingId frame-id1=ctrl.weatherFrame device-id1=ctrl.weatherDeviceId format1=%.0f data2=ctrl.relWindSpeedId frame-id2=ctrl.weatherFrame device-id2=ctrl.weatherDeviceId format2=%.1f></tsa-double-data-view><canvas flex id={{ctrl.windCanvasId}}><p>Error during the display of the canvas (maybe due to the browser version)</p></canvas></div></div><div class=landingcols flex=50><canvas id={{ctrl.propulsionCanvasId}} class=navcanvas><p>Error during the display of the canvas (maybe due to the browser version)</p></canvas><!-- Data views --><tsa-data-view class=propulsion id=fronttrans data=ctrl.frontTrans.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units="" ng-style="{top:ctrl.frontTrans.y + \'px\', left: ctrl.frontTrans.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=frontpropangle data=ctrl.frontPropAngle.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=° ng-style="{top:ctrl.frontPropAngle.y + \'px\', left: ctrl.frontPropAngle.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=mainleft data=ctrl.mainLeft.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=rpm abs=true ng-style="{top:ctrl.mainLeft.y + \'px\', left: ctrl.mainLeft.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=mainright data=ctrl.mainRight.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=rpm abs=true ng-style="{top:ctrl.mainRight.y + \'px\', left: ctrl.mainRight.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=angle data=ctrl.angle.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=° redgreen=true abs=true ng-style="{top:ctrl.angle.y + \'px\', left: ctrl.angle.x + \'px\'};"></tsa-data-view></div><div class=landingcols flex=25><div flex layout=column><h2 class=sub>{{"views.propulsion.heading" | translate }} :</h2><tsa-data-view class=navigation id=heading data=ctrl.heading.id frame-id=ctrl.navFrameId; device-id=ctrl.navId format=%.0f title-disabled=true units=°></tsa-data-view><h2 class=sub>{{"views.propulsion.surfspeed" | translate }} :</h2><div layout=row><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.surfNorth units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div></div><div layout=row><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.surfWest units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.surfEast units=nd format=%.1f title-disabled=true></tsa-data-view></div></div><div layout=row><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.surfSouth units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div></div><h2 class=sub>{{"views.propulsion.gndspeed" | translate }} :</h2><div layout=row><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.gndNorth units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div></div><div layout=row><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.gndWest units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.gndEast units=nd format=%.1f title-disabled=true></tsa-data-view></div></div><div layout=row><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.gndSouth units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div></div></div></div></div></div>'),e.put("app/tsa-views/magnetometer/magnetometer.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.magnetometer.icon\' | translate }}"></i><p class=title>{{"views.magnetometer.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column class=tsa-content layout-align="center center"><tsa-data-view data=ctrl.MAGNETOMETER.MAG frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.magnetometer.mag units=gamma format=%.3f></tsa-data-view><tsa-data-view data=ctrl.MAGNETOMETER.DEPTH frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.magnetometer.depth units=m format=%.2f></tsa-data-view></div></div>'),e.put("app/tsa-views/map/map.html",'<div layout=column style="height: 100%"><!-- Toolbar --><div layout=row layout-align="center center" class=tsa-toolbar flex=none><i ng-if=ctrl.isModeNavigation() class="mdi mdi-24px mdi-{{\'views.map.icon\' | translate }}"></i> <i ng-if=!ctrl.isModeNavigation() class="mdi mdi-24px mdi-{{\'views.station.icon\' | translate }}"></i><p ng-if=ctrl.isModeNavigation() class=title>{{"views.map.title" | translate }}</p><p ng-if=!ctrl.isModeNavigation() class=title>{{"views.station.title" | translate }}</p><p class=device-id>- {{ctrl.config.deviceId}}</p><span flex></span><md-input-container ng-if=!ctrl.isModeNavigation()><md-select ng-model=ctrl.stationViewScale ng-change=ctrl.onStationViewScaleChange()><md-option ng-repeat="scale in ctrl.stationViewScaleList" value={{scale}}>{{scale}}</md-option></md-select><md-tooltip>{{"Scale" | translate }}</md-tooltip></md-input-container><!-- LAYERS --><md-button class=md-icon-button ng-click=ctrl.toggleLayerMenu() ng-if=ctrl.trackingEnabled><md-icon ng-class="{enabled: ctrl.showLayerMenu}">layers</md-icon><md-tooltip>{{"views.map.layers" | translate }}</md-tooltip></md-button><md-menu md-position-mode="target-right target"><md-button class=md-icon-button ng-click=$mdOpenMenu($event)><i md-menu-origin class="mdi mdi-24px mdi-math-compass" ng-style="ctrl.currentMeasureTool !== \'Disabled\' ?{\'color\': \' #1a75ad\'}: {}"></i><md-tooltip>{{"views.map.measure-tool" | translate }}</md-tooltip></md-button><md-menu-content><md-menu-item><div layout=row layout-align="center center" style="padding-right: 0"><p flex>{{"views.map.measure-tool" | translate }}</p><md-button ng-click="" class=md-icon-button style="background-color: transparent !important"><md-icon md-menu-align-target style="margin: auto 3px auto 0">close</md-icon></md-button></div></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-click="ctrl.onMeasureToolChange(\'Free\')" ng-style="ctrl.currentMeasureTool === \'Free\' ?{\'color\': \' #1a75ad\'}: {}"><div layout=row flex><p flex>{{"views.map.free" | translate }}</p></div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.onMeasureToolChange(\'From boat\')" ng-style="ctrl.currentMeasureTool === \'From boat\' ?{\'color\': \' #1a75ad\'}: {}"><div layout=row flex><p flex>{{"views.map.from-boat" | translate }}</p></div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.onMeasureToolChange(\'Disabled\')" ng-style="ctrl.currentMeasureTool === \'Disabled\' ?{\'color\': \' #1a75ad\'}: {}"><div layout=row flex><p flex>{{"views.map.disabled" | translate }}</p></div></md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-click=ctrl.clearMeasures()><div layout=row flex><p flex>{{"views.map.clear-measure" | translate }}</p></div></md-button></md-menu-item></md-menu-content></md-menu><!-- Navigation mode buttons --><md-button class=md-icon-button ng-if=ctrl.isModeNavigation() ng-click=ctrl.showAIS()><md-icon ng-class="{enabled: ctrl.aisEnabled}">{{"views.mobile.icon" | translate }}</md-icon><md-tooltip>{{"views.map.show-ais" | translate }}</md-tooltip></md-button><md-button class=md-icon-button ng-if=ctrl.isModeNavigation() ng-click=ctrl.showRoute()><md-icon ng-class="{enabled: ctrl.routeEnabled}">trending_up</md-icon><md-tooltip>{{"views.map.show-route" | translate }}</md-tooltip></md-button><md-button class=md-icon-button ng-click=ctrl.showTrace()><md-icon ng-class="{enabled: ctrl.traceEnabled}">timeline</md-icon><md-tooltip>{{"views.map.show-trace" | translate }}</md-tooltip></md-button><md-button class=md-icon-button ng-if=ctrl.isModeNavigation() ng-click=ctrl.focusOnBoat()><md-icon ng-class="{enabled: ctrl.autoCenterEnabled}">center_focus_strong</md-icon><md-tooltip>{{"views.map.focus-on-boat" | translate }}</md-tooltip></md-button><md-button class=md-icon-button ng-if=ctrl.isModeNavigation() ng-click=ctrl.showGrid()><md-icon ng-class="{enabled: ctrl.gridEnabled}">grid_on</md-icon><md-tooltip>{{"views.map.grid-on" | translate }}</md-tooltip></md-button><md-button class=md-icon-button ng-if=ctrl.isModeNavigation() ng-click=ctrl.showMultibeam()><md-icon ng-class="{enabled: ctrl.multibeamEnabled}">clear_all</md-icon><md-tooltip>{{"views.map.draw-mb" | translate }}</md-tooltip></md-button><md-button class=md-icon-button ng-click=ctrl.showBottomBar()><md-icon ng-class="{enabled: ctrl.bottomBarEnabled}">info</md-icon><md-tooltip>{{"views.map.show-info" | translate }}</md-tooltip></md-button><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}} button-list=ctrl.settingsButton></tsa-settings-button></div><md-divider></md-divider><!-- Map  --><div class=tsa-map-container flex><div class=sidenav-tooltip ng-if="ctrl.showLayerMenu && (ctrl.getCustomPointMode() !== \'readonly\' || ctrl.getCustomRouteMode() !== \'readonly\')" ng-if=ctrl.trackingEnabled ng-class="{\'edit\': ctrl.getCustomPointMode() === \'add\'}"><div ng-if="ctrl.getCustomPointMode() === \'edit\' || ctrl.getCustomPointMode() === \'add\'" layout=row><div flex><span ng-if="ctrl.getCustomPointMode() === \'add\'">{{"views.map.tooltip.point-add" | translate }}</span> <span ng-if="ctrl.getCustomPointMode() === \'edit\'">{{"views.map.tooltip.point-edit" | translate }}</span><div class=tooltip-actions><md-button class="md-raised md-primary" ng-click="ctrl.onToggleCustomPointMode(\'edit\')" ng-if="ctrl.getCustomPointMode() !== \'edit\'">Ajouter</md-button><md-button class=md-raised ng-click="ctrl.onToggleCustomPointMode(\'add\')" ng-if="ctrl.getCustomPointMode() !== \'add\'">Ajouter</md-button></div></div><div flex=nogrow layout-align="center center"><md-button class=md-raised ng-click="ctrl.onToggleCustomPointMode(\'readonly\')">Quittez le mode edition</md-button></div></div><div ng-if="ctrl.getCustomRouteMode() === \'edit\' || ctrl.getCustomRouteMode() === \'add\'" layout=row><div flex><span ng-if="ctrl.getCustomRouteMode() === \'add\'">{{"views.map.tooltip.route-add" | translate }}</span> <span ng-if="ctrl.getCustomRouteMode() === \'edit\'">{{"views.map.tooltip.route-edit" | translate }}</span><div class=tooltip-actions><md-button class="md-raised md-primary" ng-click="ctrl.onToggleCustomRouteMode(\'edit\')" ng-if="ctrl.getCustomRouteMode() !== \'edit\'">Ajouter</md-button><md-button class=md-raised ng-click="ctrl.onToggleCustomRouteMode(\'add\')" ng-if="ctrl.getCustomRouteMode() !== \'add\'">Ajouter</md-button></div></div><div flex=nogrow layout-align="center center"><md-button class=md-raised ng-click="ctrl.onToggleCustomRouteMode(\'readonly\')">Quittez le mode edition</md-button></div></div></div><tsa-map-sidemenu map-component=ctrl.mapComponent ng-show=ctrl.showLayerMenu ng-if=ctrl.trackingEnabled></tsa-map-sidemenu><div class=map-element flex id={{ctrl.mapId}}><div class=day-night-layer ng-class="{\'station-unavailable\': ctrl.stationIsUnvailable}"><p class=md-subhead>{{"views.station.unvailable" | translate }}</p></div></div></div><div layout=row class=bottom-bar ng-show=ctrl.bottomBarEnabled layout-align="start center" flex=none><p>lat: {{ctrl.stringMouseLatitude}}</p><p>long: {{ctrl.stringMouseLongitude}}</p><span flex></span><p hide-sm>SOG: {{ctrl.position.gndspeed}}kn</p><p hide-sm>{{"views.map.heading" | translate }}: {{ctrl.position.heading | number:0}}°</p><p>lat: {{ctrl.position.stringLatitude}}</p><p>long: {{ctrl.position.stringLongitude}}</p></div></div>'),e.put("app/tsa-views/map-sidemenu/map-sidemenu.html",'<div><div class=config-menu><div class=layers-control-dialog-container><div class=layer-control-swhitch-background><h3>{{"views.map.layers" | translate }}</h3></div><div class="layer-control-branch swicth-background"><div class=layer-control-branch-header><div class=layer-control-branch-checkbox>{{"views.map.background" | translate }}</div><md-menu><md-button aria-label="Open more interaction" class=md-icon-button ng-click="ctrl.openMenu($mdMenu, $event, ctrl.getBackgroundLayer())"><md-icon class=material-icons>more_horiz</md-icon></md-button><md-menu-content width=4><md-menu-item><div class=tsa-sidenav-contextual-option-menu-opacity><md-icon>brightness_medium</md-icon><md-slider flex ng-model=ctrl.opacity ng-change=ctrl.setLayerOpacity() class=md-primary step=.1 min=0 max=1 aria-label=opacity></md-slider></div></md-menu-item><md-radio-group ng-model=ctrl.background ng-change=ctrl.toggleMapBackground()><md-menu-item><md-radio-button value=OpenSeaMap class="md-primary md-button">{{"layers.background.openseamap" | translate }}</md-radio-button></md-menu-item><md-menu-item><md-radio-button value=Geomod class="md-primary md-button">{{"layers.background.geomod" | translate }}</md-radio-button></md-menu-item><md-menu-item><md-radio-button value=Emodnet class="md-primary md-button">{{"layers.background.emodnet" | translate }}</md-radio-button></md-menu-item></md-radio-group></md-menu-content></md-menu></div></div><div ng-repeat="branch in ctrl.getTreeLayer()" class=layer-control-branch><div class=layer-control-branch-header><div class=layer-control-branch-checkbox><md-checkbox ng-model=branch.__visible class=md-primary ng-checked=branch.getVisible() md-indeterminate=ctrl.isBranchIsIndeterminate(branch) ng-change=branch.setVisible(branch.getVisible())>{{ branch.getName() | translate }}</md-checkbox></div><md-menu><md-button aria-label="Open more interaction" class=md-icon-button ng-click="ctrl.openMenu($mdMenu, $event, branch)"><md-icon class=material-icons>more_horiz</md-icon></md-button><md-menu-content width=4><md-menu-item><div class=tsa-sidenav-contextual-option-menu-opacity><md-icon>brightness_medium</md-icon><md-slider flex ng-model=ctrl.opacity ng-change=ctrl.setLayerOpacity() class=md-primary step=.1 min=0 max=1 aria-label=opacity></md-slider></div></md-menu-item><md-menu-item ng-if="branch.getName() === \'layers.casino\'"><md-button ng-click=ctrl.onOpenCasinoDialog()><md-icon>casino</md-icon>{{"views.map.casino.connection.button" | translate }}</md-button></md-menu-item><!-- COMMONS --><md-menu-divider ng-if="branch.getName() === \'layers.commons\' && ctrl.isConnected"></md-menu-divider><md-menu-item ng-if="branch.getName() === \'layers.commons\' && ctrl.isConnected"><md-button ng-click=ctrl.openUploadQGISDialog($event)><md-icon>file_upload</md-icon>{{"views.map.gqis.upload-title" | translate }}</md-button></md-menu-item></md-menu-content></md-menu></div><div ng-repeat="child in branch.getChildren()" class=layer-control-children><md-checkbox ng-model=child.__visible class=md-primary ng-disabled=!branch.getVisible() ng-change=child.setVisible(child.getVisible())>{{ child.getName() | translate }}</md-checkbox><md-menu><md-button aria-label="Open more interaction" class=md-icon-button ng-click="ctrl.openMenu($mdMenu, $event, child)"><md-icon class=material-icons>more_horiz</md-icon></md-button><md-menu-content width=10><md-menu-item><div class=tsa-sidenav-contextual-option-menu-opacity><md-icon>brightness_medium</md-icon><md-slider flex ng-model=ctrl.opacity ng-change=ctrl.setLayerOpacity() class=md-primary step=.1 min=0 max=1 aria-label={{child.getName()}}></md-slider></div></md-menu-item><!-- CUSTOM POINTS --><md-menu-item ng-if="child.getName() === \'layers.custom.points\'"><md-button class=layer-control-branch-checkbox ng-click=ctrl.onToggleCustomPointMode()><md-checkbox ng-model=pointsEditionEnabled class=md-primary ng-checked="ctrl.getCustomPointMode() !== \'readonly\'">{{"views.map.custom-point.editionMode" | translate }}</md-checkbox></md-button></md-menu-item><md-menu-item ng-if="child.getName() === \'layers.custom.points\'"><md-button ng-click=ctrl.toggleCustomPointLabel() ng-class="{enabled: ctrl.getCustomPointLabelState() === true}"><md-icon>label</md-icon>{{"views.map.custom-point.show-label" | translate }}</md-button></md-menu-item><md-menu-item ng-if="child.getName() === \'layers.custom.points\'"><md-button ng-click=ctrl.onRemoveAllCustomPoints()><md-icon>delete_forever</md-icon>{{"views.map.custom-point.remove-all" | translate }}</md-button></md-menu-item><md-menu-divider ng-if="child.getName() === \'layers.custom.points\'"></md-menu-divider><md-menu-item ng-if="child.getName() === \'layers.custom.points\'"><md-button ng-click=ctrl.openUploadPointDialog($event)><md-icon>file_upload</md-icon>{{"views.map.custom-point.import" | translate }}</md-button></md-menu-item><md-menu-divider ng-if="child.getName() === \'layers.custom.points\'"></md-menu-divider><md-menu-item ng-if="child.getName() === \'layers.custom.points\'"><md-menu style="padding:0; margin: 0"><md-button class=sidemenu-underbutton aria-label="Open more interaction" ng-click=$mdMenu.open($event)><md-icon>file_download</md-icon>{{"views.map.custom-point.export" | translate }}</md-button><md-menu-content width=4><md-menu-item ng-if="child.getName() === \'layers.custom.points\'"><md-button ng-click="ctrl.onExportPoints(\'gpx\')" href=# id=custom-points-export-gpx download=points.gpx><md-icon>file_download</md-icon>{{"views.map.custom-point.export-gpx" | translate }}</md-button></md-menu-item><md-menu-item ng-if="child.getName() === \'layers.custom.points\'"><md-button ng-click="ctrl.onExportPoints(\'html\')" href=# id=custom-points-export-html download=points.html><md-icon>file_download</md-icon>{{"views.map.custom-point.export-html" | translate }}</md-button></md-menu-item><md-menu-item ng-if="child.getName() === \'layers.custom.points\'"><md-button ng-click="ctrl.onExportPoints(\'csv\')" href=# id=custom-points-export-csv download=points.csv><md-icon>file_download</md-icon>{{"views.map.custom-point.export-csv" | translate }}</md-button></md-menu-item></md-menu-content></md-menu></md-menu-item><!-- CUSTOM ROUTES --><md-menu-item ng-if="child.getName() === \'layers.custom.routes\'"><md-button class=layer-control-branch-checkbox ng-click=ctrl.onToggleCustomRouteMode()><md-checkbox ng-model=routesEditionEnabled class=md-primary ng-checked="ctrl.getCustomRouteMode() !== \'readonly\'">{{"views.map.custom-route.editionMode" | translate }}</md-checkbox></md-button></md-menu-item><md-menu-item ng-if="child.getName() === \'layers.custom.routes\'"><md-button ng-click=ctrl.onRemoveAllCustomRoutes()><md-icon>delete_forever</md-icon>{{"views.map.custom-route.remove-all" | translate }}</md-button></md-menu-item><md-menu-divider ng-if="child.getName() === \'layers.custom.routes\'"></md-menu-divider><md-menu-item ng-if="child.getName() === \'layers.custom.routes\'"><md-button ng-click=ctrl.openUploadRouteDialog($event)><md-icon>file_upload</md-icon>{{"views.map.custom-route.import" | translate }}</md-button></md-menu-item><md-menu-divider ng-if="child.getName() === \'layers.custom.routes\'"></md-menu-divider><md-menu-item ng-if="child.getName() === \'layers.custom.routes\'"><md-menu style="padding:0; margin: 0"><md-button class=sidemenu-underbutton aria-label="Open more interaction" ng-click=$mdMenu.open($event)><md-icon>file_download</md-icon>{{"views.map.custom-route.export" | translate }}</md-button><md-menu-content width=4><md-menu-item ng-if="child.getName() === \'layers.custom.routes\'"><md-button ng-click="ctrl.onExportRoutes(\'gpx\')" href=# id=custom-routes-export-gpx download=routes.gpx><md-icon>file_download</md-icon>{{"views.map.custom-route.export-gpx" | translate }}</md-button></md-menu-item><md-menu-item ng-if="child.getName() === \'layers.custom.routes\'"><md-button ng-click="ctrl.onExportRoutes(\'html\')" href=# id=custom-routes-export-html download=routes.html><md-icon>file_download</md-icon>{{"views.map.custom-route.export-html" | translate }}</md-button></md-menu-item><md-menu-item ng-if="child.getName() === \'layers.custom.routes\'"><md-button ng-click="ctrl.onExportRoutes(\'csv\')" href=# id=custom-routes-export-csv download=routes.csv><md-icon>file_download</md-icon>{{"views.map.custom-route.export-csv" | translate }}</md-button></md-menu-item><md-menu-item ng-if="child.getName() === \'layers.custom.routes\'"><md-button ng-click="ctrl.onExportRoutes(\'rtz\')" href=# id=custom-routes-export-rtz download=routes.rtz><md-icon>file_download</md-icon>{{"views.map.custom-route.export-rtz" | translate }}</md-button></md-menu-item></md-menu-content></md-menu></md-menu-item></md-menu-content></md-menu></div></div></div></div><!-- CASINO DIALOG --><div style="visibility: hidden"><div class="md-dialog-container upload-dialog" id=casino-dialog><md-dialog class=casino-dialog-container style="width: 50%; height: 100%"><div class=casino-state-container ng-show="ctrl.casinoState === \'init\'"><h3>{{"views.map.casino.connection.title" | translate }}</h3><md-input-container><label>{{"views.map.casino.url" | translate }}</label><input ng-model=ctrl.casinoConnectionParams.url></md-input-container><md-input-container><label>{{"views.map.casino.login" | translate }}</label><input ng-model=ctrl.casinoConnectionParams.login></md-input-container><md-input-container><label>{{"views.map.casino.password" | translate }}</label><input type=password ng-model=ctrl.casinoConnectionParams.password></md-input-container><div ng-hide=!ctrl.casinoErrorLoad class=casino-error>{{"views.map.casino.loading.error" | translate }}</div><div class=casino-dialog-footer><md-button class="md-raised md-primary" ng-click=ctrl.casinoConnection() ng-disabled=ctrl.casinoCanConnect()>{{"views.map.casino.connection.button" | translate }}</md-button></div></div><div class=casino-state-container ng-show="ctrl.casinoState === \'cruises\'"><h3>{{"views.map.casino.cruises.title" | translate }}</h3><div class=casino-cruises><div ng-repeat="cruise in ctrl.cruises"><md-checkbox ng-model=cruise.selected ng-change=ctrl.onChangeCruise(cruise)>{{cruise.FullName}}</md-checkbox></div></div><div ng-hide=!ctrl.casinoErrorLoad class=casino-error>{{"views.map.casino.loading.error" | translate }}</div><div class=casino-dialog-footer><md-button class="md-raised md-primary" ng-click=ctrl.casinoSelectCruises() ng-disabled="ctrl.casinoLoading || ctrl.selectedCruises.length === 0">{{"views.map.casino.cruises.select-button" | translate }}</md-button></div></div><div class=casino-state-container ng-show="ctrl.casinoState === \'devices\'"><h3>{{"views.map.casino.devices.title" | translate }}</h3><div ng-repeat="device in ctrl.devices"><md-checkbox ng-model=device.selected md-indeterminate="device.indeterminate || false" ng-change=ctrl.onChangeDevices(device)>{{ device.DeviceName }}</md-checkbox><div class=casino_device-actions><md-checkbox ng-repeat="action in device.actions" ng-model=action.selected ng-disabled=!device.selected ng-change=ctrl.onChangeAction(device)>{{action.ActionName}}</md-checkbox></div></div><div class=casino-dialog-footer><md-button class="md-raised md-primary" ng-click=ctrl.casinoSelectDevices() ng-disabled="ctrl.selectedDevices.length === 0">{{"views.map.casino.devices.select-button" | translate }}</md-button></div></div><div class=casino-state-container ng-show="ctrl.casinoState === \'loadData\'"><div ng-if=ctrl.casinoErrorLoad>{{"views.map.casino.loading.error" | translate }}</div></div></md-dialog></div></div><!-- CUSTOM POINT IMPORT DIALOG --><div style="visibility: hidden"><div class="md-dialog-container upload-dialog" id=custom-points-upload-dialog><md-dialog><md-toolbar layout-padding><h2 class=md-title>{{"views.map.custom-point.title" | translate }}</h2></md-toolbar><md-content layout-padding><div class=geolayer-uploading-zone><input type=file id=custom-point-file name=customPointFiles[]></div><i>{{"views.map.custom-point.import-files" | translate }}</i><div><md-button class=md-raised ng-click=ctrl.cancelImportPoint()>{{"views.map.custom-point.cancel" | translate }}</md-button><md-button class="md-raised md-primary" ng-click=ctrl.onUploadPoints() ng-disabled=saveUploadPoint>{{"views.map.custom-point.upload" | translate }}</md-button></div></md-content></md-dialog></div></div><!-- CUSTOM POINT EDIT LABEL AND COORDINATES DIALOG --><div style="visibility: hidden"><div class="md-dialog-container upload-dialog" id=custom-points-create-dialog><md-dialog class=geolayer-dialog-edit-point style="width: 50%"><md-toolbar layout-padding><h2 class=md-title ng-if=!ctrl.currentCustomPoint.edited>{{"views.map.custom-point.title.add" | translate }}</h2><h2 class=md-title ng-if=ctrl.currentCustomPoint.edited>{{"views.map.custom-point.title.edit" | translate }}</h2></md-toolbar><md-content layout-padding><div class=geolayer-edit-point><form name=customPointForm id=customPointForm><md-input-container><label>{{"views.map.custom-point.label" | translate }}</label><input ng-model=ctrl.currentCustomPoint.label></md-input-container><md-input-container><label>{{"views.map.custom-point.longitude" | translate }}</label><input ng-model=ctrl.currentCustomPoint.coordinates[0] required></md-input-container><md-input-container><label>{{"views.map.custom-point.latitude" | translate }}</label><input ng-model=ctrl.currentCustomPoint.coordinates[1] required></md-input-container><div><md-button class=md-raised ng-click=ctrl.closePointDialog()>{{"views.map.custom-point.cancel" | translate }}</md-button><md-button class="md-raised md-primary" ng-disabled=!customPointForm.$valid ng-click=ctrl.saveCustomPoint()>{{"views.map.custom-point.save" | translate }}</md-button></div></form></div></md-content></md-dialog></div></div><div ng-show=ctrl.currentPointEdit><div id=custom-points-edit-dialog ng-style="{\'left\': ctrl.currentPointEdit.left, \'top\': ctrl.currentPointEdit.top}"><md-button class="md-raised md-primary" ng-click=ctrl.deleteCustomPoint()>{{"views.map.custom-point.delete" | translate }}</md-button><md-button class=md-raised ng-click=ctrl.openCustomPointCreatedDialog()>{{"views.map.custom-point.edit" | translate }}</md-button></div></div><!-- CUSTOM ROUTE IMPORT DIALOG --><div style="visibility: hidden"><div class="md-dialog-container upload-dialog" id=custom-routes-upload-dialog><md-dialog><md-toolbar layout-padding><h2 class=md-title>{{"views.map.custom-route.import" | translate }}</h2></md-toolbar><md-content layout-padding><div class=geolayer-uploading-zone><input type=file id=custom-route-file name=customRouteFiles[]></div><i>{{"views.map.custom-route.import-files" | translate }}</i><div><md-button class=md-raised ng-click=ctrl.cancelImportRoutes()>{{"views.map.custom-point.cancel" | translate }}</md-button><md-button class="md-raised md-primary" ng-click=ctrl.onUploadRoutes() ng-disabled=saveUploadRoute>{{"views.map.custom-point.upload" | translate }}</md-button></div></md-content></md-dialog></div></div><!-- CUSTOM ROUTE EDIT COORDINATES DIALOG --><div style="visibility: hidden"><div class="md-dialog-container upload-dialog" id=custom-routes-edit-dialog><md-dialog layout-padding class=geolayer-dialog-edit-point style="width: 50%"><div class=geolayer-edit-route><form name=customRouteForm><md-input-container><label>{{"views.map.custom-route.longitude" | translate }}</label><input ng-model=ctrl.currentCustomRoute.coordinates[0] required></md-input-container><md-input-container><label>{{"views.map.custom-route.latitude" | translate }}</label><input ng-model=ctrl.currentCustomRoute.coordinates[1] required></md-input-container><div><md-button class=md-raised ng-click=ctrl.closeRouteDialog()>{{"views.map.custom-route.cancel" | translate }}</md-button><md-button class="md-raised md-primary" ng-disabled=!customRouteForm.$valid ng-click=ctrl.saveCustomRoute()>{{"views.map.custom-route.save" | translate }}</md-button></div></form></div></md-dialog></div></div><div ng-show=ctrl.currentRouteEdit><div id=custom-road-edit-dialog ng-style="{\'left\': ctrl.currentRouteEdit.left, \'top\': ctrl.currentRouteEdit.top}"><md-button class="md-raised md-primary" ng-click=ctrl.deleteCustomRoute()>{{"views.map.custom-route.delete" | translate }}</md-button><md-button class=md-raised ng-click=ctrl.openCustomRouteDialog()>{{"views.map.custom-route.edit" | translate }}</md-button></div></div><!-- QGIS IMPORT DIALOG --><div style="visibility: hidden"><div class="md-dialog-container upload-dialog" id=qgis-upload-project-dialog><md-dialog><md-toolbar layout-padding><h2 class=md-title>{{"views.map.qgis.import-title" | translate }}</h2></md-toolbar><md-content layout-padding><div class=sdiv-uploading-zone><input type=file id=qgis-upload-project name=qgisFiles[]></div><i>{{"views.map.qgis.import-files" | translate }}</i><div><md-button class=md-raised ng-click=ctrl.closeUploadQGISDialog()>{{"views.map.qgis.cancel" | translate }}</md-button><md-button class="md-raised md-primary" ng-click=ctrl.onQGISFileUpload() ng-disabled=!ctrl.saveUploadQGIS>{{"views.map.qgis.upload" | translate }}</md-button></div></md-content></md-dialog></div></div></div>'),
e.put("app/tsa-views/menu/menu.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.menu.icon\' | translate }}"></i><p class=title>{{"views.menu.title" | translate }}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=row layout-align=space-around class=tsa-content><pre>\n            {{ ctrl.menu }}\n        </pre></div></div>'),e.put("app/tsa-views/message/message.html",'<meta charset=utf-8><div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.message.icon\' | translate }}"></i><p class=title>{{"views.message.title" | translate }}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><div flex layout=column class=tsa-content><p id=content>{{ctrl.lastMessage.message}}</p><md-divider></md-divider><div layout=row><p id=timestamp>{{ctrl.lastMessage.messageTime | date : "dd MMM yyyy - HH:mm:ss" : "+0"}}</p><p id=DefaultUser ng-if="ctrl.lastMessage.user===\'user\'">{{\'views.message.from\' | translate }}{{\'dialog.messaging.user\' | translate }}</p><p id=user ng-if="ctrl.lastMessage.user!==\'user\'">{{\'views.message.from\' | translate }}{{ctrl.lastMessage.user}}</p></div></div></div>'),e.put("app/tsa-views/mobile/mobile.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.mobile.icon\' | translate }}"></i><p class=title>{{\'views.mobile.title\' | translate}}</p><p class=device-id ng-show="ctrl.deviceId != undefined">- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Data views --><div layout=row style="height: 24px; margin-left: 12px"><p class=device-id>ROV</p></div><div layout=column class=tsa-content layout-align="start center"><tsa-data-view data=ctrl.MOBILE.LATITUDE frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.mobile.lat></tsa-data-view><tsa-data-view data=ctrl.MOBILE.LONGITUDE frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.mobile.long></tsa-data-view><tsa-data-view data=ctrl.MOBILE.IMMERSION frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.mobile.imm format=%.2f units=m></tsa-data-view></div><md-divider></md-divider><div layout=row style="height: 24px; margin-left: 12px"><p class=device-id>LEST</p></div><div layout=column class=tsa-content layout-align="start center"><tsa-data-view data=ctrl.MOBILE.LATITUDE frame-id=ctrl.frameId device-id=ctrl.lestDeviceId opt-title=views.mobile.lat></tsa-data-view><tsa-data-view data=ctrl.MOBILE.LONGITUDE frame-id=ctrl.frameId device-id=ctrl.lestDeviceId opt-title=views.mobile.long></tsa-data-view><tsa-data-view data=ctrl.MOBILE.IMMERSION frame-id=ctrl.frameId device-id=ctrl.lestDeviceId opt-title=views.mobile.imm format=%.2f units=m></tsa-data-view></div></div>'),e.put("app/tsa-views/multibeam/multibeam.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.multibeam.icon\' | translate }}"></i><p class=title>{{"views.multibeam.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column class=tsa-content ng-class="{\'data-missing\': ctrl.dataMissing}"><div flex class=tsa-chart-container><canvas id={{ctrl.canvasId}}></canvas></div><div layout=row layout-align=space-between style="min-height: 46px"><tsa-data-view flex opt-title=views.multibeam.number opt-value=ctrl.nbValue red-green=true></tsa-data-view><md-divider></md-divider><tsa-data-view flex data=ctrl.pocket frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.multibeam.depth opt-value=ctrl.verticalDepth units=m format=%.1f></tsa-data-view><md-divider></md-divider><tsa-data-view flex opt-title=views.multibeam.swath opt-value=ctrl.swathValue units=m format=%.1f></tsa-data-view></div></div></div>'),e.put("app/tsa-views/navigation/navigation.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.navigation.icon\' | translate }}"></i><p class=title>{{"views.navigation.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><div class=tsa-content layout=column><!-- Lat --><tsa-data-view data=ctrl.latitude frame-id=ctrl.frameId device-id=ctrl.deviceId format=lat opt-title=views.navigation.latitude></tsa-data-view><!-- Longitude --><tsa-data-view data=ctrl.longitude frame-id=ctrl.frameId device-id=ctrl.deviceId format=long opt-title=views.navigation.longitude></tsa-data-view><!-- Heading --><tsa-data-view data=ctrl.heading frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f opt-title=views.navigation.heading></tsa-data-view><!-- Sounder --><tsa-data-view data=ctrl.sounder frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f opt-title=views.navigation.sounder></tsa-data-view></div><div class=tsa-content layout=row><!-- Info vecteurs vitesses --><div flex=50 class=tsa-content layout=column><div class=tsa-speed-title><h3 class=md-headline>{{"views.navigation.speed-vectors" | translate }}</h3></div><!-- Ground speed vector --><tsa-double-data-view title=views.navigation.ground data1=ctrl.groundCourse frame-id1=ctrl.frameId device-id1=ctrl.deviceId format1=%.0f data2=ctrl.groundSpeed frame-id2=ctrl.frameId device-id2=ctrl.deviceId format2=%.1f></tsa-double-data-view><!-- Surface speed vector --><tsa-double-data-view title=views.navigation.surface data1=ctrl.surfaceCourse frame-id1=ctrl.frameId device-id1=ctrl.deviceId format1=%.0f data2=ctrl.surfaceSpeed frame-id2=ctrl.frameId device-id2=ctrl.deviceId format2=%.1f ng-show=!ctrl.isMD></tsa-double-data-view><!-- Drift speed vector --><tsa-double-data-view title=views.navigation.drift data1=ctrl.driftCourse frame-id1=ctrl.frameId device-id1=ctrl.deviceId format1=%.0f data2=ctrl.driftSpeed frame-id2=ctrl.frameId device-id2=ctrl.deviceId format2=%.1f ng-show=!ctrl.isMD></tsa-double-data-view></div><!-- Info routing --><div flex=50 class=tsa-content layout=column><div class=tsa-speed-title><h3 ng-if="ctrl.currentMode === ctrl.MODE.NAVIGATION" class=md-headline>{{"views.navigation.profil.title" | translate }}</h3><h3 ng-if="ctrl.currentMode === ctrl.MODE.STATION" class=md-headline>{{"views.navigation.station.title" | translate }}</h3></div><!-- Previous --><tsa-double-data-view ng-if="ctrl.currentMode === ctrl.MODE.NAVIGATION" title=views.navigation.profil.previous data1=ctrl.prevCourse frame-id1=ctrl.frameRoutingId device-id1=ctrl.deviceId format1=%.0f data2=ctrl.prevDist frame-id2=ctrl.frameRoutingId device-id2=ctrl.deviceId format2=marineDistance ng-show=!ctrl.isMD></tsa-double-data-view><!-- Current --><tsa-double-data-view ng-if="ctrl.currentMode === ctrl.MODE.NAVIGATION" title=views.navigation.profil.current data1=ctrl.curCourse frame-id1=ctrl.frameRoutingId device-id1=ctrl.deviceId format1=%.1f data2=ctrl.curDist frame-id2=ctrl.frameRoutingId device-id2=ctrl.deviceId format2=marineDistance ng-show=!ctrl.isMD></tsa-double-data-view><!-- ETA --><tsa-data-view ng-show=!ctrl.isMD ng-if="ctrl.currentMode === ctrl.MODE.NAVIGATION" data=ctrl.eta frame-id=ctrl.frameRoutingId device-id=ctrl.deviceId format=excelDateNoSec opt-title=views.navigation.profil.etaZ units=""></tsa-data-view><tsa-double-data-view ng-if="ctrl.currentMode === ctrl.MODE.STATION" title=views.navigation.station.text data1=ctrl.prevCourse frame-id1=ctrl.frameRoutingId device-id1=ctrl.deviceId format1=%.0f data2=ctrl.prevDist frame-id2=ctrl.frameRoutingId device-id2=ctrl.deviceId format2=%.1f></tsa-double-data-view><!-- Marion --><tsa-data-view ng-show=ctrl.isMD data=ctrl.curDist frame-id=ctrl.frameRoutingId device-id=ctrl.deviceId format=marineDistance opt-title=views.navigation.profil.current></tsa-data-view><tsa-data-view ng-show=ctrl.isMD ng-show=ctrl.statusService.getLocalTimeZoneOffset() ng-if="ctrl.currentMode === ctrl.MODE.NAVIGATION" data=ctrl.eta frame-id=ctrl.frameRoutingId device-id=ctrl.deviceId format=excelDateNoSecTZ opt-title=views.navigation.profil.eta units=""></tsa-data-view><tsa-data-view ng-show=ctrl.isMD opt-value=ctrl.currentWptName opt-title=views.navigation.currentWpt format=%s></tsa-data-view></div></div></div>'),e.put("app/tsa-views/numerical/numerical.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.numerical.icon\' | translate }}"></i><p class=title>{{"views.numerical.title" | translate }}</p><span flex></span><md-button ng-if=!numerical.editionMode class=md-icon-button ng-click="numerical.editionMode = !numerical.editionMode"><md-icon>edit</md-icon><md-tooltip>{{"views.numerical.switch" | translate }}</md-tooltip></md-button><tsa-settings-button on-change-view="numerical.onChangeCardType({type: type})" card-id={{numerical.cardId}} button-list=numerical.settingsButton></tsa-settings-button></div><md-divider></md-divider><!-- Data list --><div flex class=tsa-content><div class=tsa-numerical-data ng-repeat="item in numerical.itemList" layout=row layout-align=space-around><div ng-show=numerical.editionMode layout=row style="width=200px"><md-button class=md-icon-button ng-click=item.up() ng-cloak><md-icon>keyboard_arrow_up</md-icon></md-button><md-button class=md-icon-button ng-click=item.down()><md-icon>keyboard_arrow_down</md-icon></md-button></div><tsa-data-view data=item.dataId frame-id=item.frameId device-id=item.deviceId show-subtitle=true on-update-title=numerical.updateItemTitleCallback(item,title)></tsa-data-view><md-button ng-if=numerical.editionMode class=md-icon-button ng-click=item.remove()><md-icon>delete</md-icon></md-button></div></div><!-- Edition buttons --><div layout=row layout-align=end ng-if=numerical.editionMode class=md-whiteframe-5dp><md-button class="md-fab md-mini md-primary" ng-click=numerical.addItem()><md-icon>add</md-icon><md-tooltip>{{"Add data" | translate }}</md-tooltip></md-button><md-button class="md-fab md-mini md-primary" ng-click="numerical.editionMode = !numerical.editionMode"><md-icon>check</md-icon><md-tooltip>{{"views.numerical.close-edition" | translate }}</md-tooltip></md-button></div></div>'),e.put("app/tsa-views/propulsion-at/propulsion-at.html",'<meta charset=utf-8><div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.propulsion.icon\' | translate }}"></i><p class=title>{{"views.propulsion.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=row class=tsa-content><div flex layout=column><canvas id={{ctrl.canvasId}}><p>Error during the display of the canvas (maybe due to the browser version)</p></canvas><!-- Data views --><tsa-data-view class=propulsion id=fronttrans data=ctrl.frontTrans.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units="" ng-style="{top:ctrl.frontTrans.y + \'px\', left: ctrl.frontTrans.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=frontpropangle data=ctrl.frontPropAngle.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=° ng-style="{top:ctrl.frontPropAngle.y + \'px\', left: ctrl.frontPropAngle.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=mainleft data=ctrl.mainLeft.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=rpm abs=true ng-style="{top:ctrl.mainLeft.y + \'px\', left: ctrl.mainLeft.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=mainright data=ctrl.mainRight.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=rpm abs=true ng-style="{top:ctrl.mainRight.y + \'px\', left: ctrl.mainRight.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=angle data=ctrl.angle.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=° redgreen=true abs=true ng-style="{top:ctrl.angle.y + \'px\', left: ctrl.angle.x + \'px\'};"></tsa-data-view></div><div flex layout=column><h2 class=sub>{{"views.propulsion.heading" | translate }} :</h2><tsa-data-view class=navigation id=heading data=ctrl.heading.id frame-id=ctrl.navFrameId; device-id=ctrl.navId format=%.0f title-disabled=true units=°></tsa-data-view><h2 class=sub>{{"views.propulsion.surfspeed" | translate }} :</h2><div layout=row><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.surfNorth units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div></div><div layout=row><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.surfWest units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.surfEast units=nd format=%.1f title-disabled=true></tsa-data-view></div></div><div layout=row><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.surfSouth units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div></div><h2 class=sub>{{"views.propulsion.gndspeed" | translate }} :</h2><div layout=row><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.gndNorth units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div></div><div layout=row><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.gndWest units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.gndEast units=nd format=%.1f title-disabled=true></tsa-data-view></div></div><div layout=row><div flex layout=column></div><div flex layout=column><tsa-data-view class=navigation opt-value=ctrl.gndSouth units=nd format=%.1f title-disabled=true></tsa-data-view></div><div flex layout=column></div></div></div></div></div>'),e.put("app/tsa-views/propulsion-pp/propulsion-pp.html",'<meta charset=utf-8><div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.propulsion.icon\' | translate }}"></i><p class=title>{{"views.propulsion.title" | translate }}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=row class=tsa-content><div flex=30><tsa-data-view ng-repeat="data in ctrl.DA.datas" data=data.dataId frame-id=ctrl.DA.frameId device-id=ctrl.DA.deviceId opt-title="{{\'DA \' + ($index+1)}}" format=%.0f units=kW></tsa-data-view></div><div flex=70><canvas id={{ctrl.canvasId}}><p>Error during the display of the canvas (maybe due to the browser version)</p></canvas><tsa-data-view class=propulsion id=trans1 data=ctrl.PROP_VDR.trans1.id frame-id=ctrl.PROP_VDR.frameId device-id=ctrl.PROP_VDR.deviceId format=%.0f title-disabled=true units=% red-green=true ng-style="{top:ctrl.PROP_VDR.trans1.y + \'px\', left: ctrl.PROP_VDR.trans1.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=trans2 data=ctrl.PROP_VDR.trans2.id frame-id=ctrl.PROP_VDR.frameId device-id=ctrl.PROP_VDR.deviceId format=%.0f title-disabled=true units=% red-green=true ng-style="{top:ctrl.PROP_VDR.trans2.y + \'px\', left: ctrl.PROP_VDR.trans2.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=trans3 data=ctrl.PROP_VDR.trans3.id frame-id=ctrl.PROP_VDR.frameId device-id=ctrl.PROP_VDR.deviceId format=%.0f title-disabled=true units=% red-green=true ng-style="{top:ctrl.PROP_VDR.trans3.y + \'px\', left: ctrl.PROP_VDR.trans3.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=trans4 data=ctrl.PROP_VDR.trans4.id frame-id=ctrl.PROP_VDR.frameId device-id=ctrl.PROP_VDR.deviceId format=%.0f title-disabled=true units=% red-green=true ng-style="{top:ctrl.PROP_VDR.trans4.y + \'px\', left: ctrl.PROP_VDR.trans4.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=rudderPort data=ctrl.PROP_VDR.portRudder.id frame-id=ctrl.PROP_VDR.frameId device-id=ctrl.PROP_VDR.deviceId format=%.0f title-disabled=true units=° red-green=true ng-style="{top:ctrl.PROP_VDR.portRudder.y + \'px\', left: ctrl.PROP_VDR.portRudder.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=rudderStarboard data=ctrl.PROP_VDR.starboardRudder.id frame-id=ctrl.PROP_VDR.frameId device-id=ctrl.PROP_VDR.deviceId format=%.0f title-disabled=true units=° red-green=true ng-style="{top:ctrl.PROP_VDR.starboardRudder.y + \'px\', left: ctrl.PROP_VDR.starboardRudder.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=portMain data=ctrl.PROP_ENGINE.portMain.id frame-id=ctrl.PROP_ENGINE.frameId device-id=ctrl.PROP_ENGINE.deviceId format=%.0f title-disabled=true units="" ng-style="{top:ctrl.PROP_ENGINE.portMain.y + \'px\', left: ctrl.PROP_ENGINE.portMain.x + \'px\'};"></tsa-data-view><tsa-data-view class=propulsion id=starboardMain data=ctrl.PROP_ENGINE.starboardMain.id frame-id=ctrl.PROP_ENGINE.frameId device-id=ctrl.PROP_ENGINE.deviceId format=%.0f title-disabled=true units="" ng-style="{top:ctrl.PROP_ENGINE.starboardMain.y + \'px\', left: ctrl.PROP_ENGINE.starboardMain.x + \'px\'};"></tsa-data-view></div></div><!-- <canvas id={{ctrl.canvasId}}>\n                <p>Error during the display of the canvas (maybe due to the browser version)</p>\n            </canvas> --><!-- Data views --><!-- <tsa-data-view\n                class="propulsion"\n                id="frontpropangle"\n                data=ctrl.frontPropAngle.id\n                frame-id=ctrl.frameId\n                device-id=ctrl.deviceId\n                format="%.0f"\n                title-disabled="true"\n                units="°"\n                ng-style="{top:ctrl.frontPropAngle.y + \'px\', left: ctrl.frontPropAngle.x + \'px\'};">\n            </tsa-data-view>\n\n            <tsa-data-view\n                class="propulsion"\n                id="mainleft"\n                data=ctrl.mainLeft.id\n                frame-id=ctrl.frameId\n                device-id=ctrl.deviceId\n                format="%.0f"\n                title-disabled="true"\n                units="rpm"\n                abs="true"\n                ng-style="{top:ctrl.mainLeft.y + \'px\', left: ctrl.mainLeft.x + \'px\'};">\n            </tsa-data-view>\n\n            <tsa-data-view\n                class="propulsion"\n                id="mainright"\n                data=ctrl.mainRight.id\n                frame-id=ctrl.frameId\n                device-id=ctrl.deviceId\n                format="%.0f"\n                title-disabled="true"\n                units="rpm"\n                abs="true"\n                ng-style="{top:ctrl.mainRight.y + \'px\', left: ctrl.mainRight.x + \'px\'};">\n            </tsa-data-view>\n\n            <tsa-data-view\n                class="propulsion"\n                id="angle"\n                data=ctrl.angle.id\n                frame-id=ctrl.frameId\n                device-id=ctrl.deviceId\n                format="%.0f"\n                title-disabled="true"\n                units="°"\n                redGreen="true"\n                abs="true"\n                ng-style="{top:ctrl.angle.y + \'px\', left: ctrl.angle.x + \'px\'};">\n            </tsa-data-view>\n        </div>\n\n        <div flex layout="column">\n            <h2 class="sub">{{"views.propulsion.heading" | translate }} :</h2>\n            <tsa-data-view\n                class="navigation"\n                id="heading"\n                data=ctrl.heading.id\n                frame-id=ctrl.navFrameId;\n                device-id=ctrl.navId\n                format="%.0f"\n                title-disabled="true"\n                units="°">\n            </tsa-data-view>\n            <h2 class="sub">{{"views.propulsion.surfspeed" | translate }} :</h2>\n            <div layout="row">\n                <div flex layout="column">\n                </div>\n                <div flex layout="column">\n                    <tsa-data-view\n                        class="navigation"\n                        opt-value=ctrl.surfNorth\n                        units="nd"\n                        format="%.1f"\n                        title-disabled="true">\n                    </tsa-data-view>\n                </div>\n                <div flex layout="column">\n                </div>\n            </div>\n            <div layout="row">\n                <div flex layout="column">\n                    <tsa-data-view\n                        class="navigation"\n                        opt-value=ctrl.surfWest\n                        units="nd"\n                        format="%.1f"\n                        title-disabled="true">\n                    </tsa-data-view>\n                </div>\n                <div flex layout="column">\n                </div>\n                <div flex layout="column">\n                    <tsa-data-view\n                        class="navigation"\n                        opt-value=ctrl.surfEast\n                        units="nd"\n                        format="%.1f"\n                        title-disabled="true">\n                    </tsa-data-view>\n                </div>\n            </div>\n            <div layout="row">\n                <div flex layout="column">\n                </div>\n                <div flex layout="column">\n                    <tsa-data-view\n                        class="navigation"\n                        opt-value=ctrl.surfSouth\n                        units="nd"\n                        format="%.1f"\n                        title-disabled="true">\n                    </tsa-data-view>\n                </div>\n                <div flex layout="column">\n                </div>\n            </div>\n\n            <h2 class="sub">{{"views.propulsion.gndspeed" | translate }} :</h2>\n            <div layout="row">\n                <div flex layout="column">\n                </div>\n                <div flex layout="column">\n                    <tsa-data-view\n                        class="navigation"\n                        opt-value=ctrl.gndNorth\n                        units="nd"\n                        format="%.1f"\n                        title-disabled="true">\n                    </tsa-data-view>\n                </div>\n                <div flex layout="column">\n                </div>\n            </div>\n            <div layout="row">\n                <div flex layout="column">\n                    <tsa-data-view\n                        class="navigation"\n                        opt-value=ctrl.gndWest\n                        units="nd"\n                        format="%.1f"\n                        title-disabled="true">\n                    </tsa-data-view>\n                </div>\n                <div flex layout="column">\n                </div>\n                <div flex layout="column">\n                    <tsa-data-view\n                        class="navigation"\n                        opt-value=ctrl.gndEast\n                        units="nd"\n                        format="%.1f"\n                        title-disabled="true">\n                    </tsa-data-view>\n                </div>\n            </div>\n            <div layout="row">\n                <div flex layout="column">\n                </div>\n                <div flex layout="column">\n                    <tsa-data-view\n                        class="navigation"\n                        opt-value=ctrl.gndSouth\n                        units="nd"\n                        format="%.1f"\n                        title-disabled="true">\n                    </tsa-data-view>\n                </div>\n                <div flex layout="column">\n                </div>\n            </div>\n        </div> --></div>'),e.put("app/tsa-views/propulsion-tl/propulsion-tl.html","<meta charset=utf-8><div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class=\"mdi mdi-24px mdi-{{'views.propulsion.icon' | translate }}\"></i><p class=title>{{\"views.propulsion.title\" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view=\"ctrl.onChangeCardType({type: type})\" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column layout-align=space-around><tsa-data-view id=gene1 data=ctrl.gene1.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=false units=kW abs=true ng-style=\"{top:ctrl.gene1.y + 'px', left: ctrl.gene1.x + 'px'}\"></tsa-data-view><tsa-data-view id=gene2 data=ctrl.gene2.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=false units=kW abs=true ng-style=\"{top:ctrl.gene2.y + 'px', left: ctrl.gene2.x + 'px'}\"></tsa-data-view><tsa-data-view id=gene3 data=ctrl.gene3.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=false units=kW abs=true ng-style=\"{top:ctrl.gene3.y + 'px', left: ctrl.gene3.x + 'px'}\"></tsa-data-view><tsa-data-view id=gene4 data=ctrl.gene4.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=false units=kW abs=true ng-style=\"{top:ctrl.gene4.y + 'px', left: ctrl.gene4.x + 'px'}\"></tsa-data-view><canvas id={{ctrl.canvasId}} class=ship><p>Error during the display of the canvas (maybe due to the browser version)</p></canvas><!-- Data views --><tsa-data-view id=fronttrans data=ctrl.frontTrans.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=\"\" abs=true ng-style=\"{top:ctrl.frontTrans.y + 'px', left: ctrl.frontTrans.x + 'px'}\"></tsa-data-view><tsa-data-view id=reartrans data=ctrl.rearTrans.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=\"\" abs=true ng-style=\"{top:ctrl.rearTrans.y + 'px', left: ctrl.rearTrans.x + 'px'};\"></tsa-data-view><tsa-data-view id=main data=ctrl.main.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=rpm abs=true ng-style=\"{top:ctrl.main.y + 'px', left: ctrl.main.x + 'px'};\"></tsa-data-view><tsa-data-view id=angle data=ctrl.angle.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.0f title-disabled=true units=° redgreen=true abs=true ng-style=\"{top:ctrl.angle.y + 'px', left: ctrl.angle.x + 'px'};\"></tsa-data-view></div></div>"),e.put("app/tsa-views/route/route.html","<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class=\"mdi mdi-24px mdi-{{'views.route.icon' | translate }}\"></i><p class=title>{{\"views.route.title\" | translate }}</p><span flex></span><tsa-settings-button on-change-view=\"ctrl.onChangeCardType({type: type})\" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex class=tsa-content layout=column><!-- Route table --><div flex layout=column class=tsa-table><div layout=row class=\"title tsa-table-title\"><p flex ng-repeat=\"column in ctrl.header\">{{ column | translate }}</p></div><div class=tsa-table-content ng-show=!ctrl.ready>Loading...</div><div class=tsa-table-content ng-show=ctrl.ready><div id={{wpt.name}} flex layout=row ng-repeat=\"wpt in ctrl.route\"><p flex>{{ wpt.name }}</p><p flex>{{ wpt.type }}</p><p flex>{{ wpt.eta && (wpt.eta | date: \"dd/MM HH:mm\" : ctrl.statusService.getLocalTimeZoneOffset()) || '' }}</p><p flex>{{ wpt.duration && (wpt.duration | timeInHoursMins) || ''}}</p><!-- <p flex>{{ wpt.duration && (wpt.duration | date: \"HH:mm\" : 'UTC') || ''}}</p> --><p flex>{{ wpt.etanext && (wpt.etanext | date: \"dd/MM HH:mm\" : ctrl.statusService.getLocalTimeZoneOffset()) || '' }}</p><p flex>{{ wpt.distance && (wpt.distance | marineDistance) || '' }}</p><p flex>{{ wpt.time && (wpt.time | timeInHoursMins) || ''}}</p><!-- <p flex>{{ wpt.time && (wpt.time | date: \"HH:mm\" : 'UTC') || ''}}</p> --></div></div></div></div></div>"),e.put("app/tsa-views/species/species.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.species.icon\' | translate }}"></i><p class=title>{{"views.species.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column class=tsa-content><div layout=row style="min-height: 46px"><tsa-data-view flex=33 data=ctrl.haul frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.haul-composition.haul></tsa-data-view><md-divider></md-divider><tsa-data-view flex=33 data=ctrl.pocket frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.haul-composition.pocket></tsa-data-view><md-divider></md-divider><tsa-data-view flex=33 data=ctrl.totalPocket frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.haul-composition.total-pocket></tsa-data-view></div><md-divider></md-divider><tsa-data-view data=ctrl.speciesId frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.species.species-rubbin-code></tsa-data-view><tsa-data-view data=ctrl.sign frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.species.sign></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.box frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.species.box-type></tsa-data-view><tsa-data-view data=ctrl.boxWeight frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.haul-composition.weight></tsa-data-view><tsa-data-view data=ctrl.boxDest frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.species.destination></tsa-data-view><md-divider></md-divider><tsa-data-view data=ctrl.totalSpecies frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.species.total-species></tsa-data-view><tsa-data-view data=ctrl.totalSorted frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.species.total-sorted></tsa-data-view></div></div>'),e.put("app/tsa-views/thermoConfig/thermoConfig.html",'<md-content style="height: 100%" layout=column ng-init=ctrl.init() ng-switch=ctrl.view class=tsa-thermo-config><!-- Nav bar --><md-nav-bar md-selected-nav-item=ctrl.view style="padding-right: 30px" class=tsa-thermo-config><md-nav-item md-nav-click="ctrl.view=\'General\'" name=General>General</md-nav-item><md-nav-item md-nav-click="ctrl.view=\'Temperature\'" name=Temperature>Temperature</md-nav-item><md-nav-item md-nav-click="ctrl.view=\'Conductivity\'" name=Conductivity>Conductivity</md-nav-item><md-nav-item md-nav-click="ctrl.view=\'Intake Temperature\'" name="Intake Temperature">Intake Temperature</md-nav-item></md-nav-bar><!-- Settings button --><tsa-settings-button class=tsa-thermo-config on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button><!-- DEVICES tab --><md-content ng-switch-when=General flex layout=column><!--Device list title and legends --><md-divider></md-divider><div style="margin-left: 10px" layout=row layout-align="center center"><md-button class="md-raised md-primary"><label for=file-input>Select a SEABIRD file</label></md-button><input id=file-input type=file nv-file-select uploader=ctrl.uploader style=display:none></div><ul><li ng-repeat="item in ctrl.uploader.queue">Name: <span ng-bind=item.file.name></span><md-button class="md-raised md-primary" ng-click=item.upload()>Upload</md-button></li></ul><md-divider></md-divider><!--Device list --><md-content><md-list flex style="padding: 0px"><md-list-item class=md-2-line ng-click=null style="padding: 0px" layout-align="center center"><div flex=60 class=md-list-item-text><h3>Sensor Name</h3></div><div flex=30 layout=row><p>{{ctrl.instrument.name}}</p></div><span flex=5></span><md-divider></md-divider></md-list-item></md-list></md-content></md-content><!--TOPICS tab --><md-content ng-switch-when=Temperature layout=column><md-list flex style="padding: 0px"><md-list-item class=md-2-line ng-click=null style="padding: 0px" layout-align="center center" ng-repeat="(key, value) in ctrl.temperatureSensor"><div flex=80 class=md-list-item-text><h3>{{key}}</h3></div><div flex=10 layout=row><p>{{value}}</p></div><span flex=5></span><md-divider></md-divider></md-list-item></md-list></md-content><!--TOPICS tab --><md-content ng-switch-when=Conductivity layout=column><md-list flex style="padding: 0px"><md-list-item class=md-2-line ng-click=null style="padding: 0px" layout-align="center center" ng-repeat="(key, value) in ctrl.conductivitySensor"><div flex=80 class=md-list-item-text><h3>{{key}}</h3></div><div flex=10 layout=row><p>{{value}}</p></div><span flex=5></span><md-divider></md-divider></md-list-item></md-list></md-content><!--TOPICS tab --><md-content ng-switch-when="Intake Temperature" layout=column><md-list flex style="padding: 0px"><md-list-item class=md-2-line ng-click=null style="padding: 0px" layout-align="center center" ng-repeat="(key, value) in ctrl.intakeTemperatureSensor"><div flex=80 class=md-list-item-text><h3>{{key}}</h3></div><div flex=10 layout=row><p>{{value}}</p></div><span flex=5></span><md-divider></md-divider></md-list-item></md-list></md-content></md-content>'),
e.put("app/tsa-views/thermometer/thermometer.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.thermometer.icon\' | translate }}"></i><p class=title>{{"views.thermometer.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column class=tsa-content layout-align="center center"><tsa-data-view data=ctrl.THERMOMETER.TEMPERATURE frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.thermometer.temperature format=%.2f units=°C></tsa-data-view></div></div>'),e.put("app/tsa-views/thermosal/thermosal.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.thermosal.icon\' | translate }}"></i><p class=title>{{"views.thermosal.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><div class=tsa-content layout=column><!-- Tank temp --><tsa-data-view data=ctrl.TS.TANK_TEMP frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.3f units=°C opt-title=views.thermosal.tank-temp></tsa-data-view><!-- Temperature --><tsa-data-view data=ctrl.TS.TEMP frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.3f units=°C opt-title=views.thermosal.temp></tsa-data-view><!-- Salinity --><tsa-data-view data=ctrl.TS.SALINITY frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.3f units=PSU opt-title=views.thermosal.salinity></tsa-data-view><!-- Anomaly --><tsa-data-view data=ctrl.TS.ANOMALY frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.3f units=kg/m³ opt-title=views.thermosal.anomaly></tsa-data-view><!-- Sound speed --><tsa-data-view data=ctrl.TS.SOUND_SPEED frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f units=m/s opt-title=views.thermosal.sound-speed></tsa-data-view><!-- Conductivity --><tsa-data-view data=ctrl.TS.CONDUCTIVITY frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.2f units=S/m opt-title=views.thermosal.conductivity></tsa-data-view><!-- Flow --><tsa-data-view data=ctrl.TS.FLOW frame-id=ctrl.TS.FRAME_FLOW device-id=ctrl.flowDeviceId format=%.2f units=l/mn alert-value=0.5 opt-title=views.thermosal.flow></tsa-data-view></div></div>'),e.put("app/tsa-views/trawl/trawl.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.trawl.icon\' | translate }}"></i><p class=title>{{"views.trawl.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><div flex layout=column class=tsa-content><div class=canvas flex layout=column><!-- Wind canvas --><canvas flex id={{ctrl.canvasId}}><p>Error during the display of the canvas (maybe due to the browser version)</p></canvas><!-- Data views --><tsa-data-view data=ctrl.horSpread.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f units=m title-disabled=true ng-style="{top:ctrl.horSpread.y + \'px\', left: ctrl.horSpread.x + \'px\'};"></tsa-data-view><!--opt-title="Hori. spread"--><tsa-data-view data=ctrl.verSpread.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f units=m title-disabled=true ng-style="{top:ctrl.verSpread.y + \'px\', left: ctrl.verSpread.x + \'px\'};"></tsa-data-view><!--opt-title="Vert. spread"--><tsa-data-view data=ctrl.doorDistance.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f units=m title-disabled=true ng-style="{top:ctrl.doorDistance.y + \'px\', left: ctrl.doorDistance.x + \'px\'};"></tsa-data-view><!--opt-title="Door dist."--><tsa-data-view data=ctrl.clearance.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f units=m title-disabled=true ng-style="{top:ctrl.clearance.y + \'px\', left: ctrl.clearance.x + \'px\'};"></tsa-data-view><!--opt-title="Clearance"--><tsa-data-view data=ctrl.immersion.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f units=m title-disabled=true ng-style="{top:ctrl.immersion.y + \'px\', left: ctrl.immersion.x + \'px\'};"></tsa-data-view><!--opt-title="Immersion"--><tsa-data-view data=ctrl.altitude.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f units=m title-disabled=true ng-style="{top:ctrl.altitude.y + \'px\', left: ctrl.altitude.x + \'px\'};"></tsa-data-view><!--opt-title="Altitude"--></div><div layout=row><tsa-data-view flex=50 class=temp data=ctrl.temp frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f units=° opt-title=views.trawl.water-temp></tsa-data-view><md-divider></md-divider><tsa-data-view flex=50 class=sounder data=ctrl.sounder.data frame-id=ctrl.sounder.frameId device-id=ctrl.sounder.deviceId format=%.1f units=m opt-title=views.trawl.sounder></tsa-data-view></div></div></div>'),e.put("app/tsa-views/trawling/trawling.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.trawling.icon\' | translate }}"></i><p class=title>{{"views.trawling.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><div flex=40 layout=row class=tsa-content><div flex=20 layout=column class=tsa-content><md-button class="md-raised md-primary" ng-disabled="(ctrl.isAcquiring || (!(ctrl.currentUserProvider.currentUser.login === \'admin\') && !(ctrl.currentUserProvider.currentUser.login === \'europe\')))" ng-click=ctrl.startAcquire()>START <img class=logo-image src=resources/images/icons/garnstart.png></md-button><md-button class="md-raised md-primary" ng-disabled="(!ctrl.isAcquiring || (!(ctrl.currentUserProvider.currentUser.login === \'admin\') && !(ctrl.currentUserProvider.currentUser.login === \'europe\')))" ng-click=ctrl.stopAcquire()>STOP <img class=logo-image src=resources/images/icons/garnstopp.png></md-button></div><div flex=30 layout=column class=tsa-content><p ng-show="(ctrl.currentUserProvider.currentUser.login !== \'admin\')"><i>You need to be logged as admin or europe</i></p></div><fieldset flex=50><legend>Distances</legend><div flex layout=column class=tsa-content><!-- Data views --><tsa-data-view opt-title="Dist. ligne droite ↔" data=ctrl.distance_straight.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.3f units=NM title-disabled=false></tsa-data-view><tsa-data-view opt-title="Dist. parcourue ↭" data=ctrl.distance_real.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.3f units=NM title-disabled=false></tsa-data-view><tsa-data-view opt-title="Ratio (↔/↭)" data=ctrl.ratio.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f units=% title-disabled=false></tsa-data-view></div></fieldset></div><div flex=60 layout=row class=tsa-content><fieldset flex><legend>Valeurs moyennes chalut</legend><tsa-data-view opt-title=OHM opt-value=ctrl.horspread_mean opt-subtitle=ctrl.horspread_mean_nb show-subtitle=true format=%.1f units=m title-disabled=false></tsa-data-view><tsa-data-view opt-title=OVM opt-value=ctrl.verspread_mean opt-subtitle=ctrl.verspread_mean_nb show-subtitle=true format=%.1f units=m title-disabled=false></tsa-data-view><tsa-data-view opt-title=Altitude opt-value=ctrl.altitude_mean opt-subtitle=ctrl.altitude_mean_nb show-subtitle=true format=%.1f units=m title-disabled=false></tsa-data-view></fieldset><fieldset flex><legend>Valeurs moyennes treuil</legend><div flex layout=column class=tsa-content><!-- Data views --><tsa-data-view opt-title="longueur tribord" opt-value=ctrl.starboardunwound_mean opt-subtitle=ctrl.starboardunwound_mean_nb show-subtitle=true format=%.1f units=m title-disabled=false></tsa-data-view><tsa-data-view opt-title="longueur babord" opt-value=ctrl.portunwound_mean opt-subtitle=ctrl.portunwound_mean_nb show-subtitle=true format=%.1f units=m title-disabled=false></tsa-data-view></div></fieldset><div flex layout=column class=tsa-content><!-- Data views --><tsa-data-view data=ctrl.comment.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%s title-disabled=true></tsa-data-view><tsa-data-view data=ctrl.lat.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f title-disabled=true></tsa-data-view><!--opt-title="Hori. spread"--><tsa-data-view data=ctrl.lon.id frame-id=ctrl.frameId device-id=ctrl.deviceId format=%.1f title-disabled=true></tsa-data-view><!--opt-title="Vert. spread"--><!--opt-title="Altitude"--></div></div></div>'),e.put("app/tsa-views/video/video.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-video"></i><p class=title>Video</p><p class=device-id>- {{ctrl.title | translate }}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column layout-align="center center" class=tsa-content id={{ctrl.videoId}}></div></div>'),e.put("app/tsa-views/videoCall/videoCall.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-video"></i><p class=title>{{"views.video-call.title" | translate }}</p><span flex></span><!-- {{ ctrl.videoCallState.state }}\n        {{ ctrl.videoCallState.currentUser.login }} --><md-button class=md-icon-button ng-click=ctrl.hangup() ng-show="ctrl.videoCallState.state > 1"><md-icon class=material-icons>call_end</md-icon><md-tooltip>{{"views.video-call.hangup" | translate }}</md-tooltip></md-button><md-button class=md-icon-button ng-class="" ng-click=ctrl.toggleVideo() ng-show="ctrl.videoCallState.state > 1"><md-icon class=material-icons>{{ ctrl.disableVideo ? "videocam_off" : "videocam"}}</md-icon><md-tooltip>{{"views.video-call.disableVideo" | translate }}</md-tooltip></md-button><md-button class=md-icon-button ng-class="" ng-click=ctrl.toggleAudio() ng-show="ctrl.videoCallState.state > 1"><md-icon class=material-icons>{{ ctrl.disableAudio ? "mic_off" : "mic"}}</md-icon><md-tooltip>{{"views.video-call.disableAudio" | translate }}</md-tooltip></md-button><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=column layout-align="center center" class=tsa-content id={{ctrl.parentId}}><!-- No user --><div class=full ng-if="ctrl.videoCallState.state == 0">You are not connected</div><div class=full ng-if="(ctrl.videoCallState.state == 1) && (ctrl.videoCallState.userList.length == 0)">No user connected</div><div class=full ng-show="(ctrl.videoCallState.state == 1) && (ctrl.videoCallState.userList.length > 0)"><table><tr ng-repeat="username in ctrl.videoCallState.userList"><td>{{ username }}</td><td><md-button class=md-icon-button ng-click=ctrl.videoCall(username)><md-icon class=material-icons>call</md-icon><md-tooltip>{{"views.video-call.call" | translate }}</md-tooltip></md-button></td></tr></table></div><div class=video-container ng-show="ctrl.videoCallState.state > 1"><video ng-class="{ calling: ctrl.videoCallState.state == 2 }" id=remotevideo autoplay playsinline ng-show="ctrl.videoCallState.state == 3"></video><video ng-class="{ calling: ctrl.videoCallState.state == 2 }" id=localvideo autoplay playsinline></video></div></div></div>'),e.put("app/tsa-views/weather/weather.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i ng-if="ctrl.mode != ctrl.MODE.ANEMOMETER" class="mdi mdi-24px mdi-{{\'views.weather.icon\' | translate }}"></i> <i ng-if="ctrl.mode == ctrl.MODE.ANEMOMETER" class="mdi mdi-24px mdi-{{\'views.anemometer.icon\' | translate }}"></i><p ng-if="ctrl.mode != ctrl.MODE.ANEMOMETER" class=title>{{"views.weather.title" | translate }}</p><p ng-if="ctrl.mode == ctrl.MODE.ANEMOMETER" class=title>{{"views.anemometer.title" | translate }}</p><p class=device-id>- {{ctrl.weatherDeviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex layout=row layout-align=space-around class=tsa-content><div flex layout=column layout-align=space-around><!-- Wind canvas --><canvas flex id={{ctrl.canvasId}}><p>Error during the display of the canvas (maybe due to the browser version)</p></canvas><!-- Wind data --><div layout=column><tsa-double-data-view ng-if="ctrl.mode != ctrl.MODE.ANEMOMETER" class=true-wind title=views.weather.true-wind data1=ctrl.trueWindHeadingId frame-id1=ctrl.weatherFrame device-id1=ctrl.weatherDeviceId format1=%.1f data2=ctrl.trueWindSpeedId frame-id2=ctrl.weatherFrame device-id2=ctrl.weatherDeviceId format2=%.1f></tsa-double-data-view><tsa-double-data-view class=relative-wind title=views.weather.rel-wind data1=ctrl.relWindHeadingId frame-id1=ctrl.weatherFrame device-id1=ctrl.weatherDeviceId format1=%.1f data2=ctrl.relWindSpeedId frame-id2=ctrl.weatherFrame device-id2=ctrl.weatherDeviceId format2=%.1f></tsa-double-data-view></div></div><md-divider ng-if="ctrl.mode != ctrl.MODE.ANEMOMETER"></md-divider><!-- Data views --><div ng-if="ctrl.mode != ctrl.MODE.ANEMOMETER" flex=50 layout=column><tsa-data-view ng-repeat="data in ctrl.weatherDataList" data=data.id frame-id=ctrl.weatherFrame device-id=ctrl.weatherDeviceId opt-title={{data.title}} format=%.1f></tsa-data-view></div></div></div>'),e.put("app/tsa-views/winch/winch.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.winch.icon\' | translate }}"></i><p class=title>{{"views.winch.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><!-- Loading icon --><div ng-if="ctrl.bufferLoading[ctrl.selectedScale] > 0" layout=column layout-align="center center" style="width: 40px"><md-tooltip>{{"archive-loading" | translate }}</md-tooltip><md-progress-circular md-diameter=20px></md-progress-circular></div><!-- Scale X --><md-input-container><md-select ng-model=ctrl.selectedScale ng-change=ctrl.onChangeXScale()><md-option ng-repeat="(name, value) in ctrl.scales" value={{name}}>{{name}}</md-option></md-select><md-tooltip>{{"Graphic scale" | translate }}</md-tooltip></md-input-container><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><!-- Content --><div flex class=tsa-content layout=column><div layout=row><tsa-data-view flex=50 opt-title=views.winch.length data=ctrl.length frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><tsa-data-view flex=50 opt-title={{ctrl.spinningText}} data=ctrl.spinning frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view></div><div layout=row><tsa-data-view flex=50 opt-title=views.winch.sounding format=%.1f data=ctrl.sounding frame-id=ctrl.frameSounding device-id=ctrl.deviceSoundingId></tsa-data-view><span flex=50 style="padding: 8px"></span></div><md-divider></md-divider><tsa-data-view opt-title=views.winch.tension data=ctrl.tension frame-id=ctrl.frameId device-id=ctrl.deviceId></tsa-data-view><!-- Chart --><div flex class=tsa-chart-container><canvas id={{ctrl.canvasId}}></canvas></div></div></div>'),e.put("app/tsa-views/winch-alarm-pp/winch-alarm-pp.html",'<meta charset=utf-8><div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.winchAlarmPp.icon\' | translate }}"></i><p class=title>{{"views.winchAlarmPp.title" | translate }}</p><!-- <p class="device-id">- {{ctrl.deviceId}}</p> --> <span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><table><tr><th>Info</th></tr></table><div class=alarm><table><tr ng-repeat="alarm in ctrl.alarms"><td>{{ alarm.text }}</td></tr></table></div><!-- Content --><div flex layout=row class=tsa-content></div></div>'),e.put("app/tsa-views/winch-info/winch-info.html",'<div layout=column><!-- Toolbar --><div layout=row class=tsa-toolbar><i class="mdi mdi-24px mdi-{{\'views.winch.icon\' | translate }}"></i><p class=title>{{"views.winch-info.title" | translate }}</p><p class=device-id>- {{ctrl.deviceId}}</p><span flex></span><tsa-settings-button on-change-view="ctrl.onChangeCardType({type: type})" card-id={{ctrl.cardId}}></tsa-settings-button></div><md-divider></md-divider><div class=tsa-content layout=column><!--\n            Longeur\n            Vitesse\n            Tension\n            Profondeur\n        --><!-- Length --><tsa-data-view data=ctrl.WINCH.LENGTH frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.winch.length></tsa-data-view><!-- Speed --><tsa-data-view data=ctrl.WINCH.SPINNING frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title={{ctrl.spinningText}}></tsa-data-view><!-- Tension --><tsa-data-view data=ctrl.WINCH.TENSION frame-id=ctrl.frameId device-id=ctrl.deviceId opt-title=views.winch.tension></tsa-data-view><!-- Depth --><tsa-data-view data=ctrl.NAVIGATION.SOUNDER frame-id=ctrl.NAVIGATION.FRAME_SHIPNAV device-id=ctrl.navId format=%.1f opt-title=views.winch.sounding></tsa-data-view></div></div>'),e.put("app/pages/acquisition/addChannel/addChannel.html",'<md-dialog style="width: 800px"><md-toolbar><div class="md-toolbar-tools md-hue-3"><h2 style="padding: 16px">{{ctrl.title}}</h2><span flex></span><md-button class=md-icon-button ng-click=ctrl.cancel()><md-icon class=material-icons>close</md-icon></md-button></div></md-toolbar><md-content layout=column style="padding-top: 16px" layout-margin><div layout=row style="height: 54px" layout-align="space-between center"><md-input-container flex style="height: 54px"><label>Channel</label><md-select ng-model=ctrl.channel ng-model-options="{trackBy: \'$value.channelId\'}"><md-option ng-value=channel ng-repeat="channel in ctrl.channelList">{{channel.channelId}} ({{channel.url}})</md-option><md-option value="New channel"><md-icon>add</md-icon>New channel</md-option></md-select></md-input-container><md-input-container style="height: 54px" ng-show="ctrl.channel === \'New channel\'"><label>ID</label><input ng-model=ctrl.newChannelId></md-input-container><md-input-container style="height: 54px" ng-show="ctrl.channel === \'New channel\'"><label>URL</label><input ng-model=ctrl.newChannelURL></md-input-container></div><div layout=row layout-align=end><md-button class="md-primary md-raised" ng-click=ctrl.cancel()>Cancel</md-button><md-button class="md-primary md-raised" ng-click=ctrl.save()>Select</md-button></div></md-content></md-dialog>'),e.put("app/pages/acquisition/addDevice/editDevice.html",'<div class=tsa-edit-device style="height: 100%" layout=column><md-toolbar><div class="md-toolbar-tools md-hue-3"><md-button class=md-icon-button ui-sref=acquisition><md-icon class=material-icons>close</md-icon></md-button><h2 style="padding: 16px">{{ctrl.title}}</h2><span flex></span><md-button ng-click=ctrl.save()>Save</md-button></div></md-toolbar><md-content flex style="padding: 8px" class=tsa-background><div style="padding: 8px" layout=row><md-card flex=50><md-card-title><md-card-title-text><span class=md-headline>Global properties</span></md-card-title-text></md-card-title><md-card-content layout=row><md-input-container flex=33><label>ID</label><input ng-model=ctrl.device.deviceId type=text></md-input-container><md-input-container flex=33><label>Name</label><input ng-model=ctrl.device.name></md-input-container><md-input-container flex=33><label>Period</label><input ng-model=ctrl.device.period></md-input-container></md-card-content></md-card><md-card flex=50><md-card-title><md-card-title-text><span class="md-headline md-primary">Trigger</span></md-card-title-text></md-card-title><md-card-content layout=row><md-input-container flex=30><label>Type</label><md-select ng-model=ctrl.device.triggerMode><md-option value=FRAME>Frame</md-option><md-option value=TIME>Time</md-option></md-select></md-input-container><md-input-container flex=70><label>Value</label><input ng-model=ctrl.triggerValue></md-input-container></md-card-content></md-card></div><div style="padding: 8px" layout=row><md-card flex=100><md-card-title><md-card-title-text><span class=md-headline>Channels</span></md-card-title-text></md-card-title><md-card-content><md-list style="margin:8px; padding: 8px"><md-list-item style="padding:0px; min-height: 0px; height: 50px; color:#757575"><p flex=30>ID</p><p flex=70>URL</p></md-list-item><md-divider></md-divider><md-list-item ng-repeat="channel in ctrl.channels"><p>{{channel.channelId}}</p><p>{{channel.url}}</p><div flex=10><md-button class=md-icon-button ng-click=ctrl.removeChannel(channel)><md-icon>remove</md-icon></md-button></div><md-divider></md-divider></md-list-item></md-list><div layout=row layout-align="end end"><md-button class="md-fab md-mini md-primary" ng-click=ctrl.addChannel()><md-icon>add</md-icon><md-tooltip>Add channel</md-tooltip></md-button></div></md-card-content></md-card></div><div style="padding: 8px" layout=row><md-card flex=100><md-card-title><md-card-title-text><span class=md-headline>Drivers</span></md-card-title-text></md-card-title><md-card-content><md-list style="margin:8px; padding: 8px"><md-list-item style="padding:0px; min-height: 0px; height: 50px; color:#757575"><p flex=20>Drivers</p><p flex=20>Channel</p><p flex=20>Driver</p><p flex=30>Fields</p><div flex=10></div></md-list-item><md-divider></md-divider><md-list-item ng-repeat="driver in ctrl.device.drivers"><p flex=20 style="font-weight: bold">{{driver.driverName}}</p><p flex=20>{{driver.channelId}}</p><p flex=20>{{driver.driverClassName.split(\'.\').pop()}}</p><div flex=30 layout=column style="padding-top: 8px; padding-bottom: 8px"><p ng-repeat="field in driver.fields" style="margin-top: 8px; margin-bottom: 8px">{{field.fieldIndex}} - {{field.frame}}:{{field.data}}</p></div><div flex=10 layout=row layout-align=end><md-button class=md-icon-button ng-click=ctrl.editDriver(driver)><md-icon>edit</md-icon></md-button><md-button class=md-icon-button ng-click=ctrl.removeDriver($index)><md-icon>delete</md-icon></md-button></div><md-divider></md-divider></md-list-item></md-list><div layout=row layout-align="end end"><md-button class="md-fab md-mini md-primary" ng-click=ctrl.addDriver()><md-icon>add</md-icon><md-tooltip>Add driver</md-tooltip></md-button></div></md-card-content></md-card></div></md-content></div>'),e.put("app/pages/acquisition/addDriver/addDriver.html",'<md-dialog style="width: 800px"><md-toolbar><div class="md-toolbar-tools md-hue-3"><h2 style="padding: 16px">{{ctrl.title}}</h2><span flex></span><md-button class=md-icon-button ng-click=ctrl.cancel()><md-icon class=material-icons>close</md-icon></md-button></div></md-toolbar><md-content layout=column style="padding-top: 16px" layout-margin><md-input-container style="height: 54px"><label>Driver</label><md-select ng-model=ctrl.driver.driverClassName ng-change=ctrl.changeDriverSelected()><md-option ng-repeat="driver in ctrl.driverList | orderBy" value={{driver}}>{{driver.split(".").reverse()[0]}}</md-option></md-select></md-input-container><md-input-container style="height: 54px"><label>Channel</label><md-select ng-model=ctrl.driver.channelId><md-option ng-repeat="channel in ctrl.channelList" ng-value=channel.channelId>{{channel.channelId}}</md-option></md-select></md-input-container><div layout=row layout-align="space-between center" style="height: 54px" ng-if=ctrl.headerLine><md-input-container class=md-block flex=50><label>Header</label><input ng-model=ctrl.driver.header></md-input-container><md-input-container flex=50><label>Regex</label><input ng-model=ctrl.driver.parameters.regex></md-input-container></div><md-list style=margin:8px><md-list-item style="padding:0px; min-height: 0px; height: 40px;color:#757575"><p flex=10>Index</p><p flex=30>Data</p><p flex=20>Option</p><p flex=20>Result</p><div flex=20><md-button class=md-icon-button ng-click=ctrl.addField()><md-icon>add</md-icon></md-button></div></md-list-item><md-divider></md-divider><md-list-item ng-repeat="field in ctrl.fieldList" style="min-height: 0px; height: 40px"><md-input-container flex=10 md-no-float class=md-block><input ng-model=field.fieldIndex placeholder=Index></md-input-container><md-select ng-model=field.frame flex=30><div ng-repeat="frame in ctrl.frameList | orderObjectBy:\'name\'"><md-optgroup label="{{frame.name}} "><md-option ng-repeat="data in frame.data | orderObjectBy:\'longName\'" value={{frame.name}}:{{data.name}}>{{data.longName}}</md-option></md-optgroup></div></md-select><md-input-container flex=20 md-no-float class=md-block><input ng-model=field.options placeholder=Options></md-input-container><p flex=20>{{field.result}}</p><div flex=20><md-button class=md-icon-button ng-click=ctrl.removeField(field)><md-icon>remove</md-icon></md-button></div></md-list-item></md-list><div layout=row layout-align=end><md-button class="md-primary md-raised" ng-click=ctrl.cancel()>Cancel</md-button><md-button class="md-primary md-raised" ng-click=ctrl.save()>Save</md-button></div></md-content></md-dialog>'),e.put("app/services/dialog/dataSelection/dataSelection.html",'<md-dialog class=data-selection><!-- Toolbar --><md-toolbar><div class=md-toolbar-tools><h2>{{ "dialog.data-selection.title" | translate }}</h2><span flex></span><md-button class=md-icon-button ng-click=ctrl.cancel()><md-icon class=material-icons>close</md-icon></md-button></div></md-toolbar><div flex layout=column class=custom-selection><!-- Device selection --><div class=md-whiteframe-3dp><md-input-container style="width: 200px; margin-left: 16px; margin-top: 26px"><label>{{ "Device" | translate }}</label><md-select ng-model=ctrl.deviceId><md-option value={{device.id}} ng-repeat="device in ctrl.deviceList | orderObjectBy:\'name\'">{{device.name}}</md-option></md-select></md-input-container></div><div flex style="overflow: auto; padding: 16px"><div ng-repeat="(frameName, frame) in ctrl.deviceList[ctrl.deviceId].frameList" layout=column style="margin-left: 16px"><!-- Frame checkbox --><md-checkbox ng-checked="ctrl.frameIsSelected(frame, frameName, ctrl.deviceId)" ng-click="ctrl.selectFrame(frame, frameName, ctrl.deviceId)" md-indeterminate="ctrl.frameIsSelected(frame, frameName, ctrl.deviceId) == \'indeterminate\'">{{frameName}}</md-checkbox><!-- Data checkbox --><md-checkbox ng-repeat="data in frame | orderObjectBy:\'longName\'" ng-checked="ctrl.selectedDataList.includes(data.name, frameName, ctrl.deviceId)" ng-click="ctrl.selectData(data.name, frameName, ctrl.deviceId)" style="margin-left: 24px">{{data.longName}}</md-checkbox></div></div><md-dialog-actions layout=row class=md-whiteframe-3dp><p class=md-subhead>{{ctrl.selectedDataList.dataList.length}} {{ "dialog.data-selection.data-selected" | translate }}</p><span flex></span><md-button class=md-primary ng-click=ctrl.answer()>{{ "dialog.data-selection.add" | translate }}</md-button></md-dialog-actions></div></md-dialog>'),e.put("app/services/dialog/dateRangeSelection/dateRangeSelection.html",'<md-dialog class=date-range-selection><!-- Toolbar --><md-toolbar><div class=md-toolbar-tools><h2>{{ "dialog.date-range-selection.title" | translate }}</h2><span flex></span><md-button class=md-icon-button ng-click=ctrl.cancel()><md-icon class=material-icons>close</md-icon></md-button></div></md-toolbar><div layout=row layout-align=space-between><div layout=column layout-align=center class=column><h3 class="md-headline md-primary" style="align-self: center">{{ "dialog.date-range-selection.start-date" | translate }}</h3><md-calendar ng-model=ctrl.startDate md-whiteframe=1></md-calendar><md-input-container><md-icon class="material-icons md-primary">access_time</md-icon><label>{{ "dialog.date-range-selection.time" | translate }} UTC (hh:mm:ss)</label><input ng-model=ctrl.startTime></md-input-container></div><div layout=column class=column><md-icon class=material-icons>arrow_forward</md-icon></div><div layout=column layout-align=center class=column><h3 class="md-headline md-primary" style="align-self: center">{{ "dialog.date-range-selection.end-date" | translate }}</h3><md-calendar ng-model=ctrl.endDate md-whiteframe=1></md-calendar><md-input-container><md-icon class="material-icons md-primary">access_time</md-icon><label>{{ "dialog.date-range-selection.time" | translate }} UTC (hh:mm:ss)</label><input ng-model=ctrl.endTime></md-input-container></div></div><span flex></span><md-dialog-actions layout=row><span flex></span><md-button class=md-primary ng-click=ctrl.answer()>ok</md-button></md-dialog-actions></md-dialog>'),e.put("app/services/dialog/messaging/messaging.html",'<md-dialog class=messaging><!-- Toolbar --><md-toolbar><div class=md-toolbar-tools><md-icon class=material-icons style="margin-right: 16px">chat</md-icon><h2>{{ "dialog.messaging.title" | translate }}</h2><span flex></span><md-button class=md-icon-button ng-click=ctrl.close()><md-icon class=material-icons>close</md-icon></md-button></div></md-toolbar><div flex style=overflow:auto><div class=message ng-repeat="msg in ctrl.messageList"><p class="md-body-1 date" ng-if="msg.user===\'user\'">{{ msg.messageTime | date : "dd MMM yyyy - HH:mm:ss" : "+0"}}{{\'views.message.from\' | translate }}{{\'dialog.messaging.user\' | translate }}</p><p class="md-body-1 date" ng-if="msg.user!==\'user\'">{{ msg.messageTime | date : "dd MMM yyyy - HH:mm:ss" : "+0"}}{{\'views.message.from\' | translate }}{{msg.user}}</p><p class="md-body-1 body">{{msg.message}}</p></div></div><md-divider></md-divider><div layout=row layout-align="center center" style="padding: 16px"><md-input-container flex class=md-block><label>{{"dialog.messaging.label"| translate}}</label><textarea ng-keydown=ctrl.tabFunction($event) ng-model=ctrl.currentMessage rows=2 md-select-on-focus value=keyboard! ng-trim=false></textarea></md-input-container><md-button class="md-fab md-primary" ng-click=ctrl.send() ng-disabled=!ctrl.currentMessage><md-icon>send</md-icon><md-tooltip>{{"dialog.messaging.submit" | translate }}</md-tooltip></md-button></div></md-dialog>'),e.put("app/services/dialog/messagingAccess/messagingAccess.html",'<md-dialog class=messaging-access><md-toolbar><div class=md-toolbar-tools><md-icon class=material-icons>vpn_key</md-icon><h2>{{ "dialog.messagingAccess.title" | translate }}</h2><span flex></span><md-button class=md-icon-button ng-click=ctrl.close()><md-icon class=material-icons>close</md-icon></md-button></div></md-toolbar><div id=messageAccess layout=column><div layout=row class=div-password layout-align="center center"><md-input-container class=md-block flex><label for=password>{{"dialog.messagingAccess.label"| translate}}</label><input type=password id=password ng-model=ctrl.passwordInput ng-keypress=ctrl.onKeyPressed($event)><div class=errorMessage><!-- <div ng-show=\'\' class="error">{{ "dialog.messagingAccess.CapsLockError" | translate }}</div> Needs a caps lock detect function--><div ng-show=ctrl.inputMatch class=error>{{ "dialog.messagingAccess.passwordError" | translate }}</div></div></md-input-container></div><div class=redirect layout=row layout-align=end><md-button class="md-primary md-raised" ng-click=ctrl.redirect() ng-disabled=!ctrl.passwordInput>{{"dialog.messagingAccess.submit"| translate}}</md-button></div></div></md-dialog><!--\nmessageAccess.passwordInput.$error-->'),e.put("app/services/dialog/saveDashboard/saveDashboard.html",'<md-dialog><md-toolbar><div class="md-toolbar-tools md-hue-3"><md-icon class=material-icons>save</md-icon><h2 style="padding: 16px">{{ "dialog.save-dashboard.title" | translate }}</h2><span flex></span><md-button class=md-icon-button ng-click=ctrl.cancel()><md-icon class=material-icons>close</md-icon></md-button></div></md-toolbar><div layout=column layout-padding><md-input-container style="margin-bottom: 0"><label>{{ "dialog.save-dashboard.title-label" | translate }}</label><input ng-model=ctrl.title type=text></md-input-container><md-button class=md-primary ng-click=ctrl.save() ng-disabled="ctrl.title == \'\'">{{ "dialog.save-dashboard.save" | translate }}</md-button></div></md-dialog>'),
e.put("app/services/dialog/validation/validation.html",'<md-dialog><md-toolbar><div class="md-toolbar-tools md-hue-3"><md-icon class=material-icons>warning</md-icon><h2 style="padding: 16px">{{ctrl.title}}</h2><span flex></span><md-button class=md-icon-button ng-click=ctrl.cancel()><md-icon class=material-icons>close</md-icon></md-button></div></md-toolbar><div layout=column layout-padding><h3 class=md-body-1>{{ctrl.msg}}</h3><div layout=row layout-align="center center"><md-button class=md-primary ng-click=ctrl.disconnect()>{{ctrl.msgOk}}</md-button><md-button class=md-primary ng-click=ctrl.cancel()>{{ctrl.msgCancel}}</md-button></div></div></md-dialog>'),e.put("app/services/dialog/viewSelection/viewSelection.html",'<md-dialog class=view-selection><!-- Toolbar --><md-toolbar><div class="md-toolbar-tools md-hue-3"><md-icon class=material-icons style="margin-right: 16px">system_update_alt</md-icon><h2>{{ "dialog.view-selection.title" | translate }}</h2><span flex></span><md-button class=md-icon-button ng-click=ctrl.cancel()><md-icon class=material-icons>close</md-icon></md-button></div></md-toolbar><!-- Tabs (backup element used to load the video preview image and avoid flashing) --><!--      <span id="backup" ng-style=ctrl.viewProvider.getBackupCss()></span> --> <span class=backup ng-repeat="mosaic in ctrl.mosaicList" ng-style=ctrl.viewProvider.getBackupCss($index)>Coucou</span><!-- Tabs --><md-tabs flex md-border-bottom md-selected=ctrl.viewProvider.indexSelectedTab><md-tab ng-repeat="(listName, list) in ctrl.viewList" label="{{listName | translate }}"><md-grid-list flex md-cols=5 md-row-height=72px md-gutter=8px><md-grid-tile ng-repeat="view in list | orderBy: \'title | translate\'  track by $index " md-whiteframe=1 md-rowspan={{view.rowspan}} md-ink-ripple tabindex=-1 ng-click=ctrl.selectView(view)><div layout=column layout-align=space-between><div layout=row layout-align="start center" style=height:72px><i class="mdi mdi-24px mdi-{{view.icon | translate}}"></i><!--md-icon class="material-icons">{{view.icon}}</md-icon--><div class=md-list-item-text><h3 class=md-subhead>{{view.title | translate }}</h3><p class=md-subhead>{{view.config.deviceId | translate }}</p></div></div><div flex ng-if="view.imageCSSClass !== undefined" ng-style=view.imageBackground class="preview {{view.imageCSSClass}}"></div></div></md-grid-tile></md-grid-list></md-tab></md-tabs></md-dialog>'),e.put("app/tsa-views/casino/codeNameFields/codeNameFields.html",'<div flex layout=row layout-align="space-between stretch" ng-if=ctrl.listItems><md-input-container flex=26><label>{{"components.code-name-fields." + ctrl.itemType + ".code" | translate }}</label><input type=text ng-model=ctrl.selectedItem.code disabled ng-class="{follow: ctrl.itemFollow}"></md-input-container><md-input-container flex><label>{{"components.code-name-fields." + ctrl.itemType + ".name" | translate }}</label><md-select class=form-control required ng-model=ctrl.selectedItem ng-model-options="{trackBy: \'$value.name\'}" ng-change=ctrl.updateItem() ng-class="{follow: ctrl.itemFollow}" ng-disabled=ctrl.itemReadonly><md-option ng-value=item ng-repeat="item in ctrl.listItems">{{item.name}}</md-option></md-select></md-input-container></div>'),e.put("app/pages/dataAccess/components/paramSelector/paramSelector.html",'<div layout=row><md-icon class=material-icons style="margin: 14px">settings</md-icon><div flex><div layout=row ng-show="ctrl.mode==\'simple\'"><p>{{"pages.data-access.sampling-interval" | translate}}:</p><md-select ng-model=ctrl.simpleSampingInterval style="margin: 8px" class=md-no-underline><md-option value=1>1 s</md-option><md-option value=30>30 sec</md-option><md-option value=60>1 min</md-option><md-option value=300>5 min</md-option></md-select></div><div layout=column style="padding:8px 8px 14px 0px" ng-show="ctrl.mode==\'advanced\'"><md-input-container ng-show="ctrl.mode==\'advanced\'"><label>{{"pages.data-access.max-values" | translate}}</label><input ng-model=ctrl.maxValues></md-input-container><div layout=row><p>{{"pages.data-access.time-stamping-strat" | translate}}:</p><md-select ng-model=ctrl.timeStampingStrategy style="margin: 8px" class=md-no-underline><md-option value=resampling>{{"pages.data-access.resampling" | translate}}</md-option><md-option value=reference>{{"pages.data-access.reference" | translate}}</md-option></md-select></div><div layout=row ng-show="ctrl.timeStampingStrategy == \'resampling\'"><md-input-container flex=40><label>{{"pages.data-access.interval" | translate}} (s)</label><input ng-model=ctrl.resampleInterval></md-input-container><md-input-container flex=60><label>{{"pages.data-access.stamp-fraction-int" | translate}} (s)</label><input ng-model=ctrl.intervalStampFraction></md-input-container></div><md-input-container ng-show="ctrl.timeStampingStrategy == \'reference\'"><label>{{"pages.data-access.reference" | translate}}</label><input ng-model=ctrl.reference></md-input-container></div></div></div>'),e.put("app/pages/dataAccess/components/periodSelector/periodSelector.html",'<div layout=row><md-icon class=material-icons style="margin: 14px">date_range</md-icon><div layout=column><div layout=row><p>{{"pages.data-access.period" | translate}}:</p><md-select ng-model=ctrl.currentSelection class=md-no-underline><md-option ng-repeat="selection in ctrl.selectionList" value={{selection}}>{{selection | translate}}</md-option><md-option value={{ctrl.CUSTOM_RANGE}} ng-click=ctrl.setCustomRange()>{{ctrl.CUSTOM_RANGE | translate}}</md-option></md-select></div><!-- Custom range --><div layout=row layout-align="start center" style="padding-bottom: 14px" ng-show="ctrl.currentSelection == ctrl.CUSTOM_RANGE"><p class=date>{{ctrl.startDate | date : "dd MMM yyyy HH:mm:ss" : "+0"}}</p><md-icon class=material-icons style="margin: 14px">arrow_forward</md-icon><p class=date>{{ctrl.endDate | date : "dd MMM yyyy HH:mm:ss" : "+0"}}</p><md-button class=md-icon-button ng-click=ctrl.setCustomRange()><md-icon class=material-icons>edit</md-icon><md-tooltip>{{"pages.data-access.edit-period" | translate}}</md-tooltip></md-button></div></div></div>'),e.put("app/pages/dataAccess/components/resultCard/resultCard.html",'<md-card flex layout=column><!-- Toolbar --><div class=toolbar layout=row layout-align="center center"><h3 class=md-headline>{{ctrl.frames.length}} {{"pages.data-access.frames-received" | translate}}</h3><span flex></span><md-button class=md-icon-button ng-click="ctrl.displayMode = \'table\'"><md-icon ng-class="{\'enabled\': ctrl.displayMode == \'table\'}">format_list_numbered</md-icon><md-tooltip>{{"pages.data-access.show-table" | translate}}</md-tooltip></md-button><md-button class=md-icon-button ng-click="ctrl.displayMode = \'chart\'"><md-icon ng-class="{enabled: ctrl.displayMode == \'chart\'}">show_chart</md-icon><md-tooltip>{{"pages.data-access.show-chart" | translate}}</md-tooltip></md-button></div><!-- Data table --><div flex layout=column layout-align="start start" class=tsa-table ng-show="ctrl.displayMode == \'table\'"><div class=tsa-table-title md-whiteframe=1><p>Date (UTC)</p><p ng-repeat="(columnTitle,value) in ctrl.framesTable[0]" ng-if="columnTitle != \'time\'">{{columnTitle}}</p></div><div flex class=tsa-table-content><div ng-repeat="frame in ctrl.framesTable"><p ng-repeat="(key, value) in frame">{{value}}</p></div></div></div><!-- Chart --><div class=checkbox-line ng-show="ctrl.displayMode == \'chart\'"><md-checkbox ng-repeat="dataset in ctrl.chartData.datasets" ng-true-value=false ng-false-value=true ng-model=dataset.hidden ng-change=ctrl.chart.update() ng-style="dataset.hidden ? \'\':{background: \'{{dataset.borderColor}}\', color: \'{{dataset.borderColor}}\'}">{{dataset.label}}</md-checkbox></div><div flex class=tsa-chart-container ng-show="ctrl.displayMode == \'chart\'"><canvas id={{ctrl.canvasId}}></canvas></div><!-- Map --><!--\n    <div style="margin: 16px" md-whiteframe=1 ng-show="ctrl.displayMode == \'map\'" flex id="map">\n    </div>\n--><!-- Map  \n    <div class="map-element" flex id=\'{{ctrl.mapId}}\'>\n        <div class="day-night-layer" ng-class="{\'station-unavailable\': ctrl.stationIsUnvailable}">\n            <p class="md-subhead">{{"views.station.unvailable" | translate }}</p>\n        </div>\n    </div--></md-card>'),e.put("app/pages/dataAccess/components/variableSelector/variableSelector.html",'<div layout=column flex><div layout=row layout-align="center center" class=toolbar><md-icon class=material-icons>storage</md-icon><!--h3 class="md-headline">Data</h3--><p>{{ctrl.simpleDataList.length}} {{"pages.data-access.data-selected" | translate}}</p><!--md-select ng-model="ctrl.currentSelection" class="md-no-underline">\n            <md-option ng-repeat="selection in ctrl.selectionList" value=\'{{selection}}\'>{{selection}}</md-option>\n        </md-select--> <span flex></span><md-button class=md-primary ng-click=ctrl.addNavData() ng-show="ctrl.mode == \'simple\'"><md-tooltip>{{"pages.data-access.add-navigation" | translate}}</md-tooltip><md-icon>playlist_add</md-icon>{{"pages.data-access.navigation" | translate}}</md-button><md-button class=md-primary ng-click=ctrl.addWeatherData() ng-show="ctrl.mode == \'simple\'"><md-tooltip>{{"pages.data-access.add-weather" | translate}}</md-tooltip><md-icon>playlist_add</md-icon>{{"pages.data-access.weather" | translate}}</md-button><md-button class=md-primary ng-click=ctrl.addTSData() ng-show="ctrl.mode == \'simple\'"><md-tooltip>{{"pages.data-access.add-thermosal" | translate}}</md-tooltip><md-icon>playlist_add</md-icon>{{"pages.data-access.thermosal" | translate}}</md-button><md-button class=md-primary ng-click=ctrl.addData()><md-tooltip>{{"pages.data-access.add-custom-data" | translate}}</md-tooltip><md-icon>playlist_add</md-icon>{{"pages.data-access.custom-data" | translate}}</md-button></div><!-- Custom selection: simple data list --><div class=tsa-table ng-show="ctrl.mode == \'simple\'"><div class=tsa-table-title layout=row layout-align="space-between center"><p flex=20>{{"Device" | translate}}</p><p flex=20>{{"Frame" | translate}}</p><p flex=20>{{"Data" | translate}}</p><p flex=20>{{"pages.data-access.column-name" | translate}}</p><div flex=5><md-button class=md-icon-button ng-click=ctrl.clearAll()><md-icon>close</md-icon><md-tooltip>{{"pages.data-access.remove-all" | translate}}</md-tooltip></md-button></div></div><md-divider style="z-index: 2"></md-divider><div class=tsa-table-content><div ng-repeat="data in ctrl.simpleDataList" layout=row layout-align="space-between center"><p flex=20>{{data.deviceId}}</p><p flex=20>{{data.frameId}}</p><p flex=20>{{data.id}}</p><md-input-container flex=20 md-no-float class=md-block><input ng-model=data.colname placeholder="Column Name"></md-input-container><div flex=5><md-button class=md-icon-button ng-click=ctrl.simpleDataList.splice(ctrl.simpleDataList.indexOf(data),1)><md-icon>close</md-icon></md-button></div></div></div></div><!-- Advanced data list --><div class=tsa-table ng-show="ctrl.mode == \'advanced\'"><div class=tsa-table-title layout=row layout-align="space-between center"><p flex=25>Var ID</p><p flex=20>{{"pages.data-access.column-name" | translate}}</p><p flex=15>{{"pages.data-access.aggregate" | translate}}</p><p flex=10>{{"pages.data-access.units" | translate}}</p><p flex=10>{{"pages.data-access.default" | translate}}</p><p flex=5>Min</p><p flex=5>Max</p><div flex=5><md-button class=md-icon-button ng-click=ctrl.clearAll()><md-icon>close</md-icon><md-tooltip>{{"pages.data-access.remove-all" | translate}}</md-tooltip></md-button></div></div><md-divider></md-divider><div class=tsa-table-content><div ng-repeat="data in ctrl.advancedDataList" layout=row layout-align="space-between center"><!-- Var id --><md-input-container flex=25 md-no-float class=md-block><input ng-model=data.varid placeholder="Var ID"></md-input-container><!-- Column name --><md-input-container flex=20 md-no-float class=md-block><input ng-model=data.colname placeholder="Column Name"></md-input-container><!-- Aggregate --><md-input-container flex=15 md-no-float class=md-block><md-select ng-model=data.aggregate placeholder=Aggregate><md-option ng-repeat="aggr in ctrl.aggregateList" value={{aggr}}>{{aggr}}</md-option></md-select></md-input-container><!-- Units --><md-input-container flex=10 md-no-float class=md-block><input ng-model=data.units placeholder=Units></md-input-container><!-- Default value --><md-input-container flex=10 md-no-float class=md-block><input ng-model=data.default placeholder=Default></md-input-container><!-- Min --><md-input-container flex=5 md-no-float class=md-block><input ng-model=data.min placeholder=Min></md-input-container><!-- Max --><md-input-container flex=5 md-no-float class=md-block><input ng-model=data.max placeholder=Max></md-input-container><!-- Remove button --><div flex=5><md-button class=md-icon-button ng-click=ctrl.advancedDataList.splice(ctrl.advancedDataList.indexOf(data),1)><md-icon>close</md-icon></md-button></div></div></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-fa2e02a957.js.map
